Issue ID,Issue,Issue description,#Comments,Reported date,Fixed date,DateDiff(Days),Issue Type,Priority,#Contributors
MDL-39512,Disable the manual graded behaviour in the UI (backport of MDL-39412),"Backport disabling manual graded question behaviour for all installs (Can be re-enabled if really really required).

",11,6/5/2013,14/6/2013,39,Improvement,Critical,7
MDL-39563,mobilecssurl is not being returned in WebService get_siteinfo function,"Go to Site administration / ‚ñ∫ Plugins / ‚ñ∫ Web services / ‚ñ∫ Mobile

Add a valid url in the mobilecssurlfield

Call the get_siteinfo WS function, in the result you will notice that mobilecssurl field is empty:

{""sitename"":""XXXX"",""username"":""student01"",""firstname"":""Student"",""lastname"":""Demo"",""fullname"":""Student Demo"",""lang"":""en"",""userid"":3,""siteurl"":""http:\/\/xxxx\/moodle24"",""userpictureurl"":""http:\/\/xxxx\/moodle24\/pluginfile.php\/19\/user\/icon\/f1"",""functions"":[{""name"":""moodle_enrol_get_users_courses"",""version"":""2012120300.06""},{""name"":""moodle_enrol_get_enrolled_users"",""version"":""2012120300.06""},{""name"":""moodle_user_get_users_by_id"",""version"":""2012120300.06""},{""name"":""moodle_webservice_get_siteinfo"",""version"":""2012120300.06""},{""name"":""moodle_notes_create_notes"",""version"":""2012120300.06""},{""name"":""moodle_user_get_course_participants_by_id"",""version"":""2012120300.06""},{""name"":""moodle_user_get_users_by_courseid"",""version"":""2012120300.06""},{""name"":""moodle_message_send_instantmessages"",""version"":""2012120300.06""},{""name"":""core_course_get_contents"",""version"":""2012120300.06""},{""name"":""core_get_component_strings"",""version"":""2012120300.06""}],""downloadfiles"":1,""release"":""2.4+ (Build: 20121230)"",""version"":""2012120300.06"",""mobilecssurl"":""""}
",9,8/5/2013,19/7/2013,72,Bug,Major,4
MDL-39697,Bootstrapbase $THEME->layouts need 'Maintenance' and is missing important options.,"After a chance comment by [~phalacee] in MDL-39573, and on inspection of bootstrapbase/config.php,  later revealed that the maintenance layout was incorrect and missing important options namely:

{code}
 'maintenance' => array(
        'file' => 'general.php',
        'regions' => array(),
        'options' => array('noblocks' => true, 'nofooter' => true, 'nonavbar' => true, 'nocustommenu' => true, 'nocourseheaderfooter' => true),
    ),
{code}

Also comparing it with base theme showed up other settings to.

That said, the intention of this issue is to add Base $THEME->layouts so that some continuity is maintained for future versions of Moodle.",13,16/5/2013,24/5/2013,8,Sub-task,Blocker,4
MDL-39720,Missing setType in course legacy files,"Enabled course legacy files site-wide
Enable course legacy files for particular course
Click on Administration->Course administration->Legacy course files

Did you remember to call setType() for 'contextid'? Defaulting to PARAM_RAW cleaning.

    line 1303 of /lib/formslib.php: call to debugging()
    line 281 of /lib/formslib.php: call to moodleform->detectMissingSetType()
    line 202 of /lib/formslib.php: call to moodleform->_process_submission()
    line 51 of /files/coursefilesedit.php: call to moodleform->moodleform()",4,17/5/2013,24/5/2013,7,Sub-task,Minor,4
MDL-39749,Popup as File picker/Activity chooser should be mobile friendly,"At the moment the file picker has many issues that make it not mobile friendly:
* button, icon, text, everything is quite small
* the popup should be static, fill the entire screen, ... there is no need to restrict the file picker to a portion of the screen neither it needs to be drag around the screen.
* the upload form is displayed by default but there is no need to display it. On mobile the user should click on the repository upload and it triggers the OS picker then the file form is displayed and filled up with the picked file info.
...

Obviously all this need specs first as it needs some brainstorming on the user behaviors/expectation and it also implies some technical challenges. ",2,20/5/2013,13/1/2014,238,Improvement,Critical,2
MDL-39810,IE Compatibility View problem - Moodle 2.5 repository_ajax.php tries to download in browser,"Users are encountering problems when they use IE and try to upload any file through the file resource.  

When they try and upload the file, they are asked if they wise to open or save ""repository_ajax.php"" file

The fix is to add the ""@header('Content-type: text/html; charset=utf-8');"" code snippet after line 59 (echo $OUTPUT->header(); // send headers)

So it should be:

.....
echo $OUTPUT->header(); // send headers

// add this code snippet
@header('Content-type: text/html; charset=utf-8');
// end add

.....

This was missed in 2.5 and it was included in earlier 2.x versions

https://moodle.org/mod/forum/discuss.php?d=228568

",73,24/5/2013,1/11/2013,161,Bug,Major,16
MDL-39923,Make badge notifications use internal Moodle messaging,"As discussed in the thread https://moodle.org/mod/forum/discuss.php?d=229477#p996621, Badges should be awarded in a more 'triumphant' way than with an email, such as a pop-up. Currently the user is unaware (s)he has been awarded a badge unless they check either the 'my badges' block or their emails. It would be nice if they were told immediately, preferably with some nice graphics too to give them an immediate sense of achievement.

Yuliya: This is happening because badges notifications are not going through standard Moodle messaging. Since now it is possible to send attachments using Moodle message libraries, I will update the code to make sure that badges are using them too.",31,30/5/2013,15/11/2013,169,Bug,Major,15
MDL-39962,Replace Legacy events - Mixed,"Replace all legacy events related to lti,workshop.
workshop_viewed 
lti_unknown_service_api_call 

*Replace event handlers with event observers.*
mod/workshop/allocation/scheduled/db/events.php
* workshopallocation_scheduled_workshop_viewed


Edit - quiz events moved to a separate issue. portfolio_send also moved to a separate issue.

",21,31/5/2013,27/9/2013,119,Task,Major,7
MDL-39978,Essays with files break each attempt builds on last,"This is a regression from MDL-34640.

You get a fatal error when trying to start the second attempt.",5,1/6/2013,14/6/2013,13,Bug,Major,4
MDL-40043,Replace add_to_log with an event trigger - course,"Replace the add_to_log calls in the following directories, with new events which contains the same information:

*Course*
/course/recent.php:41: add_to_log($course->id, ""course"", ""recent"", ""recent.php?id=$course->id"", $course->id);
/course/delete.php:68: add_to_log(SITEID, ""course"", ""delete"", ""view.php?id=$course->id"", ""$course->fullname (ID $course->id)"");
/course/manage.php:252: add_to_log($course->id, ""course"", ($visible ? 'show' : 'hide'), ""edit.php?id=$course->id"", $course->id);
/course/manage.php:280: add_to_log($movecourse->id, ""course"", ""move"", ""edit.php?id=$movecourse->id"", $movecourse->id);
/course/lib.php:2041: add_to_log($course->id, ""course"", ""move"", ""edit.php?id=$course->id"", $course->id);
/course/lib.php:2291: add_to_log(SITEID, 'course', 'new', 'view.php?id='.$course->id, $data->fullname.' (ID '.$course->id.')');
/course/lib.php:2380: add_to_log($course->id, ""course"", ""update"", ""edit.php?id=$course->id"", $course->id);
/course/user.php:108: add_to_log($course->id, ""course"", ""user report"", ""user.php?id=$course->id&amp;user=$user->id&amp;mode=$mode"", ""$user->id"");
/course/editsection.php:72: add_to_log($course->id, ""course"", ""editsection"", ""editsection.php?id=$id"", ""$sectionnum"");
/course/view.php:117: add_to_log($course->id, 'course', $loglabel, ""view.php?"". $logparam, $infoid);
/course/loginas.php:70: add_to_log($course->id, ""course"", ""loginas"", ""../user/view.php?id=$course->id&amp;user=$userid"", ""$oldfullname -> $newfullname"");

/index.php:79: add_to_log(SITEID, 'course', 'view', 'view.php?id='.SITEID, SITEID);
",11,6/6/2013,23/8/2013,78,Task,Major,6
MDL-40074,Create a quiz from a set of questions.,We have functionality to add a quiz to a course here '/mod/quiz/tests/generator/lib.php' and we need to be able to add questions to quizzes.,8,6/6/2013,19/7/2013,43,Sub-task,Minor,4
MDL-40087,Turn editing on button misaligned on navigation bar,"The 'Turn editing on' button is misaligned on the navigation bar.

In 'moodle/modules.less':

{code}
.breadcrumb-button {
    float: right;
    margin-top: 3px;
}
{code}

needs to be:

{code}
.breadcrumb-button {
    float: right;
    margin-top: 4px;
}
{code}",17,7/6/2013,14/6/2013,7,Sub-task,Minor,6
MDL-40097,Course completion role criteria causes fatal error,"Hi there,

I'm using Moodle 2.4 on a test site.

I've got a large course with many activities with completion criteria set. I'm using the Flexible Sections course format to structure things.

When I added the Course Completion block to the course I started getting the error:

Coding error detected, it must be fixed by a programmer: PHP catchable fatal error

I was able to turn on debugging and have identified the course completion block as the issue. When it's disabled the error goes.

Here's the debug info:

Debug info: Argument 1 passed to role_get_name() must be an instance of stdClass, boolean given, called in [dirroot]/completion/criteria/completion_criteria_role.php on line 126 and defined
Error code: codingerror
Stack trace:
line 406 of /lib/setuplib.php: coding_exception thrown
line 4458 of /lib/accesslib.php: call to default_error_handler()
line 126 of /completion/criteria/completion_criteria_role.php: call to role_get_name()
line 141 of /blocks/completionstatus/block_completionstatus.php: call to completion_criteria_role->get_title()
line 284 of /blocks/moodleblock.class.php: call to block_completionstatus->get_content()
line 232 of /blocks/moodleblock.class.php: call to block_base->formatted_contents()
line 953 of /lib/blocklib.php: call to block_base->get_content_for_output()
line 1005 of /lib/blocklib.php: call to block_manager->create_block_contents()
line 353 of /lib/blocklib.php: call to block_manager->ensure_content_created()
line 34 of /theme/standardtotara/layout/general.php: call to block_manager->region_has_content()
line 806 of /lib/outputrenderers.php: call to include()
line 734 of /lib/outputrenderers.php: call to core_renderer->render_page_layout()
line 240 of /course/view.php: call to core_renderer->header()",40,7/6/2013,9/1/2015,581,Bug,Major,18
MDL-40258,"Filepicker ""Invalid JSON String"" error due to bug in how accepted_types is handled","I discovered a bug in the way that the ""accepted_types"" option of the file picker is handled. When passing in several different extensions and mime-types in the array file_get_grouptype() in lib/filelib.php returns an numerically indexed array of extensions. Those are passed in js_init_call(), which json_encodes it and includes in the page on output. 

When the array has consecutive indices starting at 0 (e.g. array(0 => 'jpg', 1 => 'png', 2 => 'svg') it gets encoded as an Array in JavaScript (e.g. ['jpg', 'png', 'svg']) and when the filepicker code turns that into the accepted_types parameter for the ajax call to the repository it works great there is no error.

When the array has non-consecutive indices (e.g. array(0 => 'jpg', 1 => 'png', 9 => 'svg') it gets encoded as an JavaScript Object instead (e.g. {0: 'jpg', 1: 'png', 9: 'svg'} which in turn gets turned into the string ""[object Object]"" when the filepicker code trys to turn it into the accepted_types parameter for the ajax call to the repository.

",6,21/6/2013,28/6/2013,7,Bug,Minor,5
MDL-40299,migrate textlib to core_ prefix and auto class loader,"reasons:
* memory use
* coding style improvements

With full BC of course...",18,24/6/2013,4/7/2013,10,Improvement,Minor,7
MDL-40305,phpunit testcase autoloader,phpunit should be able to find the file where is the testcase defined automatically...,7,24/6/2013,28/6/2013,4,Improvement,Minor,3
MDL-40402,Deprecate get_system_context(),"Add deprecate warning to get_system_context() function.
http://docs.moodle.org/dev/Deprecation#Step_1._Immediate_action",5,1/7/2013,12/7/2013,11,Sub-task,Minor,5
MDL-40522,Grade assignment from a sorted table brings up incorrect student when new submissions since page load,"To recreate:

1. grade an assignment and order 'Last modified (submission)' to show newest submission at top

2. submit an assignment as a student from another browser

3. click grade for the top assignment.

This should bring up grading for the student that's just submitted",1,5/7/2013,23/8/2013,49,Bug,Minor,2
MDL-40700,MUC: memcache instance key prefix does not allow numeric values,"When configuring a memcache store, the key prefix field allows the user to submit numbers, and save the changes.
Because the form definition uses ALPHAEXT for this field, the numbers are stripped out silently.
A simple fix is to change the field type to ALPHANUMEXT, and add some form validation.

{code}
diff --git a/cache/stores/memcache/addinstanceform.php b/cache/stores/memcache/addinstanceform.php
index 984966a..29e1239 100644
--- a/cache/stores/memcache/addinstanceform.php
+++ b/cache/stores/memcache/addinstanceform.php
@@ -49,7 +49,7 @@ class cachestore_memcache_addinstance_form extends cachestore_addinstance_form {
         $form->addElement('text', 'prefix', get_string('prefix', 'cachestore_memcache'),
                 array('maxlength' => 5, 'size' => 5));
         $form->addHelpButton('prefix', 'prefix', 'cachestore_memcache');
-        $form->setType('prefix', PARAM_ALPHAEXT);
+        $form->setType('prefix', PARAM_ALPHANUMEXT);
         $form->setDefault('prefix', 'mdl_');
     }
{code}

Is there a reason behind not allowing numeric prefixes? With a 5 character limit, very few sites can use the same memcache servers, and have meaningful key prefixes.",11,17/7/2013,26/7/2013,9,Bug,Minor,5
MDL-40728,Improve UI documentation for tool_uploadcourse,"The documentation of the tool to upload course via CSV should be checked.

- Update inaccurate labels
- Update/add help buttons
- Check for consistency between help button and behaviour
- An error message states ""(don\t use comma-quoted as Moodle does not support it)"", this is wrong!
",20,18/7/2013,15/11/2013,120,Bug,Minor,7
MDL-40803,"Combine hidenav, navpositiontype as nav setting","Combine ""hidenav"" with the new setting ""navpositiontype"" and rename it to ""nav"".
Rename ""Navigation buttons position"" to ""Show Navigation"" and give the following options:
* No
* Under content
* Floating

Remove ""Default"" option. Setting ""From left/top"" as a negative integer will display navigation buttons at the default position (under the TOC).
",1,21/7/2013,22/10/2013,93,Sub-task,Minor,2
MDL-40845,Theme Clean - Fix breadcrumb alignment for RTL,Breadcrumb navigation needs to align right in RTL.,4,24/7/2013,8/9/2013,46,Bug,Minor,3
MDL-40922,Replace add_to_log with an event trigger - mod_folder,"Replace the add_to_log calls for the following area, with a call to the get_legacy_logdata function in the event class.

*mod_folder*
/mod/folder/index.php:36: add_to_log($course->id, 'folder', 'view all', ""index.php?id=$course->id"", '');
/mod/folder/edit.php:66: add_to_log($course->id, 'folder', 'edit', 'edit.php?id='.$cm->id, $folder->id, $cm->id);
/mod/folder/view.php:53: add_to_log($course->id, 'folder', 'view', 'view.php?id='.$cm->id, $folder->id, $cm->id);",14,29/7/2013,10/1/2014,165,Bug,Minor,7
MDL-40933,When filtering user by access date the date fields should specify which field 'is before' and which field 'is after'.,"Since 2.5 the filter form for user by access date is not usable. There are two date fields for each of ther filter selectors First access/Last access and Last modified but no text entry which field defines which filtering.

Solution:
add 'is after' in front of first date field  and 'is before' in front of second date field for each of the selectors. ",8,30/7/2013,8/8/2013,9,Bug,Critical,6
MDL-41045,course_add_cm_to_section should not test for sections unless necessary,"The course_add_cm_to_section has a comment about not using modinfo because it might not be valid. (It clears modinfo, but does not use it directly.) However, it calls course_create_sections_if_missing which does use modinfo.

This causes performance problems if you try to add a cm to a section repeatedly, which I am doing at present; each time it will create modinfo, then clear it. Additionally, presumably there was some reason for not using modinfo in the first place.

I propose that we change course_create_sections_if_missing so that it optionally doesn't use modinfo.

",12,6/8/2013,15/8/2013,9,Bug,Minor,5
MDL-41057,Improve CSS optimisation.,"PHPDoc and coding style clean up on the way.

This issue will also address any unspecified bugs I find along the way.
As the CSS optimiser has been disabled for bootstrap base I'd bet there are some easy fixes in there.",7,7/8/2013,23/8/2013,16,Improvement,Minor,4
MDL-41208,Update YUI to version 3.12.0,YUI needs to be updated to version 3.12.0,23,15/8/2013,27/9/2013,43,Sub-task,Blocker,8
MDL-41212,filemanager and filepicker popup windows rely on non-flexible table layouts and do not cope with small screens,"The content of these panels needs to be rewritten using responsive css.

",4,15/8/2013,19/5/2015,642,Sub-task,Minor,3
MDL-41213,File picker modal layout issues when using clean theme.,"# Log in as any user.
# Visit 'My Profile' -> 'My Private Files'.
# Click to add a file.
# Search for a picture in wikimedia.
# Click to open it.
# Notice the following issues -

Dotted line appears (in master due to MDL-39851), colon appears on the line below 'Choose license', there is no spacing between the label and select box and the select box extends out of the window. See the screenshot attached for demonstration of this.",11,15/8/2013,30/8/2013,15,Bug,Major,6
MDL-41273,Edit PDF: Finish work on comments tool,"Things to do for the comments tool:

Prevent HTML tags from appearing in the comments (maybe switch to a textarea)
Fix incorrect offsets when the page is scrolled.
",2,19/8/2013,6/9/2013,18,New feature,Minor,2
MDL-41290,Improve SCORM user level report,The user level report page isn't great - we should improve it so that you can select different attempts once you are viewing an individual attempt and we should display the data in a more useful manner like the interactions and objectives reports. It should also allow the data to be exported.,20,19/8/2013,13/9/2013,25,Improvement,Minor,6
MDL-41362,Add & remove buttons on several forms misaligned in Clean theme,"Several forms in Moodle have two list either side and two buttons in the middle to add and remove items. Adding users to groups, or adding users to roles are two examples.

Currently the top button has an extra 5px of margin on the left so the buttons are not aligned.

Changing the CSS so that both have margin: auto on the left and right is probably the best way forward.

",8,21/8/2013,23/1/2014,155,Bug,Major,6
MDL-41459,POLICY: Make Clean theme the default for Moodle 2.7,If clean is to be the default theme for 2.7 we should collect all the outstanding fixes required and make a push to get it ready. ,4,28/8/2013,18/3/2014,202,Task,Major,3
MDL-41476,SCORM - increase 1.2 datamodel lengths,"SCORM 1.2 spec states that suspend_data should be no more than 4096 characters - problem is that many SCORM authoring tools create packages that go over this limit and fail in various ways. (SCORM 2004 spec allows a higher number of chars)

People have previously published their packages as SCORM 2004 to get around this limit but as we are no longer continuing to develop SCORM 2004 in Moodle I think it would be useful to add a setting for people to allow 1.2 packages to store more data.

We also enforce 1.2 limits on other areas like student response:
https://moodle.org/mod/forum/discuss.php?d=216092

I'd like to add an admin level setting ""SCORM 1.2 standards mode"" that is enabled by default (eg compliant with the standard) - if people want to allow their packages to break the standard they can untick the box. - unticking this box would increase the CMIString4096 and CMIString256 in mod/scorm/datamodels/scorm_12.js.php to a higher value.",22,29/8/2013,11/4/2014,225,New feature,Major,8
MDL-41528,LDAP Enrolment course creation default settings,"When not using a course as a template for new LDAP courses enable completion tracking is missing

In addition groupmodeforce is set twice.



",7,1/9/2013,13/9/2013,12,Bug,Minor,6
MDL-41541,Edit PDF: test_gs_path is broken,"Ghostscript is installed but however it returns this error when testing the path in the admin:
Unable to generate image - details: Command:/usr/bin/gs -q -sDEVICE=png16m -dSAFER -dBATCH -dNOPAUSE -r100 -dFirstPage=2 -dLastPage=2 -dGraphicsAlphaBits=4 -dTextAlphaBits=4 -sOutputFile=""/home/nginx/localhost/moodles/integration_master_pdf/moodledata/temp/assignfeedback_editpdf_test/image_page1.png"" ""/home/nginx/localhost/moodles/integration_master_pdf/moodle/mod/assign/feedback/editpdf/tests/fixtures/testgs.pdf""
Result: No pages will be processed (FirstPage > LastPage).
",3,2/9/2013,5/9/2013,3,Bug,Minor,2
MDL-41665,Convert hard coded HTML to use html_writer in Scorm,Notice the following issue while reviewing MDL-41612.,28,9/9/2013,6/6/2014,270,Improvement,Minor,9
MDL-41708,Attachment display for forums reversed,"When attaching files to a forum post they appear in the editor in the order uploaded, however when displayed they are ordered by timemodified, which has the effect of having the display order the reverse of the order in the editor.
My tutors use case is that they are uploading a sequence of images but when displayed they are in reverse order. The workaround is of course to uploaded them in reverse.",9,11/9/2013,6/6/2014,268,Improvement,Minor,8
MDL-41733,Allow direct authentication with CAS to a course when multiple authentication is activated,"In the portal of our University a student can connect directly to is course.
Both the portal and Moodle use the same authentication, CAS.

The problem is when we activate the Multi-authentication parameters on the CAS server configuration page, the CAS connected users from the portal are always prompted to choose their authentication method. Since they are already connected, we want to force the CAS auth.

We can choose the auth method from the login url, ex:
https://mymoodle.myuniversity.com/login/index.php?authCAS=CAS

it should be nice to have the same for courses ex:
https://mymoodle.myuniversity.com/course/view.php?id=12345&authCAS=CAS

After checked in the code, this way needed to modify the code at others place than the CAS auth module so since, its a CAS specific customization, I think we should only modify the code in the auth/CAS/auth.php file.

So the possible result will look like this:
https://mymoodle.myuniversity.com/login/index.php?authCAS=CAS&courseid=12345

I'll share the modification when finished.",12,11/9/2013,27/9/2013,16,Improvement,Minor,6
MDL-41778,LDAP Enrolment - Allow update of course fields during sync,"During LDAP sync allow to update course shortname, fullname, summary from LDAP server (optionally).

Add an ""update during sync"" option to each of the above course fields in enrol/ldap config.",11,13/9/2013,27/9/2013,14,Improvement,Minor,5
MDL-41792,The calendar itself should display dates depending on the calendar type used,"With the introduction of MDL-18375 we need the calendar to display the dates in the format defined by the calendar type being used, not just Gregorian.",39,15/9/2013,11/10/2013,26,New feature,Minor,10
MDL-41800,EditPDF: Add comments quicklist,Add the comments quicklist + searching interface.,2,16/9/2013,18/9/2013,2,Improvement,Minor,1
MDL-41829,Translation error in the international Spanish package,"Using Google Translate. Sorry.

In the file ""lesson.php"" and the string ""progresscompleted"" with the identifier ""mod_lesson"" shows:

   You have reached your {$ a]% of this lesson

You should see a key instead of a bracket: {$ a]% NO {$ a}% YES

   You have reached your {$ a}% of this lesson

Thank you.

---
Espa√±ol:

En el archivo ""lesson.php"" y en la cadena ""progresscompleted"" con el identificador ""mod_lesson"" aparece lo siguiente:

Ha alcanzado el {$a]% de esta lecci√≥n

Deber√≠a aparecer una llave en vez de un corchete:

Ha alcanzado el {$a}% de esta lecci√≥n

Gracias.",3,17/9/2013,17/9/2013,0,Bug,Minor,2
MDL-42143,assignfeedback_editpdf/gspath should be admin_setting_configexecutable,This admin setting variant will do better checking of the path/executable status,5,4/10/2013,11/10/2013,7,Bug,Minor,5
MDL-42231,"LDAP, CAS data mapping for custom user fields string error when field shortname ends in number","MDL-16982 added the ability to data map LDAP and CAS authentication methods to custom user fields.  When testing this, I found that entering a number at the end of the shortname for any of the custom field types resulted in a string error on data mapping page.  

See attached image.  Each field types shortname ends in a number causing the string error.",10,9/10/2013,21/8/2014,316,Bug,Major,6
MDL-42269,Review all new events introduced in 2.6dev,"Events are not supposed to change between releases, we need to verify following:
* event names are standardised
* event structure is ok
* there are tests for all events
* events are trigger at the right places with correct parameters
",4,11/10/2013,4/11/2013,24,Task,Blocker,2
MDL-42310,"Feedback checkboxes, radio buttons and dropdown input controls are not processed through text filter","The contents of the checkboxes, radio buttons and dropdown input controls are not processed through Moodles format_text() or format_string() filters. As a result, things like multilang filtering is not applied to these fields. This is inconsistent with the field captions and other text displayed by this plugin which appear to all be processed by the format_string() function.

This issue appears in the multichoice and multichoicerated type of controls.",34,12/10/2013,10/1/2014,90,Bug,Minor,7
MDL-42343,"Deprecated warning, in maketestplan","Follow the testing instructions of MDL-42198, no warning should be generated.

However the following is generated:-

{code}
++ session_set_user() is deprecated, use \core\session\manager::set_user() instead ++
* line 131 of /lib/deprecatedlib.php: call to debugging()
* line 97 of /admin/tool/generator/cli/maketestplan.php: call to session_set_user()
{code}",11,15/10/2013,25/10/2013,10,Bug,Minor,5
MDL-42414,One more time() random failure: test_increment_revision_number,"This is a follow-up of MDL-41935 that is already integrated and tested.

A new random failure has been reported recently:

{code}
core_datalib_testcase::test_increment_revision_number
Failed asserting that '1381999791' is equal to 1381999792 or is greater than 1381999792.

/var/lib/jenkins/git_repositories/master/lib/tests/datalib_test.php:335
/var/lib/jenkins/git_repositories/master/lib/phpunit/classes/advanced_testcase.php:80
{code}

This is about to fix those assertions by using the new assertTimeCurrent() or, at least, move the time() calls to early in the test, so random second jumps don't happen in the middle.",6,17/10/2013,25/10/2013,8,Bug,Minor,5
MDL-42548,Quiz displays grade for a never-submitted attempt as 'Attempt still in progress',See https://moodle.org/mod/forum/discuss.php?d=243951,6,26/10/2013,8/11/2013,13,Bug,Minor,5
MDL-42555,invalid moodle_url in many events,"moodle_url needs ""\"" prefix when used from other namespaces...",6,27/10/2013,1/11/2013,5,Sub-task,Major,2
MDL-42564,Revised icons for course page to match others in 2.6,"* new:
** spinner
* resized:
** group icons
* menu icon (for dropdown without text)",12,28/10/2013,15/11/2013,18,Bug,Blocker,6
MDL-42589,File picker is blank in IE9+,This is a regression caused by MDL-42340,11,29/10/2013,1/11/2013,3,Bug,Blocker,7
MDL-42703,Getting course sort order fails under MSSQL,"The following error is reported when running unit tests under MSSQL...

{noformat}
2) core_course_courselib_testcase::test_course_change_sortorder_after_course
dml_write_exception: Error writing to database (SQLState: 42000<br>
Error Code: 102<br>
Message: [Microsoft][SQL Server Native Client 11.0][SQL Server]Incorrect syntax
near 'c'.<br>

UPDATE phpu_course c
                       SET sortorder = sortorder + 1
                     WHERE c.category = '2'
                       AND sortorder > '20003'
[array (
  0 => '2',
  1 => '20003',
)])

D:\xampp\htdocs\master_integration\lib\dml\moodle_database.php:444
D:\xampp\htdocs\master_integration\lib\dml\sqlsrv_native_moodle_database.php:245

D:\xampp\htdocs\master_integration\lib\dml\sqlsrv_native_moodle_database.php:352

D:\xampp\htdocs\master_integration\lib\dml\sqlsrv_native_moodle_database.php:743

D:\xampp\htdocs\master_integration\course\lib.php:3469
D:\xampp\htdocs\master_integration\course\tests\courselib_test.php:2241
D:\xampp\htdocs\master_integration\lib\phpunit\classes\advanced_testcase.php:80

To re-run:
 \xampp\php\phpunit core_course_courselib_testcase course\tests\courselib_test.php
{noformat}

In the function course_change_sortorder_after_course() there are a number of raw DB calls (I'm not sure why this was allowed). In each of the queries an alias is used for the table, however MSSQL seems to dislike this alias syntactically. As there is only a single table involved in each query the alias is not needed and can be removed. When it is removed, the queries work in MSSQL.",7,5/11/2013,15/11/2013,10,Bug,Blocker,5
MDL-42728,Import fixed English strings (en_fix) into the main English pack,"As a part of regular release process, en_fix pack from AMOS should be merged into the core English language ",11,6/11/2013,8/11/2013,2,Task,Minor,5
MDL-42884,Can not delete users with invalid emails,"The given username contains invalid characters

More information about this error
Debug info:
Error code: invalidusername
Stack trace:

    line 113 of /user/lib.php: moodle_exception thrown
    line 4213 of /lib/moodlelib.php: call to user_update_user()
    line 84 of /admin/user.php: call to delete_user()",13,14/11/2013,22/11/2013,8,Bug,Critical,6
MDL-43011,SCORM player 'embedded' layout,"Relates to https://tracker.moodle.org/browse/MDL-41696

We'd like to modify the SCORM player page to be displayable without header/footer for viewing in the Mobile app.

The page already accepts a display mode argument, but ignores it unless it's set to 'popup'. We'd like it react accordingly to a display mode of 'embedded' too.

if ($displaymode == 'embedded) { $PAGE->set_pagelayout('embedded') }",47,21/11/2013,11/4/2014,141,Improvement,Minor,11
MDL-43033,Newly created category does not appear when memcached cachestore is used,"To reproduce with Moodle 2.6 latest weekly build:

- add a memcache store instance (either memcached or memcache)
- map Application to it
- save the config
- click on Site Administration - > Manage courses and categories
- in the Course and category management page click on 'Create new category'
- edit category and save it
- the page 'Course and category management' does not show the newly created category

If memcache store is disabled (just remapping 'Application' to default store) the newly created category with the above described procedure appears correclty

Test has been done using both memcache and memcached cache store with local memcached daemon (127.0.0.1) or networked memcached deaemon running on a memcache server. In all cases the problem is reproducible. 

Workaround: purge caches


",10,23/11/2013,5/12/2013,12,Bug,Critical,7
MDL-43093,Update repeat_elements PHPdoc,There are several things that can be set in the options that are not documented.,7,27/11/2013,5/12/2013,8,Bug,Minor,5
MDL-43218,Link to blogs appears even when blogs not enabled,"_Steps to reproduce_

# Click Site Admin > Advanced Features
# Uncheck ""Enable Blogs""
# Create a course
# Enrol the admin user
# Enter the course
# Click Navigation > Current Course > Course Name > Participants

_What should happen_

There should be no link to ""Course blogs""

_What happens_

There is a link to ""Course blogs"". Clicking it gives an error:

Blogging is disabled!

More information about this error

Debug info: 
Error code: blogdisable
Stack trace:
line 463 of /lib/setuplib.php: moodle_exception thrown
line 38 of /blog/index.php: call to print_error()
",14,5/12/2013,13/12/2013,8,Bug,Minor,7
MDL-43369,error in question item stats,There is an error in the code that calculates stats for subquestions (a randomly selected question). All the stats calculations should be calculated over just the attempts where the sub question appears but the code uses the average of total grades over all attempts at the question in covariance and variance calculations. ,10,13/12/2013,7/2/2014,56,Bug,Minor,7
MDL-43394,"Behat checkbox controller ""clicks"" instead of ""checks""","I discovered this while writing Behat tests for MDL-40241.

No matter what I did I could not get the following to work

{code}
 And I set the following administration settings values:
    | Enable completion tracking | 1 |
 And I log out
{code}

I'd always get the error:
{code}
      Exception thrown by (//html//*[self::input | self::textarea | self::select][not(./@type = 'submit' or ./@type = 'image' or ./@type = 'hidden')][@id=//label[contains(normalize-space(.), 'Enable completion tracking')]/@for])[1]
      Unable to submit on a ""input"" tag.
{code}

Digging around in the code I think I found the correct fix",5,16/12/2013,10/1/2014,25,Bug,Minor,5
MDL-43439,Behat - add an option to take screenshots on failure,Sooooooo good for phantomjs.,21,18/12/2013,17/1/2014,30,Improvement,Major,4
MDL-43511,question bank should not store references to MUC cache,"MUC cache instances are cached internally, developers are expected to not store references to the cache returned from cache::make() because it breaks some types of MUC resets and probably when using different $identifiers parameter.

I discovered this the hard way when hacking MUC in phpunit, the questions tests started breaking badly because of the $this->cache = cache::make('core', 'questiondata'); in question/engine/bank.php

I was bitten by similar problem previously in dml drivers too...",5,29/12/2013,17/1/2014,19,Bug,Minor,5
MDL-43604,add support for MariaDB 10.x,"It looks like they decided to hack version numbers in future MariaDB release, my moodle tells me now that ""5.5.5-10.0.7-MariaDB"" is not high enough...

Solution is to do some stripping of extra rubbish in our mariadb driver...",27,8/1/2014,20/3/2014,71,Improvement,Major,9
MDL-43641,Some moodle dialogs are positioned on not centred when they shoudl be,"When you click the cancel link during the backup or the restore steps it appears a modal dialog to confirm that you want to cancel the process; it used to be located in the center of the screen and now it is appearing in the top-left corner.

I've reproduced it using chrome and firefox, in 26 and master stable and integration.",10,10/1/2014,14/2/2014,35,Bug,Minor,7
MDL-43785,Syntax Error instead of session timeout warning from AJAX_SCRIPT renderer,"I was opening the ""Site Administration"" disclosure triangle (within the docked Administration block) from a page that I had left open yesterday (so session was expired).",32,21/1/2014,31/7/2015,556,Bug,Minor,8
MDL-43838,"When bootstrap window is small the login link isn't available, crippling behat tests","Steps to reproduce (I did this in chrome)

* Force theme to clean in config.php
* When tests are running resize your browser window so that the login/username link in top right disappears and instead you get the 'hamburger icon' (in my environment this was only 1000px)
* Note that next time behat tries to login or logout, behat is stuck.. it can't find the login link and the steps fail.

Its actually not that wide a window required - I noticed this problem because my browser window opened at a size that caused all the steps to fail.",17,24/1/2014,14/2/2014,21,Bug,Minor,8
MDL-43884,$DB->get_tables() returns empty array for external databases.,"For external databases we pass $db->prefix as false while connecting, where as in get_tables() we have the following check:-
{code}
if ($this->prefix !== '')
{code}

This results in empty result as the above condition is never met and the driver considers $prefix to be a valid prefix.

I have noticed this in PGSQL, but this could be a bug with other drivers too.",8,28/1/2014,7/2/2014,10,Bug,Minor,6
MDL-43898,Unable to reposition blocks on mod/lesson/continue.php page,"When on the mod/lesson/continue.php page, any attempt to change the position of a block through the block configuration page using the Region setting will fail.

This is because the database record in mdl_block_positions is set to a page type of ""mod-lesson-view"", when the page context when visiting the page is ""mod-lesson-continue""

This error is caused by line 172 of mod/lesson/continue.php

$PAGE->set_url('/mod/lesson/view.php', array('id' => $cm->id, 'pageid' => $page->id));

I'm guessing that the reason for this line is to prevent a user being redirected back to this page after login.

In order to have a page context that is the same as this URL setting, I propose changing the page context on continue.php to ""mod-lesson-view"".  This fixes the above problem.",14,29/1/2014,16/1/2015,352,Bug,Minor,8
MDL-43966,Write transition guide for events and logging,"A docs page for developers is needed to describe how to replace the current use of add_to_log() with event triggers.

http://docs.moodle.org/dev/Migrating_logging_calls_in_plugins",26,4/2/2014,14/3/2014,38,Task,Major,10
MDL-44027,"Group autogroup passes ""xx"" as the attributes for a button","I'm assuming this is just a typo, or a placeholder that someone forgot.

https://github.com/moodle/moodle/blob/master/group/autogroup_form.php#L138

The 'xx' at the end should either be an array of html attributes, or a string containing the same (e.g. ""class=something"").

In this case I think it can just be deleted.
",6,7/2/2014,23/5/2014,105,Bug,Minor,7
MDL-44063,Atto should start new content in a paragraph tag by default.,"Currently, Atto does not insert anything in an empty text area, this works OK - but browsers will use divs by default, it would be better to make the default a paragraph (more semantic).

We can do this easily by inserting <p></p> in init if there is no text and removing <p></p> on clean_html if it is the only thing in the div.
",10,10/2/2014,10/3/2014,28,Bug,Blocker,4
MDL-44079,Pressing escape in nested modal dialogues should only close the top dialogue,"If you open a filepicker, search for and preview a file, then press escape, all modals are closed instead of just the top one.",12,11/2/2014,21/2/2014,10,Bug,Minor,7
MDL-44083,Atto has wrong icons for screenreader helper and accessibility checker,"There is no existing useful icon for these things.

Suggestions:

Accessibility checker:
http://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Gnome-preferences-desktop-accessibility2.svg/40px-Gnome-preferences-desktop-accessibility2.svg.png

Screenreader:
http://html.orange-idea.com/valera-wp/wp-content/themes/valera/assets/img/plus.png
",9,11/2/2014,11/3/2014,28,Bug,Critical,6
MDL-44095,theme notes refer to core_maintenance_renderer not core_renderer_maintenance,"This file:

https://github.com/moodle/moodle/blob/master/theme/upgrade.txt

has several references to core_maintenance_renderer:

* core_maintenance_renderer::block
* core_maintenance_renderer::blocks
* core_maintenance_renderer::blocks_for_regions
* core_maintenance_renderer::course_header
* core_maintenance_renderer::course_footer
* core_maintenance_renderer::course_content_header
* core_maintenance_renderer::course_content_footer
* core_maintenance_renderer::custom_menu
* core_maintenance_renderer::file_picker
* core_maintenance_renderer::htmllize_file_tree
* core_maintenance_renderer::lang_menu
* core_maintenance_renderer::login_info
* core_maintenance_renderer::user_picture

but it's actually core_renderer_maintenance, which confused me when I was searching for it.",19,12/2/2014,14/3/2014,30,Bug,Minor,8
MDL-44148,portfolio_plugin_base::set_user_config doesn't return a value; erroneous error message on user option save,"As per topic; set_user_config (lib/portfolio/plugin.php:604) doesn't have a codepath that returns a value, as far as I can see. In three out of the four places it's called in base Moodle 2.6.1 the return value isn't actually used, but it *is* expected and used in one, with unfortunate consequences - if a portfolio plugin is user-configurable, an instancenotsaved error message is thrown when saving configuration data despite db writes succeeding.

REPRODUCTION STEPS:
- Install a user-configurable portfolio plugin, e.g. https://github.com/jethac/moodle-wordpress-publish
- Enable portfolios, and set up an instance of your plugin.
- As a regular user, attempt to configure your portfolio (Administration -> My profile settings -> Portfolios -> Configure; click the wrench next to the name of your plugin).
- Submit a save request.

WHAT I EXPECTED:
I expected to see a ""Portfolio saved successfully"" message, and then to be redirected back to Administration -> My profile settings -> Portfolios -> Configure

WHAT ACTUALLY HAPPENS:
The data submitted is successfully saved / updated in the database (I used pgAdmin to inspect), but an erroneous instancenotsaved message is displayed.",17,14/2/2014,20/3/2014,34,Bug,Minor,5
MDL-44168,remove border=1 from device detection regex table,"There's a border=1 set on the device detection regex table in admin -> theme settings:

/moodle/admin/settings.php?section=themesettings

This isn't usually visible because Moodle includes YUI CSS that add a border to every single td and th, and then Moodle CSS fixes that by including CSS that removes borders from every single td and th.

The Bootstrapbase/Clean theme doesn't use the YUI CSS, and has removed the workaround that removes all borders from tables (in order to fix MDL-27774) and now you get the border=1 on this table showing through again.

When looking at this I noticed that the code to write out this table has a another bug. Normally the first row has r0 and r1 alternating, while each cell is c0, then c1, then c2 etc. This code adds c0 to each cell on the first row, c1 to each cell on the second row, c2 on each cell on the third row etc.

I don't know if it's worth messing with, I don't think it has any actual effect, but I thought I'd note it anyway.",14,14/2/2014,28/2/2014,14,Bug,Minor,6
MDL-44193,Afterburner - unify @package and improve coding style.,This issue tracks improving coding style and unifying @package use in the Afterburner theme.,4,17/2/2014,21/2/2014,4,Sub-task,Trivial,3
MDL-44228,Atto: Being able to see the list of plugins available in the settings UI,"Being able to see the list of plugins available in the settings UI. See TinyMCE for an example.
",6,17/2/2014,28/2/2014,11,Bug,Blocker,4
MDL-44304,"Trainer can not access grading view (ERROR: null value in column ""attemptnumber"" violates not-null constraint)","One of our trainers can not access to the assignment submission when he uses ""action=grading"". And even administrators get the same error!

I didn't searched on this issue until now, but hopefully I can do it later on. It's just weird, that moodle tries to insert a record just by viewing an assignment...

{code:title=Debug info}
ERROR: null value in column ""attemptnumber"" violates not-null constraint
INSERT INTO assign_grades (assignment,userid,timecreated,timemodified,grade,grader,attemptnumber) VALUES($1,$2,$3,$4,$5,$6,$7) RETURNING id
[array (
   'assignment' => '590',
   'userid' => '223',
   'timecreated' => 1392977454,
   'timemodified' => 1392977454,
   'grade' => -1,
   'grader' => '2',
   'attemptnumber' => NULL,
)]
{code}
{code:title=Error code}
dmlwriteexception
{code}
{code:title=Stack trace}
line 444 of /lib/dml/moodle_database.php: dml_write_exception thrown
line 239 of /lib/dml/pgsql_native_moodle_database.php: call to moodle_database->query_end()
line 848 of /lib/dml/pgsql_native_moodle_database.php: call to pgsql_native_moodle_database->query_end()
line 900 of /lib/dml/pgsql_native_moodle_database.php: call to pgsql_native_moodle_database->insert_record_raw()
line 2660 of /mod/assign/locallib.php: call to pgsql_native_moodle_database->insert_record()
line 588 of /mod/assign/feedback/editpdf/classes/document_services.php: call to assign->get_user_grade()
line 66 of /mod/assign/feedback/editpdf/locallib.php: call to assignfeedback_editpdf\document_services::get_feedback_document()
line 225 of /mod/assign/feedback/editpdf/locallib.php: call to assign_feedback_editpdf->get_widget()
line 205 of /mod/assign/feedback/editpdf/locallib.php: call to assign_feedback_editpdf->view()
line 1097 of /mod/assign/gradingtable.php: call to assign_feedback_editpdf->view_summary()
line 1206 of /mod/assign/gradingtable.php: call to assign_grading_table->format_plugin_summary_with_link()
line 729 of /lib/tablelib.php: call to assign_grading_table->other_cols()
line 433 of /mod/assign/gradingtable.php: call to flexible_table->format_row()
line 1330 of /lib/tablelib.php: call to assign_grading_table->format_row()
line 1442 of /lib/tablelib.php: call to table_sql->build_table()
line 1185 of /mod/assign/renderer.php: call to table_sql->out()
line 981 of /mod/assign/renderer.php: call to mod_assign_renderer->flexible_table()
line 221 of /lib/outputrenderers.php: call to mod_assign_renderer->render_assign_grading_table()
line 3068 of /mod/assign/locallib.php: call to plugin_renderer_base->render()
line 3107 of /mod/assign/locallib.php: call to assign->view_grading_table()
line 505 of /mod/assign/locallib.php: call to assign->view_grading_page()
line 53 of /mod/assign/view.php: call to assign->view()
{code}",33,21/2/2014,12/9/2014,203,Bug,Major,12
MDL-44339,phpunit does not fail on unexpected debugging,"how to reproduce:

insert in the first test in mod/forum/tests/events_test.php :
{code}
debugging('Debugging message should be an error!', DEBUG_DEVELOPER);
{code}

and then run:

{code}
vendor/bin/phpunit --stop-on-error --stop-on-failure --stop-on-incomplete mod_forum_events_testcase mod/forum/tests/events_test.php
{code}

It does not stop, in fact it finishes with ""OK"" but displays debugging backtrace in the middle of the test.",10,25/2/2014,20/3/2014,23,New feature,Major,6
MDL-44377,dmlreadexception when installing on MSSQL without table prefix,"The following exception occurs when using the web installer, configured with MSSQL without a table prefix.  I believe the issue is because ""User"" is a reserved word in MSSQL and must be escaped (if that is the proper way to say it) using square brackets: [User].

{code}
Message: [Microsoft][SQL Server Native Client 11.0][SQL Server]Incorrect syntax near the keyword 'user'.<br>

SELECT TOP 1 'x' FROM user 
[array (
)] 
Error code: dmlreadexception
{code}

I was able to work around this by: dumping the database, updating the config.php file to include a table prefix, and re-installing.",9,26/2/2014,7/3/2014,9,Bug,Minor,6
MDL-44507,Filemanager download all indicator and repeated click supression,"When there is a large amount files the filemanager can take a while to create the zip file when ""download all"" is clicked.  Since it uses an AJAX request to get the file the user sees no indicator that anything is happening.  If they click ""download all"" repeatedly the server performance can drop severely.

The improvement is to display a loading icon next to the download all button when it is clicked and hide the icon once the download has started.  While the loading icon is visible the download all button is essentially disabled.",8,8/3/2014,11/4/2014,34,Improvement,Minor,4
MDL-44599,undeprecate SITEID constant,"The original idea was to allow changing of $SITE global on the fly in multitenant installations, but that project failed and over the time with more and more changes that are fundamentally incompatible with the original multitenant design there is no valid reason to force this migration away from SITEID.

Note: there are 533 instances of SITEID in current master...",6,13/3/2014,20/3/2014,7,Task,Minor,6
MDL-44725,Condition availability: Replace groupmembersonly,"The groupmembersonly system is not necessary once MDL-44070 lands. The availability system in MDL-44070 can provide all the features of groupmembersonly, but with more functionality. 

We have decided not to implement it until the following version, in order to reduce the number of places in the code that are changed (and corresponding risk) for MDL-44070.

Version should be 2.8

",54,22/3/2014,5/9/2014,167,Task,Critical,12
MDL-44780,Enable MathJax filter by default,For new installs. Not sure about upgrades (you don't want 2 tex filters and you don't really know which other filters handle tex).,36,26/3/2014,3/5/2014,38,Bug,Major,10
MDL-44782,Fix lang string for Mathjax filter setting HTTP (Should be HTTPS),What is says,2,26/3/2014,3/4/2014,8,Bug,Critical,2
MDL-44835,"POLICY: Integration testing in 2.7+ should be done on ""base"" theme directly using ?theme=base","(Rewritten to reflect decision)

In MDL-43784 we removed all the themes based on base in 2.7, which means we can't use standard.

In Moodle 2.7 and later, we will code that affects UI with:
# Clean, and 
# Base

Developers and testers can select these themes directly in the URL via ?theme=base or ?theme=clean 

MDLQA testing will not require every issue in 2.7 and later to be re-tested on both themes.  We'll use Clean for all them.   However, we'll also have at least one test that calls for exploratory testing on Moodle using Base theme just to catch any obvious regressions (such as MDL-44844 for example).",17,28/3/2014,3/4/2014,6,Bug,Blocker,6
MDL-44962,Tags inside HTML wiki headers cause invalidsection error from edit link,"In an HTML page, if you have any html the header, clicking on the edit link will result in a ""invalidsection"" error, instead of showing the edit page for that section.

The main edit tab at the top works fine, the [edit] tags at the right edge of wiki sections fail.",27,5/4/2014,31/7/2015,482,Bug,Minor,9
MDL-44977,"Non JS behat fails, if xhprof is enabled.","If xhprof is enabled, running non-js behat and going to ""site administration"" fails behat as it expects xhprof settings to be set.",10,7/4/2014,18/4/2014,11,Bug,Minor,7
MDL-44998,Review indexes in standard log table,All our reports should use good indexed queries,12,9/4/2014,18/4/2014,9,Bug,Critical,7
MDL-45045,Fake blocks show DND empty region when editing and clicked on.,"Initially reported in my contributed theme 'Shoehorn' in the theme forum post: https://moodle.org/mod/forum/discuss.php?d=257579#p1119021 - it appears that when editing is on and you are using a fake block and click on it then the block JS causes the empty side-post area to show as a drop target (given that side-post is initially empty).

This is odd as the fake block cannot be moved and attempting to click on a navigation link (in either the book or lesson modules) does not result in a clear navigation action but rather the content size changing.",14,11/4/2014,23/4/2014,12,Bug,Minor,6
MDL-45062,Description of method result value for update_grades_return is invalid,"It should return just an external value, currently is returning a single structure

Unit tests works since the function is called directly without the ws wrapper that checks for correct input/output values

The easy way to ix that is to change the result format for that function",8,12/4/2014,18/4/2014,6,Bug,Critical,6
MDL-45170,Can not paste images from one wsyiwyg window to another,"If you copy/cut text and images from one wysiwyg editor window to another, it appears to work for a short period of time but then subsequently returns a broken image.

In the first wysiwyg window, you see an image file uri with draftfile.php. When you paste this into the other wysiwyg, you see the same uri. Upon saving them, the wysiwyg you copied from converts to a working pluginfile.php uri and the one you pasted to becomes a brokenfile.php. This happens in any wysiwyg editors. It behaves the same in ATTO and TinyMCE. It is not limited to an activity or module.

# Add a label in to course.
# In the wysiwyg editor, type some text and upload a new image to be show in that label.
# Copy the text and image from the wysiwyg editor.
# Save the label and return to course.
# Create a new label in the course.
# Paste into the wysiwyg.
# Save and return to course.

Returns a broken file, even though the wysiwyg showed the image correctly.

Ideally, this would add the image properly.",35,19/4/2014,11/8/2018,1575,Improvement,Minor,11
MDL-45336,Core_question uses strings from quiz,"While testing how quiz may affect other modules (related to MDL-45273) I decided to uninstall mod_quiz and run behat tests.
Apparently it's not that easy because several modules and even core_question use strings from quiz. This is not good for modularity in [M]oodle",28,30/4/2014,26/9/2014,149,Bug,Minor,7
MDL-45383,Generator exeption in behat test,"Only in 2.5 when running behat with only tag @block_activity_modules I get debugging:
{code}
Course cache integrity check failed: course module with id 2 does not have context. Rebuilding cache for course 1 ++
* line 307 of /lib/modinfolib.php: call to debugging()
* line 1429 of /lib/modinfolib.php: call to course_modinfo->__construct()
* line 1308 of /course/lib.php: call to get_fast_modinfo()
* line 1364 of /course/lib.php: call to course_create_sections_if_missing()
* line 106 of /lib/testing/generator/module_generator.php: call to course_add_cm_to_section()
* line 77 of /mod/assign/tests/generator/lib.php: call to testing_module_generator->precreate_course_module()
* line 415 of /lib/testing/generator/data_generator.php: call to mod_assign_generator->create_instance()
* line 261 of /lib/tests/behat/behat_data_generators.php: call to testing_data_generator->create_module()
* line 217 of /lib/tests/behat/behat_data_generators.php: call to behat_data_generators->process_activity()
* line ? of unknownfile: call to behat_data_generators->the_following_exists()
* line 155 of /vendor/behat/behat/src/Behat/Behat/Definition/Annotation/Definition.php: call to call_user_func_array()
* line 194 of /vendor/moodlehq/behat-extension/src/Moodle/BehatExtension/Tester/MoodleStepTester.php: call to Behat\Behat\Definition\Annotation\Definition->run()
* line 126 of /vendor/behat/behat/src/Behat/Behat/Tester/StepTester.php: call to Moodle\BehatExtension\Tester\MoodleStepTester->executeStepDefinition()
* line 151 of /vendor/moodlehq/behat-extension/src/Moodle/BehatExtension/Tester/MoodleStepTester.php: call to Behat\Behat\Tester\StepTester->executeStep()
* line 127 of /vendor/moodlehq/behat-extension/src/Moodle/BehatExtension/Tester/MoodleStepTester.php: call to Moodle\BehatExtension\Tester\MoodleStepTester->executeStep()
* line 42 of /vendor/behat/gherkin/src/Behat/Gherkin/Node/AbstractNode.php: call to Moodle\BehatExtension\Tester\MoodleStepTester->visit()
* line 148 of /vendor/behat/behat/src/Behat/Behat/Tester/ScenarioTester.php: call to Behat\Gherkin\Node\AbstractNode->accept()
* line 87 of /vendor/behat/behat/src/Behat/Behat/Tester/ScenarioTester.php: call to Behat\Behat\Tester\ScenarioTester->visitStep()
* line 42 of /vendor/behat/gherkin/src/Behat/Gherkin/Node/AbstractNode.php: call to Behat\Behat\Tester\ScenarioTester->visit()
* line 88 of /vendor/behat/behat/src/Behat/Behat/Tester/FeatureTester.php: call to Behat\Gherkin\Node\AbstractNode->accept()
* line 42 of /vendor/behat/gherkin/src/Behat/Gherkin/Node/AbstractNode.php: call to Behat\Behat\Tester\FeatureTester->visit()
* line 150 of /vendor/behat/behat/src/Behat/Behat/Console/Command/BehatCommand.php: call to Behat\Gherkin\Node\AbstractNode->accept()
* line 128 of /vendor/behat/behat/src/Behat/Behat/Console/Command/BehatCommand.php: call to Behat\Behat\Console\Command\BehatCommand->runFeatures()
* line 242 of /vendor/symfony/console/Symfony/Component/Console/Command/Command.php: call to Behat\Behat\Console\Command\BehatCommand->execute()
* line 200 of /vendor/symfony/console/Symfony/Component/Console/Application.php: call to Symfony\Component\Console\Command\Command->run()
* line 68 of /vendor/behat/behat/src/Behat/Behat/Console/BehatApplication.php: call to Symfony\Component\Console\Application->doRun()
* line 106 of /vendor/symfony/console/Symfony/Component/Console/Application.php: call to Behat\Behat\Console\BehatApplication->doRun()
* line 32 of /vendor/behat/behat/bin/behat: call to Symfony\Component\Console\Application->run()
{code}

This looks related to MDL-45287 though not sure how",9,2/5/2014,7/5/2014,5,Bug,Minor,4
MDL-45395,PHP-OLE is GPL-incompatible,"We removed it in MDL-42381..

But as reported by Debian, we have another instance in lib/phpexcel/PHPExcel/Shared/OLE*

https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=746594

Note that in http://docs.moodle.org/dev/Moodle_libraries_credits#PEAR_OLE_Classes

It's specified that an 'exception' was made for Moodle. That implies relicensing and is all bit hazy. If we don't need it we should get rid of it..",10,3/5/2014,20/6/2014,48,Bug,Blocker,7
MDL-45447,Atto: Highlight toggled buttons collapse and html,"I think it makes sense then when those buttons are toggled they are highlighted, to emphasise that they are.",8,8/5/2014,23/5/2014,15,Bug,Minor,6
MDL-45500,It is not possible to uninstall grading methods plugins,"Advanced grading methods cannot be uninstalled from Moodle using the Manage Plugins UI. If you install one from the plugins DB, there is no way to uninstall it.

To reproduce install the checklist grading form (https://moodle.org/plugins/pluginversions.php?plugin=gradingform_checklist) and then navigate to Site Administration > Plugins> plugin overview and there will not be an uninstall link.
",23,11/5/2014,15/12/2017,1314,Bug,Major,10
MDL-45562,Editing external blog throws exception,"Register an external blog.
Click on ""edit cog"", change something and try to save.

Reproduced on 2.7, pretty sure the same will be in previous versions

{code}
Invalid user

More information about this error
Debug info: SELECT id FROM {user} WHERE id IS NULL AND deleted = ?
[array (
0 => 0,
)]
Error code: invaliduser
Stack trace:

    line 1451 of /lib/dml/moodle_database.php: dml_missing_record_exception thrown
    line 1427 of /lib/dml/moodle_database.php: call to moodle_database->get_record_select()
    line 6404 of /lib/accesslib.php: call to moodle_database->get_record()
    line 107 of /blog/external_blog_edit.php: call to context_user::instance()

Output buffer: <br /> <b>Notice</b>: Undefined property: stdClass::$filtertags in <b>/home/marina/repositories/int_master/moodle/blog/external_blog_edit.php</b> on line <b>102</b><br /> <br /> <b>Notice</b>: Undefined variable: newexternal in <b>/home/marina/repositories/int_master/moodle/blog/external_blog_edit.php</b> on line <b>107</b><br /> <br /> <b>Notice</b>: Trying to get property of non-object in <b>/home/marina/repositories/int_master/moodle/blog/external_blog_edit.php</b> on line <b>107</b><br /> 
{code}",24,15/5/2014,18/7/2014,64,Bug,Critical,7
MDL-45611,Question text overlaps other parts of the UI on the edit quiz page.,"On the edit quiz page, the question text for random questions overlaps the Maximum mark input box and other things. See the screen grab.

To reproduce:
# Add a new quiz to a course.
# Add several questions to a category in the question bank.
# On the edit quiz page, add a random question selecting from that category to the quiz.
# Observe overlap as in the screen-grab.",38,20/5/2014,20/6/2014,31,Bug,Minor,11
MDL-45729,Teacher should not see 'Submission status' on Assignment page,"When viewing an assignment, every user is shown a table for their 'Submission status', even if they don't have the capability to submit. 

Has been discussed here: https://moodle.org/mod/forum/discuss.php?d=232721",13,29/5/2014,13/6/2014,15,Bug,Minor,5
MDL-45833,Debugging error when changing roles in category,"I encountered the following message:
{code}
Inconsistent courseid - context combination detected.

    line 247 of /lib/classes/event/base.php: call to debugging()
    line 144 of /admin/roles/override.php: call to core\event\base::create()
{code}

to replicate - 
# open course category, 
# click on ""permissions"", 
# select any role from ""Advanced"" dropdown
# Change any permission

I'll create a related improvement to trigger event from inside of assign_capability()",9,4/6/2014,4/7/2014,30,Bug,Major,6
MDL-45867,Atto equation editor drops characters from typing buffer,"Enable a TeX filter or better two and open a browser to slow server or with slow connection. Open Atto and click equation editor key. After buttons render, begin typing a longish TeX expression quickly.  A number of the key strokes will be dropped due to the updating of the Preview image.  
updatePreview in the YUI module uses synchronous IO for AJAX. This should be rewritten with an asynchronous callback to fix the problem.",34,5/6/2014,29/11/2014,177,Bug,Minor,7
MDL-45909,"Left align input form fields on Install pages, in RTL mode.","Choosing to install in Hebrew (RTL mode), first install page form fields (site url, root directory and data directory) are all right aligned where they should be (always) left align, on the first stage of the install process. Since they always refer to english content. (URL and OS level directory names)
On the second page, where you need to input Database information, all input fields should be left aligned, In RTL mode.",17,8/6/2014,5/9/2014,89,Bug,Minor,7
MDL-45938,Event monitor: Create a form to edit/add a new rule,"We need a form to add/edit a new rule. This issue includes:-
# The mform with proper validations and such
# Edit.php to handel forum submissions
# A yui module to update the select drop downs dynamically (consider creating a mform dependent select element instead? ) ",13,10/6/2014,16/7/2014,36,New feature,Minor,6
MDL-45940,"canedit check in mod_assign ""view_student_summary"" needs to call ""can_edit_submission""",currently if checks if the current user ($USER) has mod_assign:submit - this is not enough - this should call the can_edit_submission function to do the checks properly,13,10/6/2014,20/6/2014,10,Bug,Minor,5
MDL-45970,Edit quiz page corrupts the question variable when displaying random questions,"{noformat}
(11:12:16 AM) Rajesh Taneja: +++ b/mod/quiz/editlib.php
@@ -882,8 +882,8 @@ function quiz_print_randomquestion(&$question, &$pageurl, &$quiz, $quiz_qbanktoo
 
         // Then list them.
         echo '<ul>';
-        foreach ($questionstoshow as $question) {
-            echo '<li>' . quiz_question_tostring($question, true) . '</li>';
+        foreach ($questionstoshow as $question1) {
+            echo '<li>' . quiz_question_tostring($question1, true) . '</li>';
         }
(11:12:40 AM) Rajesh Taneja: This was updating reference and causing the problem...
{noformat}

Note that the loop changes $question, which is passed into the function by reference.",11,13/6/2014,20/6/2014,7,Bug,Major,6
MDL-46130,Event monitor: Handle rule managment,"Write yui modules to handle the managment of rules
# Deleting a rule
# copying a rule",4,25/6/2014,17/7/2014,22,New feature,Minor,3
MDL-46156,web service for courses list with editingteacher,"It could be useful have a web service for courses list with editing teacher details:
ex. given id user, the web service returns an array with course ID, shortname, fullname, category ID, ...",1,27/6/2014,11/12/2017,1263,Improvement,Minor,2
MDL-46188,"Course management search returns, show/hide button disappears after action","When a user hides or shows a course from the search results page, the icon disappears, making it not possible to reverse this action without reloading the page.",20,28/6/2014,21/8/2014,54,Bug,Minor,9
MDL-46240,Atto collapse button icon with bad URL,"Hello,
yesterday I've upgraded our moodle instalation to version 2.7. After some quick testing I found bug with generated URL for Atto collapse button icon when the icon is not shown.

This is the generated URL: 
http://test.elearning.vspj.cz/theme/image.php/more/core/1404315041/http://test.elearning.vspj.cz/theme/image.php/more/atto_collapse/1404315041/icon

Icon is not shown on nginx web. server. On Apache (my localhost) is everything ok (but the source is still bad generated).

Here is my nginx configuration:

{code}
server {
    server_name  test.elearning.vspj.cz;

    access_log /var/log/nginx/test.elearning.vspj.cz.access_log main;
    error_log /var/log/nginx/test.elearning.vspj.cz.error_log info;

    root /var/www/$server_name;

    location / {
        try_files $uri $uri/ =404;
    }

    location ~ \.php {
            fastcgi_pass  unix:/var/tmp/php-fpm/$server_name.sock;
            fastcgi_index index.php;
            fastcgi_split_path_info ^(.+\.php)(/.+)$;
            fastcgi_param PATH_INFO $fastcgi_path_info;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name$fastcgi_path_info;
            fastcgi_read_timeout 600;

            include /etc/nginx/fastcgi_params;
    }
}
{code}",7,3/7/2014,11/7/2014,8,Bug,Minor,7
MDL-46241,Event monitor: Create a subscription instance class,Create a class that represents a subscription instance,3,3/7/2014,8/9/2014,67,New feature,Minor,3
MDL-46321,Uninformative error when moving forum without first selecting destination,"Steps to Reproduce:
1. Select a discussion in the Forum
2. On the Move this discussion to... dropdown leave it on the default (no forum selected to move the discussion to) and click [Move]
3. Stack Trace error displays:
Debug info: 
Error code: error
Stack trace:
line 463 of /lib/setuplib.php: moodle_exception thrown
line 40 of /course/jumpto.php: call to print_error()

The error that gets displayed is just ""Error occurred."" This is terribly unfriendly. The end user might not understand what they are doing wrong. Seems like it could be a little more informative.",11,11/7/2014,14/8/2015,399,Bug,Minor,8
MDL-46322,Should not be able to assign admin as marker in assignment,"I have been able to assign administator as marker in assignement even though they belong to the 'Other users' section and are not subscribed specifically to the course. Having nothing to do with the daily running of a course, i dont think they should be available to be given submissions to grade.

To reproduce:
1. Enroll a few students into a course.
2. Create an assignment.
3. Set 'Marking Workflow' and 'Marking Allocation' to 'Yes'.
4. In the assignment, click View/Grade All Submissions.
5. For any student, click Grade icon in the Grade column.
6. See that you can set 'Allocated Marker' to a manager. (Should not be possible)

OR. 5. Select Quick grading.
OR. 6. See that you can set a manager in the marker column. (Should not be possible)",35,11/7/2014,17/6/2017,1072,Bug,Minor,12
MDL-46391,Message search button is missing,If you directly navigate to /message/index.php and you don't have any unread messages you see the search. In any other circumstance I'm quite confident that there used to be a button under your contacts to allow you to access search.,21,16/7/2014,11/10/2014,87,Bug,Minor,9
MDL-46518,Expansion of site glossary in navigation block throws error.,"Make sure navigation is set to show front page activities in navigation.

Go to the front page and add a glossary.

Go to Navigation block -> Site Pages then click on the arrow next to the glossary you just created. It throws the following:

Coding error detected, it must be fixed by a programmer: Error: Coding error detected, it must be fixed by a programmer: PHP catchable fatal error

debug: 
{code}
Default exception handler: Coding error detected, it must be fixed by a programmer: Error: Coding error detected, it must be fixed by a programmer: PHP catchable fatal error Debug: \nError code: codingerror\n* line 115 of /lib/ajax/getnavbranch.php: coding_exception thrown\n
{code}

If you click on the actual name of the Glossary it does not throw an error and does show the ""Browse by"" options below it, however using the arrow does not work on these site level glossaries the way it does on course level ones. 
",8,25/7/2014,29/10/2014,96,Bug,Minor,6
MDL-46545,Weekly stats breaking after MDL-41284,"Stats cron breaks with database writing error on lib/statslib.php line 699.
The problem is in lib/statslib.php on line 704, where is missing userid column.
This totally breaks statistics calculations.
The same for monthly stats line 864",8,28/7/2014,21/8/2014,24,Bug,Blocker,6
MDL-46669,"mod_scorm: GetValue adds quotes to string values, in 1.3 copy only","Calling SetValue(""cmi.location"", ""bob""), then later getValue(""cmi.location"") will return ""'bob'"" - note the extra quotes added by scorm_empty() in the 1.3 version. This causes failures for example if the scorm sets the cmi.location to page2.html, it will try to navigate to site.com/scorm/'page2.html' . That will throw a 404 since the filename should not include quotes.

This is a regression apparently caused by MDL-35870, separating js and php files.  Checking out the immediately preceding commit and testing, the problem is not observed with the previous commit. Also, the function to add the quotation marks did not exist until MDL-35870.

It may be worth noting that the SCORM 1.2 version does not call the function to add quotes to strings. It instead calls the function scorm_isset, which is identical except that it does not add quotes within values.
",15,5/8/2014,21/8/2014,16,Bug,Blocker,7
MDL-46774,Migrate row/column highlight code to YUI module,"Reduce code duplication, improve performance reduce number of event handlers.",1,12/8/2014,19/8/2014,7,Sub-task,Minor,1
MDL-46827,Allow weightings within a category to be reset,"When a user manually sets a weight it becomes fixed and only other weights are changed when normalising the weights in a category.

It would be good to have an option to reset the weights within a category. This would remove the flag indicating individual weights have been manually edited so they can all be normalised.

This could be extended to reset the weights for the whole course.",8,14/8/2014,4/9/2014,21,Sub-task,Minor,6
MDL-46833,"Impossible to see assignment that is ""Available for group members only"" and no students enrolled.","Fatal (coding) error on attempt to see assignment when ""Available for group members only"" and no students* enrolled. 

*active users with mod/assign:submit, normally students.",7,15/8/2014,21/8/2014,6,Bug,Minor,5
MDL-46846,Grade export does not support grade display type anymore,The format of grade is now ignored.,6,15/8/2014,21/8/2014,6,Bug,Minor,5
MDL-46929,Tag functionality for forums,"The ability to use a tag in a forum post. A particular role should be able to defined tags then those tags can be used in forum posts. Also tags should be clickable as a search a parameter for the forums to display similar tagged posts. Tags also be able to search tags in the forums.
",47,22/8/2014,19/4/2017,971,New feature,Minor,13
MDL-46976,email addresses not trimmed on registration and thrown away when editing profile,If you create a user and type in a new email address spaces are not trimmed during sanity checks. This might be useful because on mobile devices people use auto completion and that usually adds a space after a completed word (address). It is not obvious to see what's wrong with an address that has a space at the end because it's invisible. So trimming might be the solution to this.,15,26/8/2014,23/1/2015,150,Bug,Major,9
MDL-47055,reimplement extra credit handling with natural weights.,"See https://tracker.moodle.org/browse/MDL-46576 for the code to branch from, unless that issue has already been integrated.

See the spec at https://docs.moodle.org/dev/Natural_weighting

See https://github.com/MoodleGradebookWorkingGroup/moodle/compare/master...28_natural_weights for the original prototype implementation.",5,2/9/2014,16/9/2014,14,Sub-task,Minor,4
MDL-47059,Investigate/fix handling of hidden and excluded grades within natural weights,"Simple description of this issue:

Make natural weighting compatible with excluded grades (either excluded by exclude empty grades, or manually excluded grades). 

What needs to happen for this to work:
The ""automatic"" weights for each grade_item natural weighting will need to be adjusted ""per user"" depending on the grades that  are excluded.
The max grade for the category will need to be different ""per user"" depending on the grades that are excluded.
Very simple example:

||Grade item||Max grade||Natural Weight||
| Assign 1 | 10 | 10 % |
| Assign 2 | 20 | 20 % |
| Assign 3 | 30 | 30 % |
| Assign 4 | 40 | 40 % |
Total = 100
If item 2 is excluded because the student has not submitted anything and ""exclude empty grades"" is enabled - 
||Grade item||Max grade||Natural Weight||
| Assign 1 | 10 | 12.5 % |
| Assign 3 | 30 | 37.5 % |
| Assign 4 | 40 | 50 % |
Total = 80

Further more - currently we recalculate the ""view"" if show totals excluding hidden items is enabled. Depending on the performance of recalculating all of the above at page load time - we may need to add additional columns to store the ""view"" for users without view hidden grades capability. (This would be 3 extra columns on grade_grade)





Older - more complicated description:

At the moment, excluded and empty grades not being calculated in the final grade, is not enabled with sum of grades (the basis of natural weights). Also currently we have not introduced code to handle displaying hidden grades in the reports. 

To do:

# Update reports to not consider empty grades. This work will be partially solved by MDL-47078.
# Update reports to exclude hidden grade items. Please note that hidden grade items are items hidden to all students and doesn't cover conditional access to activities.

Examples : (Please note that this is the desired outcome)
*Exclude empty grades*
Student 1
||Grade item||Grade||Percent||
| Assign 1 | 10 / 20 | 50 % |
| Assign 2 | 10 / 40 | 5 % |
| Assign 3 | - / 80 | - |
| Total | 20 / 60 | 33.33 % |

Student 2
||Grade item||Grade||Percent||
| Assign 1 | - / 20 | - |
| Assign 2 | - / 40 | - |
| Assign 3 | 20 / 80 | 25% |
| Total | 20 / 80 | 25.00 % |

Student 1 20 (33.00%)
Student 2 20 (25.00 %)

*Exclude hidden grade items*
Student 1
||Grade item||Grade||Percent||
| Assign 1 | 10 / 20 | 50 % |
| Assign 2 - hidden | - / 40 | - |
| Assign 3 | 40 / 80 | 50% |
| Total | 50 / 100 | 50.00 % |

Student 2
||Grade item||Grade||Percent||
| Assign 1 | 15 / 20 | 75% |
| Assign 2 - hidden | - / 40 | - |
| Assign 3 | 20 / 80 | 25% |
| Total | 35 / 100 | 35.00 % |

Student 1 20 (50.00%)
Student 2 20 (35.00 %)

*Additional technical information:*

https://tracker.moodle.org/browse/MDL-46139 introduced a field, grade_grade::aggregationweight that may be helpful.

Currently, grade_category::auto_update_weights() adjust grade_item weights but does this trickle down to grade_grades?

If an individual student cannot see an activity is zeroing grade_grade::aggregationweight and recalculating the weights in that category for that student sufficient?

This code may want to living in get_hiding_affected() in grade_grade.php.",10,2/9/2014,19/9/2014,17,Sub-task,Minor,6
MDL-47076,Badges creator being set to 0 on backup restoration,"If you back up a course including badges, then restore it and the usercreator  of the badge doesn't match a user in the system it gets set to 0. I would expect it to default to the user restoring the course (ie $USER->id), it being 0 causes issues if it tries to send messages to notify the creator about the badge being awarded.

Steps to replicate:
1) Create a user and give them a sitewide role like site manager
2) Create a course
3) Log in as the user and create a badge within that course
   - Make sure it has a criteria (manual issue by role is probably the easiest)
   - Set notify badge creator to everytime on the messages tab

4) Activate the badge
5) Backup the course making sure that users and badges are ticked
6) Download the backup file and upload to a course where no user matches the creator id (or delete the creator from the mdl_user table manually)
7) Restore the course (including the badge) into a new course
8) Check in the database, the creator id of the restored badge will be 0
9) Create a learner, enrol them in the course, and award them the badge
10) Run the cron, you will get the invalid user error below when it tries to send the creator a notification about the badge being awarded.

Default exception handler: Invalid user Debug: SELECT * FROM {user} WHERE id = ?
[array (
  0 => '0',
)]
Error code: invaliduser
* line 1411 of /lib/dml/moodle_database.php: dml_missing_record_exception thrown
* line 1387 of /lib/dml/moodle_database.php: call to moodle_database->get_record_select()
* line 129 of /badges/cron.php: call to moodle_database->get_record()
* line 108 of /badges/cron.php: call to badge_assemble_notification()
* line 35 of /badges/cron.php: call to badge_message_cron()
* line 545 of /lib/cronlib.php: call to badge_cron()
* line 61 of /admin/cli/cron.php: call to cron_run()

!!! Invalid user !!!",21,3/9/2014,12/9/2014,9,Bug,Minor,8
MDL-47124,Update table row/column sizes when AJAX quick editing,"Update table row/column sizes when AJAX quick editing

Needs to use either a global namespace, or a global event.",2,5/9/2014,5/9/2014,0,,,
MDL-47154,Backport behat changes from MDL-46572,"as part of MDL-46572 the existing behat step was modified, the changes should be backported to the stable versions.

Also please change the functions following_should_exist_in_the_table() and following_should_not_exist_in_the_table() not to use the same variable name for different things.",8,8/9/2014,3/10/2014,25,Bug,Minor,6
MDL-47162,Add course id to message eventdata,"The new events2 api now includes the course id which is awesome. Could it also be added to the message api please? It is a piece of info which could be useful for all sorts of plugins such as CONTRIB-5295

I have a core code patch here: https://github.com/amandadoughty/moodle-core_culactivity_stream for v2.6.4

I would be happy to submit this as a proper fix for current branches if the idea is accepted?",134,9/9/2014,5/11/2016,788,Improvement,Major,18
MDL-47167,Add Behat tests for qformat_xml,"This is probably the most important import format, so, since I have worked out that patter for doing these tests, I ought to add tests for this one.",14,9/9/2014,19/9/2014,10,Improvement,Minor,6
MDL-47426,Bad performance of the Assign local roles screen,"Sometimes (but not always) we are seeing really bad performance from the admin/roles/assign.php page (Locally assigned roles).

It is not just having many rows in mdl_users, nor just having many users enrolled in a course, but some combinations of these seem to lead to the database executing this query in a very suboptimal way.

The problem query comes from class core_role_potential_assignees_below_course in admin/roles/classes/potential_assignees_below_course.php, which is using get_enrolled_sql from lib/accesslib.php to build the subquery.

It typically looks like:
{code:sql}
SELECT count(u.id)
  FROM mdl_user u
  LEFT JOIN mdl_role_assignments ra ON (ra.userid = u.id AND ra.roleid = 11 AND ra.contextid = 229431) 
 WHERE u.id IN (
    SELECT DISTINCT eu1_u.id
      FROM mdl_user eu1_u JOIN mdl_user_enrolments eu1_ue ON eu1_ue.userid = eu1_u.id 
      JOIN mdl_enrol eu1_e ON (eu1_e.id = eu1_ue.enrolid AND eu1_e.courseid = 100071) 
     WHERE eu1_u.deleted = 0 AND eu1_u.id <> 1)
  AND u.id <> 1
  AND u.deleted = 0
  AND u.confirmed = 1
  AND ra.id IS NULL
{code}",20,26/9/2014,11/10/2014,15,Bug,Critical,7
MDL-47610,Impossible to identify 'extra credit' items when using 'Simple weighted mean',"On the set up screen, using only 'Simple weighted mean of grades', the items which are extra credit ones are not identifiable.",17,10/10/2014,19/12/2014,70,Bug,Major,7
MDL-47617,user/tests/behat/table_sorting.feature is failing,"{code}
01. ""Travis Peter Mr T Sutcliff"" ""table_row"" does not appear before ""Admin User"" ""table_row""
    In step `And ""Travis Peter Mr T Sutcliff"" ""table_row"" should appear before ""Admin User"" ""table_row""'. # behat_general::should_appear_before()
    From scenario `All user names are show and sortable in the administration user list.'.                # /var/lib/jenkins/moodle/behat_whole_suite_m/user/tests/behat/table_sorting.feature:20
    Of feature `Tables can be sorted by additional names'.                                                # /var/lib/jenkins/moodle/behat_whole_suite_m/user/tests/behat/table_sorting.feature
{code}",14,11/10/2014,15/10/2014,4,Bug,Minor,4
MDL-47754,Installation does infinite redirect on admin edit double click,I have finally managed to reproduce the dreaded infinite redirect loop during installation - after typing admin password and email double press the Enter key...,6,20/10/2014,23/10/2014,3,Bug,Major,7
MDL-47777,Convert assignment maximum files per submission maximum to global setting,Currently the maximum amount of files a submission can contain is hard-coded to 20.  I propose converting this to an admin setting.,17,21/10/2014,21/11/2014,31,Improvement,Minor,10
MDL-47780,The docs for get_user_capability_course() are wrong,"The @return in the php docs suggests it will be ""Array of courses, may have zero entries. Or false if query failed."", however if you actually look at the return statement in the function it is ""return empty($courses) ? false : $courses;"".",5,21/10/2014,29/10/2014,8,Bug,Minor,4
MDL-47810,No options listed in the select box if there are no items to subscribe to,"Dan's comments from MDL-45758.

# As seen in screenshot, it doesn't apply to a core event like comment created and you get an empty select box. Which is also crazy, because I would *love* to know when a comment is created in a specific module. But I can't.",26,22/10/2014,5/11/2014,14,Bug,Minor,11
MDL-47982,Accessibility of Single view: Tab order,"Tab order is broken and needs to be fixed - navigation is unintuitive, and tab indices seem to be shared (e.g. the update button has a tab index of 60).",8,31/10/2014,8/11/2014,8,Bug,Minor,8
MDL-48021,"Bump all versions, requires and dependencies near 2.8 release in master","This task corresponds to point #3 of:

http://docs.moodle.org/dev/Release_process_(Combined)#1_week_prior

And it's achieved in a semi-automated way with the ""versions_check_set.sh"" script available @ https://github.com/moodlehq/moodle-local_ci/blob/master/versions_check_set/versions_check_set.sh 

1) In a git, working, master site with the ci local plugin installed.

2) Define and export all the env variables required by the script.
- $WORKSPACE: Path to the directory where test reults will be sent (/tmp)
- $phpcmd: Path to the PHP CLI executable (/usr/bin/php)
- $gitdir: Directory containing git repo (the dirroot of the git, working site)
- $setversion: 10digits (YYYYMMDD00) to set all versions to. Empty = not set. Since Moodle 2.7 it has been agreed to perform the bump to the planned release version. For easier automated checks later in stable-land.
- $setrequires: 10digits (YYYYMMDD00) to set all requires to. Empty = default to $setversion. Since Moodle 2.7 it has been agreed to perform the requires bump to current master version (usually a RC one).

3) Run it. With errors, they will be reported and fixing will be necessary. (look for ERROR in the $WORKSPACE/versions_check_set.txt file and/or check exit status of the script)

4) Without errors, all the versions, requires and dependencies will be bumped.

5) Commit

6) Note that the main version file is NOT updated at all. One extra commit bumping it may be necessary.

7) Run the checker again to verify that there are no errors and no more changes are performed.

Note the checker is also run periodically by the ci server and also as part of the ""remote_branch_checker"", so normally all the version.php files should be under control.

(This issue will be cloned for each major release).

Ciao :)",7,3/11/2014,8/11/2014,5,Bug,Blocker,5
MDL-48032,Update composer.json with the new moodlehq/behat-extension tag for 2.9 development,"In the https://github.com/moodlehq/moodle-behat-extension.git project we have different tags branches for each major release, for example 1.25.x for Moodle 2.5, this tags are created from different branches, one per moodle major release keeping the master branch according to the moodle master branch (1.26.x for Moodle 2.6dev for example) After releasing XY we should update composer.json to point to a new tag (from https://github.com/moodlehq/moodle-behat-extension.git master branch) according to the moodle development version (1.26.0 for Moodle 2.6dev for example)

Detailed process:

* Before each major release:
** http://docs.moodle.org/dev/Major_release_process#One_week_before

* After each major release
** http://docs.moodle.org/dev/Major_release_process#Post_release",10,3/11/2014,21/11/2014,18,Task,Blocker,5
MDL-48108,Slow messages query,"While looking through the slow query log, found this nice slow query:

{code}
# Query_time: 14.251499  Lock_time: 0.000126 Rows_sent: 6  Rows_examined: 124720
SELECT otheruser.id,otheruser.picture,otheruser.firstname,otheruser.lastname,otheruser.firstnamephonetic,otheruser.lastnamephonetic,otheruser.middlename,otheruser.alternatename,otheruser.imagealt,otheruser.email,otheruser.lastaccess,
                   message.id as mid, message.notification, message.smallmessage, message.fullmessage,
                   message.fullmessagehtml, message.fullmessageformat, message.timecreated,
                   contact.id as contactlistid, contact.blocked

              FROM message message
              JOIN user otheruser ON otheruser.id = CASE
                                WHEN message.useridto = '1031471' THEN message.useridfrom
                                                                 ELSE message.useridto END
         LEFT JOIN message_contacts contact ON contact.userid = '1031471' AND contact.contactid = otheruser.id

             WHERE otheruser.deleted = 0
               AND (message.useridto = '1031471' OR message.useridfrom = '1031471')
               AND message.notification = 0
               AND NOT EXISTS (
                        SELECT 1
                          FROM message othermessage
                         WHERE ((othermessage.useridto = '1031471' AND othermessage.useridfrom = otheruser.id) OR
                                (othermessage.useridfrom = '1031471' AND othermessage.useridto = otheruser.id))
                           AND (othermessage.timecreated > message.timecreated OR (
                                othermessage.timecreated = message.timecreated AND othermessage.id > message.id))
                   )

          ORDER BY message.timecreated DESC LIMIT 0, 100;
{code}",39,7/11/2014,26/2/2015,111,Improvement,Major,13
MDL-48160,Improve all block region layouts when coded for RTL,"If the layout in Bootstrapbase and Clean themes were coded differently so that the side blocks shift from left to the right and visa versa then there would be no need for the 'blockmanipulation' code because the layout itself would do the job, meaning that 'side-pre' can either be on the left in LTR mode and on the right in RTL mode, and that 'side-post' can be on the right in LTR mode and on the left in RTL mode. This would also mean that the current region configuration for ""region-bs-main-and-pre""  and ""region-bs-main-and-post"" would be obsolete.






",52,11/11/2014,6/2/2015,87,Improvement,Minor,8
MDL-48608,Group assignments not showing grade in assignment page without a submission,"Reproduction steps:
* Create assignment.
** Under ""Group submission settings"" set ""Students submit in groups"" to ""Yes"".
* Save and display.
* Go to View/grade all submissions.
* Grade a user, either via quick-grading or editing the grade.
* Grade will be empty. (although if you click edit, you will see the grade was saved)

If you login as a user and submit something, tada! your grade is now there.

This appears to be a visual bug introduced since 2.8 as I've tested on 2.7 and she's fine.

",22,16/12/2014,6/2/2015,52,Bug,Minor,7
MDL-48753,badges_get_user_badges uses concatenation to form an SQL statement,"The function  badges_get_user_badges in lib/badgeslib.php is using concatenation to form part of an SQL statement.
While all current core uses are safely handing the concatenated param it could potentially be exploited if the calling code was sloppy.
This is a pretty minor issue at this point, however one that really should be addressed.",9,6/1/2015,16/1/2015,10,Bug,Minor,6
MDL-48771,Can no longer select multiple questions to delete from a quiz,"In the recent changes made to the quiz module the ""select all"" and the selection boxes to allow more than one question to be selected for deletion have been eliminated.  This means that each question must be deleted individually by two actions - click on delete - click on Yes in message box.  Many of us change out all the questions in each quiz every semester but want to keep all of the other settings associated with that quiz intact.so this is an issue.  For example, I now must perform the delete click and accept yes about 800 times each semester as opposed to the previous 36 times (there are 36 quizzes in each class).  There are two possible fixes for this issue -
1. Restore the selection boxes and a select all and delete all button to the quiz edit page
2. Provide a optional way to make a copy of a quiiz that copies all settings EXCEPT that no questions are copied thus creating a blank but fully formatted quiz. ",109,8/1/2015,7/4/2017,820,Improvement,Major,19
MDL-48803,Lesson should support groups,It would be nice if the lesson module could support groups and groupings like the quiz module.  (At least with the ability to filter the student scores on the reports by group),31,12/1/2015,13/2/2015,32,Improvement,Minor,11
MDL-49025,Possible to remove submission while status shows as submitted,"When editing a file submission, it is possible to delete the submission, save, and then navigate away.

Although an error message is shown warning of an empty submission, the submission is still gone while the status shows as submitted.",32,30/1/2015,21/7/2018,1268,Bug,Minor,12
MDL-49242,core_course_get_contents external function returns huge JSON data for large courses,"I detected cases when the JSON response is about 7MBytes (for courses using a lot of file resources as mini-htmlsites), this makes the app unresponsive (and other clients unable to process that amount of data)

We need to filter the JSON data returned by the external function to reduce the size.

The core_course_get_contents has an option variable (unused) we should add there options for AND filters

Filters:
- excludemodules - Do not return modules, return only the sections structure
- excludecontents - Do not return course contents (the list of files in a resource file)
- sectionid - Return only the section with id = X
- sectionnumber - Return only the section with number (order) = X
- cmid - Return only this module information (among the whole sections structure)
- modname - Return only modules with this name ""label, forum, etc...""
- cminstance - Return only module with id = X (to be used with modname)
- cmidnumber - Return only modules with idnumber = X

Additional benefits are that this will speed up how we retrieve course contents, because we will have lightweight web services to return only the sections structure, modules inside a section and module contents (files)
",15,20/2/2015,13/3/2015,21,Improvement,Minor,7
MDL-49333,Return additional information in core_get_site_info,"For the mobile app we need additional information about features enabled in the site (messaging, notes, usercomments, etc...)

For example, if messaging is disabled we are not going to display that option in the app (same for comments, notes, etc...)",14,28/2/2015,13/3/2015,13,Improvement,Minor,7
MDL-49402,Same scenario names in mod/choice/tests/behat/block_editing.feature,mod/choice/tests/behat/block_editing.feature has 3 scenarios with same feature file.,14,6/3/2015,13/3/2015,7,Bug,Minor,5
MDL-49459,Competency Framework,"Build a UI for creating competency frameworks, as well as the DB tables, webservices, unit tests.",0,10/3/2015,29/5/2015,80,New feature,Minor,2
MDL-49489,coursecontacts regularly (unnecessarily?) purging,"We're still working out how best to configure all of the various cache definitions, and I've been looking at how frequently the various cache definitions are purged in a production environment.
When a cache definition is on a memcached server shared with other definitions, purging one definition will purge the others as well, as Memcached can't segregate the various definitions.

It seems the coursecontacts cache regularly purges itself, even though it seems to have fairly simple keys.

The code (/lib/coursecatlib.php @ ~713-718 in 2.8.5) looks like this:
{code}
$cacheddata = $cache->get_many(array_merge(array('basic'), array_keys($courses)));
if (...) {
    $cache->purge();
    $cache->set('basic', ...
}
{code}

It seems the keys are all course ids (and 'basic') - so purging a list of course IDs would seem to make more sense, to prevent the purge?

{code}
$cacheddata = $cache->get_many(array_merge(array('basic'), array_keys($courses)));
if (...) {
    $cache->delete_many($DB->get_fieldset_select('course', 'id', ''));
    $cache->set('basic', ...
}
{code}",18,13/3/2015,18/4/2015,36,Bug,Minor,8
MDL-49501,core_message_mark_message_read,"Note that this function is already in the core, and it triggers the message read event",11,14/3/2015,10/4/2015,27,Sub-task,Minor,6
MDL-49573,bulk insert in single view changes activity grades it shouldn't and marks all as overridden.,"The behavior of using bulk insert (in the grader singleview window) doesn't seem correct to me. 

If you have an activity, and have graded some students in the activity (lets say assignment).   Performing a bulk insert on empty grades in single view, will mark every single grade score for that activity as ""overridden"" and set the score on empty grades.  It will also mark the scores graded in the assignment activity as overridden.


create an assignment activity (AA) in a course with students.
grade one of the studnets in the assignment activity
go to the gradebook
launch singleview for that grade item AA (assignment activity)
you should see that all scores are read only
click the checkbox for  ""Perform bulk insert""
enter 12 in the text box
leave pulldown for empty grades
click save. 

now you will see that ALL grade scores have been overridden,
including the one that wasn't empty. 


",31,19/3/2015,18/4/2015,30,Bug,Major,11
MDL-49606,External function core_enrol_get_users_courses should return additional course information,"This information return information about the courses where the user is enrolled, currently it only return basic information (like id, fullname and shortname) but it will be interesting return additional information about the basic public settings of the course.
This will allow WS client implementations to avoid have to do additional requests to course_get_courses external function for retrieving extra information.

Additional information that should be returned:
summary
summaryformat
format
showgrades
lang
enablecompletion",17,21/3/2015,3/4/2015,13,Improvement,Minor,8
MDL-49650,Add a tool to browse templates in the current theme.,"The idea is that a special comment could be added to the template that would mark it as suitable for displaying in the tool. The comment can include sample ""context"" data in json format so that the tool can render the template with some sample content.

This would then allow you to view all the defined templates in a custom theme, or switch languages etc. 

This tool does not necessarily have to be in core (there are mixed opinions on dev tools in core). It can live in plugin land as long as the syntax for the comments is agreed - and added to core templates by default.

This issue supersedes MDL-45828 (Element library).
",18,25/3/2015,15/4/2015,21,Improvement,Minor,6
MDL-49667,Not possible to add freestanding item to settings tree,"While working on MDL-24120 I noticed that there was a bug in navigation logic that as well removed the ""return to XXX user"" link. Even though this link should not have appeared for another reasons, this bug prevented local plugins from adding individual items to the settings menu.

Even though it's a bug I would not recommend backport it

The commit also removes the unreachable ""return to XXX user"" link that was supposed to be removed as part of MDL-23911",21,26/3/2015,19/6/2015,85,Bug,Minor,8
MDL-49854,User navigation code cleanup,"Items that Dan pointed out:

# user/classes/output/myprofile/manager.php - Remove including the lib file 
{code}
// Add core nodes.
$file = $CFG->libdir . ""/myprofilelib.php"";
if (is_readable($file)) {
	require_once($file);
{code}
# grade/report/mygrades.php - Remove MOODLE_INTERNAL and put in a require_login check.
# lib/output*.php - Clear up confusion about $imagedata in the phpdocs, at the moment they don't agree with each other (render class phpdocs).
# course/user.php - perhaps include a developer debug message for the default at the end of the page. Re-word the comment.
",15,15/4/2015,22/4/2015,7,Bug,Minor,7
MDL-49950,'userdetails' lang string is declared twice.,The userdetails lang string in lang/en/moodle.php is declared twice. We can remove one.,14,22/4/2015,4/9/2015,135,Improvement,Minor,6
MDL-49981,There is no way to get to my badges page.,"With Navigation overhaul change it is not possible to reach [my badges page|http://qa.moodle.net/badges/mybadges.php], hence user can't download all badges anymore.

It was observed by Fernando, while testing MDLQA-8041.


 ",10,24/4/2015,29/4/2015,5,Bug,Blocker,5
MDL-50066,Unable to deprecate string from lang/en/moodle.php,Thanks to John for pointing it out!,9,1/5/2015,6/5/2015,5,Bug,Minor,6
MDL-50116,crawler and browserkit warnings on php >=5.5.24 and >=5.6.3,"While running behat with @enrol tag, crawler warnings are being displayed.

",20,6/5/2015,22/5/2015,16,Bug,Major,5
MDL-50408,Deprecation of sql_select_reader completely breaks code that uses it,"Some code taken from https://github.com/mudrd8mz/moodle-report_overviewstats.git
{code}
$logmanger = get_log_manager();
$readers = $logmanger->get_readers('\core\log\sql_select_reader');
{code}

From lib/upgrade.txt
{quote}
* sql_internal_reader and sql_select_reader interfaces have been deprecated in favour of sql_internal_table_reader
  and sql_reader which use iterators to be more memory efficient.
{quote}
\core\log\sql_select_reader has been deprecated in favour of \core\log\sql_reader.

The problem is that get_readers() now returns an empty array. No deprecation warning telling you to update the code, it doesn't return the old class but it also doesn't give me the new class, just an empty array. So even though the class has been deprecated rather than outright removed the code that uses it is entirely broken without any clue as to why exactly.",22,30/5/2015,13/6/2015,14,Bug,Major,8
MDL-50460,Profile image on dashboard overlays docked blocks,"Steps to reproduce:
# Go to your dashboard or profile page in 2.9
# Dock a block
# Hover your cursor over that docked block to see its contents and perhaps to undock it
# You will see the large profile image is on top of the block, affecting visibility.

I am attaching a couple of example screenshots of what I mean.",23,4/6/2015,26/6/2015,22,Bug,Major,10
MDL-50532,Not possible to remove scheduled tasks without resorting to upgrade.php,reset_scheduled_tasks_for_component() is missing the logic to remove scheduled tasks which means that you cannot delete scheduled tasks and cron sometimes gets upset.,11,10/6/2015,6/8/2015,57,Bug,Minor,6
MDL-50535,Can't save a grade to pass value for some activities when ratings not enabled,If you are creating/editing a forum and place a valid value in the 'Grade to pass' input and save then re-edit the forum you will notice that there is no value in the 'Grade to pass' input.,20,10/6/2015,31/7/2015,51,Bug,Minor,9
MDL-50612,'Grade to pass' setting under RSS on glossary and database edit activity pages,"Steps to reproduce:

# Enable RSS feeds in advanced features
# Enable RSS feeds for database and glossary activities
# Go into a course and add a new database activity and a new glossary activity

Surprisingly, for both activities, the 'Grade to pass' setting can be found in the section 'RSS'.",19,17/6/2015,23/7/2015,36,Bug,Major,7
MDL-50633,Error Install Moodle 2.x on MySql 5.7.x   ,"When try to install Moodle 2.x or superior, Using MySql 5.7.5 or superior you get an error:

----------------
Debug info: Unknown system variable 'storage_engine'
SELECT @@storage_engine
[NULL]
Error code: dmlreadexception
--------------

The error happen because moodle try to read the DataBase engine using a variable not present on MySql 5.7.5 or superior.

Solution:

From:  ./lib/dml/mysqli_native_moodle_database.php
On section:
{code}
   // get the default database engine
        $sql = ""SELECT @@storage_engine"";
        $this->query_start($sql, NULL, SQL_QUERY_AUX);
        $result = $this->mysqli->query($sql);
        $this->query_end($result);
        if ($rec = $result->fetch_assoc()) {
            $engine = $rec['@@storage_engine'];
        }
        $result->close();

        if ($engine === 'MyISAM') {
            // we really do not want MyISAM for Moodle, InnoDB or XtraDB is a reasonable defaults if supported
            $sql = ""SHOW STORAGE ENGINES"";
            $this->query_start($sql, NULL, SQL_QUERY_AUX);
            $result = $this->mysqli->query($sql);
            $this->query_end($result);
            $engines = array();
            while ($res = $result->fetch_assoc()) {
                if ($res['Support'] === 'YES' or $res['Support'] === 'DEFAULT') {
                    $engines[$res['Engine']] = true;
                }
            }
            $result->close();
            if (isset($engines['InnoDB'])) {
                $engine = 'InnoDB';
            }
            if (isset($engines['XtraDB'])) {
                $engine = 'XtraDB';
            }
        }  
{code}
-----------
Change the select for: 
SELECT @@default_storage_engine
----------------


",13,18/6/2015,4/11/2015,139,Bug,Critical,8
MDL-50659,Regression: Drag a link in site admin block and then move mouse over the links makes the icons move in Chrome,"Issue MDL-50554 may have caused an accessibility regression by removing the outline of an element when tabbed to it by keyboard users.

Full comments and thoughts on: https://moodle.org/mod/forum/discuss.php?d=315439#p1264126.

I believe that a work around until the issue is fixed in Chrome code (https://github.com/Automattic/_s/issues/543) could be:

{code}
a:focus {
    outline: none;
    border: thin dotted #333;
}
{code}

Or simply to remove the 'fix' and live with the odd movement until Chrome fixes itself.",13,22/6/2015,3/7/2015,11,Bug,Critical,6
MDL-50781,Blank cell 'cell c0' in user/index.php,When groups in course settings isn't enabled the cell 'cell c0' in the user filter stays blank becaouse there is no validation when trying to create the groups_print_course_menu.,10,8/7/2015,14/11/2015,129,Bug,Minor,8
MDL-50887,Antivirus: Implement plugins infrastructure for antivirus and create ClamAV plugin.,"This task will bring antivirus plugins infrastructure to core and move existing ClamAV scanning functionality to plugin level. The improvement does not bring any new features, it is merely a re-factoring of existing functionality.",85,21/7/2015,4/3/2016,227,Improvement,Minor,10
MDL-50967,"Assignments no longer show as ""awaiting grading"" if a teacher views them but does not grade yet","A teacher can view a students assignment by going to that assignment and clicking Edit and Grade beside the students name.

If they do this - intending to download the assignment but grade it later - and the file the student uploaded was a Word document, the assignment continues to show up when the filter of ""Awaiting Grading"" is used since it has not been graded yet.

However, if the file that was uploaded by the student is a PDF file, the assignment no longer shows as awaiting grading. 

In the case of a PDF file, opening the assignment causes a record to be inserted into the assign_grades table with a grade of -1. This then prevents the assignment from displaying at all when the filter ""awaiting grading"" appears. This means that teachers have no way of seeing the assignments that they need to work on.

To replicate:
1. Create an assignment that has file upload as the submission status. (I also used a scale rather than a grade but not sure if that makes any difference).
2. Log in as a student and go to the assignment. Upload a PDF file as the assignment and save.
3. Log in as a teacher in the same group as the student. Go to the assignment. Find the student and click Edit then click Grade. Download the file.
4. Go back to the assignment (as the teacher) and choose the filter ""Awaiting Grading"" to only view assignments that are awaiting grading. The assignment for the student is no longer showing.

Do the same with a Word document as the file being uploaded and the assignment continues to show as outstanding since it has not yet been graded.

What I expected to happen was that the assignment would continue to show as awaiting grading until the teacher actually adds a grade, rather than disappearing when they open it but only if it is a PDF file.",5,31/7/2015,14/10/2015,75,Bug,Minor,4
MDL-51048,True/False Answers Change to True on Common Cartridge Export,"The process of backing up/exporting a course in Common Cartridge format changes the answers of True/False questions. All True/False questions that have ""false"" as the correct answer have their correct answer changed to ""true"" upon export.",25,8/8/2015,18/9/2015,41,Bug,Minor,7
MDL-51132,MOODLE 3.0: Drop user-course-tagging and replace with normal course-tagging,"There is a non obvious possibility in Moodle allowing users to tag courses. There are so many bugs there (and no bug reports) that I doubt anybody uses it. However it prevents us from using normal course tagging.

This issue suggests:
- remove all ""coursetags"" functionality such as block setting ($CFG->block_tags_showcoursetags), pages to add/edit ""my"" course tags
- during upgrade automatically convert all existing course tags into proper user-less tags
- add a field in course edit form that will allow teacher/manager to set or change course tags similar as one can set user interests, blog tags, question tags, wiki pages tags, etc.
- everybody will still be able to search for tagged courses using /tag/search.php

API changes:
Going to delete/deprecate quite a few of things including 
- drop capability 'moodle/tag:create'

forum post: https://moodle.org/mod/forum/discuss.php?d=318395",38,18/8/2015,11/9/2015,24,New feature,Minor,12
MDL-51177,Incorporate functionality of atto_htmlplus into atto_html,We discussed this at the time that we integrated Atto and deferred it until later. Raising this now.,23,21/8/2015,14/9/2018,1120,Improvement,Minor,7
MDL-51325,External function get_course_notes does not return site notes,There is a bug in the external function that prevents to retrieve sites notes via this function. Currently the function only returns site notes created originally in the course passed as parameter. The function should return all the site notes to mimic how the web interface work (and to allow us to display all the site notes). ,8,5/9/2015,11/9/2015,6,Bug,Minor,6
MDL-51342,Review third party libraries for new versions (3.0),"There are a number of third-party libraries distributed with Moodle. Before the major release, the available versions of these libraries should be reviewed.

# Check the list at https://docs.moodle.org/dev/Moodle_libraries_credits, which should be up to date with lib/thirdpartylibs.xml and other thirdpartylibs.xml files distributed around Moodle.
# Add any newly incorporated libraries into the list
# Check the available versions of each library
#* If there is a significant new version and updating is recommended, the new version should be integrated by creating a sub-task to this issue and processing it through integration independently. If there is a readme_moodle.txt file with the plugin, this describes the customisations made for Moodle.

Check https://docs.moodle.org/dev/Third_Party_Libraries when doing your review.
",8,7/9/2015,3/12/2015,87,Epic,Minor,2
MDL-51354,Add Contextual Help to the View Course Logs Page ,"The filters available to an instructor when viewing their course logs have changed from v 2.6 to 2.8.  While the addition of the educational level filter gives them more ability, it is not intuitive to use.  Adding contextual help will help instructors, going forward, to understand their options in viewing their course logs.  See proposed popup attached to this ticket.",25,9/9/2015,23/4/2016,227,Improvement,Minor,9
MDL-51374,Do not purge entire databasemeta cache when there are structure changes (esp temp tables).,"Reported as a part of MDL-49489 - the databasemeta cache is purged whenever a temp table is created. Perhaps it would be better to be more specific and purge only the affected table, or ignore purging the cache for temporary tables. ",43,10/9/2015,18/3/2016,190,Improvement,Major,13
MDL-51395,String labels related to blog comments are not being shown properly when deleting an entry,"When deleting a blog entry, the string labels for blog comment counts and comment text area placeholder are not being shown properly.

Steps to reproduce:
# As a logged on user, click on the user profile picture on the top right corner of the page.
# When the dropdown comes up, click on ""Profile"".
# Under Miscellaneous, click on ""Blog entries""
# If there are no current blog entries listed, create a new one by clicking on ""Add a new entry"". Enter some text in the ""Entry title"" and ""Blog entry body"" then click ""Save changes""
# Back to the ""Blog entries"" page, click on the ""Delete"" link on a blog entry.
# On the delete page, expand the ""Comments"" section. See the placeholder text in the comment text area.
*The placeholder text displays [[addcomment,moodle]].*
# Enter text on the comment text area and click ""Save comment"". Check the ""Comments"" section header.
*The label displays [[commentscount,moodle]]*

!screenshot-1.png|thumbnail!",14,14/9/2015,7/11/2015,54,Bug,Minor,6
MDL-51399,"report_outline shows a column called ""Related blog entries"" although blogs are deactivated in the advanced feature settings","We have seen that report_outline (/report/outline/index.php?id=<COURSE-ID>) shows a column called ""Related blog entries"" although blogs are deactivated in the advanced feature settings (/admin/settings.php?section=optionalsubsystems, Enable Blogs is set to no)

I think report_outline should check if the blog system is really activated and, if not, hide this column.",8,15/9/2015,17/10/2015,32,Bug,Minor,8
MDL-51434,New setting in the SCORM module to allow downloading the zip package,"As mentioned in the SCORM player in the Mobile app spec:
https://docs.google.com/document/d/1x9FttwcPkPF45y3_qzLDXtMUtFATPImGviUBeFFIlcA/edit#heading=h.s3gt1oac0o4d

We need to add a new setting in the SCORM configuration form for allowing the download of the zip package (currently, it can be downloaded only by admins).

This settings will be disabled when the SCORM is configured to point an extenral imsmanifest.xml file and in other cases.",29,17/9/2015,9/10/2015,22,New feature,Critical,10
MDL-51530,Upgrade less.php to 1.7.0.7 for Moodle 3.0 release,"Library less.php
Current version 1.7.0.3
Latest version 1.7.0.7
https://github.com/oyejorge/less.php",7,25/9/2015,9/10/2015,14,Task,Minor,5
MDL-51632,Print URL of the generated course,Been using the {{admin/tool/generator/cli/maketestcourse.php}} and it is great!  Would be nice though if it told you about the course it made instead of having to hunt it down.,7,2/10/2015,9/10/2015,7,Improvement,Trivial,5
MDL-51802,Reusable element for inline name editing,"This is a proposal to create a re-usable element for in-place name editing.
This can be implemented as template/JS module
Plugins and core will be able to use it by specifying the AJAX callback to execute when editing was completed

Use cases: 
* activity name - exists and not standard (will be converted to this element in MDL-52869)
* section name (added in this issue)
* tag name on ""manage tags"" page - exists and not standard (converted to standard under this issue)
* maximum mark and category title on quiz edit page (MDL-53009 to convert to this element)
* blocks names (MDL-52994)
* etc.",56,16/10/2015,19/2/2016,126,New feature,Major,11
MDL-51893,core_date_legacy_testcase::test_get_timezone_offset in CI server,"Recently, and apparently only caused by an upgrade to 5.6.14... this has started to fail:

http://integration.moodle.org/view/master/job/20.%20Run%20phpunit%20UnitTests%20(master)/4922/testReport/junit/(root)/core_date_legacy_testcase/test_get_timezone_offset/

Other servers running 5.4 and 5.5 are passing tests perfectly. So this is about to investigate what's happening and ensure it works for all supported PHP versions.

Ciao :-)",12,24/10/2015,29/10/2015,5,Bug,Minor,5
MDL-51913,User Activity report > Statistics gives get_records()  warning messages,"Logged in as admin user
Ran log reports for yesterday
Selected a user
Then clicked on activity reports, statistics and got the following error message:

""Did you remember to make the first column something unique in your call to get_records? Duplicate value '1438387200' found in column 'timeend'.
* line 1089 of /lib/dml/mysqli_native_moodle_database.php: call to debugging()
* line 112 of /report/stats/user.php: call to mysqli_native_moodle_datbase->get_records_sql()",12,27/10/2015,14/11/2015,18,Bug,Minor,8
MDL-51921,File picker dialogue show markup and dropdown extending dialogue width,"While testing MDLQA-8450, it was observed that:

h4. Dropdown for path extends dialogue bound.
Steps to reproduce:
# Login as user
# Follow ""Manage private files..."" in 'Private files' block.
# Create a folder with very big name ""This is a test folder with big big big big big name""
# Upload a file and then click on uploaded file.
# You will observe that path drop down is extending the dialogue.

h4. HTML markup is visible in file ficker
Steps to reproduce:
# Login as user
# Follow ""Manage private files..."" in 'Private files' block.
# Upload a file (moodle.png) and Save changes.
# Follow ""Manage private files..."" in 'Private files' block.
# Click ""Add..."" and select ""Private files""
# Select uploaded file (moodle.png) and create a alias with rename the original file
# Save changes and go back to Manage private files
# Click on original image (moodle.png) to view properties.
# You will observer a proper alias information under""Aliases/Shortcuts""
# Press cancel and click on same image (moodle.png) again
# This time ""Aliases/Shortcuts"" will show html markup.",9,27/10/2015,31/10/2015,4,Bug,Minor,6
MDL-52029,MDL-43839 regression: installer not styled if php shows errors,"moodle/install/css.php contains error code, which tries to open unexistent file. If display_errors and error_reporting is on, error info breaks css. In other conditions error is not seen.",15,4/11/2015,27/11/2015,23,Bug,Minor,7
MDL-52077,Spelling error in unit test exception,"{{advanced_testcase->runBare()}} triggers an ""Unenxpected debugging() call detected"" error; it should trigger an ""Unexpected debugging() call detected"" error. This is trivial, but ought to be fixed.",7,10/11/2015,14/11/2015,4,Bug,Trivial,7
MDL-52105,Useless and incorrectly restrictive CAP_PROHIBIT for 'enrol/self:holdkey',"Raised by [~timhunt] in the [developers chat|https://moodle.org/local/chatlogs/index.php?conversationid=18538], it seems that an ""incorrect"" CAP_PROHIBIT was introduced by MDL-26017, for managers, on 'enrol/self:holdkey', apparently with the wrong assumption of managers being displayed always as key holders.

I've had not time to verify this... but unless I'm wrong:

1) There was not need to set such prohibit @ system level at all. Blank (not set) was enough. Not sure if that came from the old days where admins were returned always or what.

2) That prohibit effectively prevents any manager to be a key holder ever (prohibit always wins). And that seems to be an incorrect restriction, in fact can imagine sites assigning manager roles wanting to be also key-holders, it's not crazy at all.

So this is about to:

a) confirm that it's not needed to have such system level prohibit and verify key-holders functionality works perfectly without it.
b) confirm that managers are allowed to be key-holders.
c) hopefully covered with acceptance tests.

For your consideration, ciao :-)",23,12/11/2015,18/8/2016,280,Bug,Minor,8
MDL-52217,dropbox repository does not clean up in temp download dir,"we have a MoodleCloud site that is using the dropbox repository, it has downloaded the same file (md5sum matches) over 8000 times to moodledata/temp/download/repository_dropbox/ using random filenames but never cleans up after itself. after a week this directory is now 30GB in size and growing.

Is this expected behavior?",27,19/11/2015,19/2/2016,92,Bug,Major,11
MDL-52333,Question type calculate_raw() produces errors on PHP7,Due to PHP7 changes in handling exceptions the method calculate_row() in some questions types generates errors,18,27/11/2015,19/12/2015,22,Bug,Minor,6
MDL-52371,Activity Chooser - alignment of strings that need line wrap,"In the activity chooser, names that are too long are wrapped and the second line begins right at the left of the container:
!activity_long_name_wordwrap_is.png!


It would increase readability if the second line would be adjusted to the padding of the first line:
!activity_long_name_wordwrap_shoul.png!",16,2/12/2015,25/2/2016,85,Bug,Minor,8
MDL-52423,Create a plan summary screen,"We will recycle the page listing the competencies in a plan and add more information to it.

The page currently does not display information about the plan itself, it should contain:

- Due date
- Status (Draft, Active, Complete) (Later we'll add review)
- Option to change the status from here (just like on the plans page)
- Reviewer (Added later when reviews are supported)
- The template the plan is based on, and a link to if the user can view the template.
- A button to unlink the plan from its template (warning required) (MDL-52423)
- A button to edit the plan (cancelling the edit, or saving should return to the plan)

The button to add competencies stays there.

Note that a plan based on a template cannot be modified, it can only be unlinked. Also note that relevant capability checks must be made.",4,7/12/2015,11/12/2015,4,Bug,Minor,3
MDL-52568,"""Missing"" API Web Service function: core_cohort_get_all_cohorts","Surprisingly there doesn¬¥t seem to be a way to get a list of all the cohorts in the system.
The present function core_cohort_get_cohorts requires you to know previously de ids of the cohorts you want to get.

A function has been offered to cover this need [http://stackoverflow.com/questions/31592674/moodle-api-list-all-cohorts], but I believe this should be included in Moodle Core.
",30,21/12/2015,21/1/2016,31,New feature,Minor,8
MDL-52574,get_role_users() fails with specific fields on PostgreSQL,"get_role_users(), without a $sort argument, fails on PostgreSQL when requesting fields that are absent from the default value for the $sort argument.

The default value for the $sort argument (when it is missing from the function call) is returned by the function users_order_by_sql('u') and it is 'u.lastname,u.firstname,u.id'. If any of these fields are missing from the $fields argument for the get_role_users() function call then a  dmlreadexception is thrown.

You can paste the following code snipped in a file located in the moodle root directory to replicate the issue:

{code:php}
<?php
define('CLI_SCRIPT', true);

require(__DIR__ . '/config.php');
require_once($CFG->libdir . '/moodlelib.php');
require_once($CFG->libdir . '/coursecatlib.php');

$courses = get_courses();
// Get the context from the first course in the list, the actual courses doesn't matter.
$firstcoursecontext = context_course::instance(reset($courses)->id);
$roles = get_all_roles();
// Get the role id for the first role in the role list, the actual role doesn't matter.
$firstroleid = reset($roles)->id;
$userfields = 'u.firstname';

$usersassigned = get_role_users($firstroleid, $firstcoursecontext, false, $userfields);
echo ""no exception thrown\n"";
{code}

The snippet should print 'no exception thrown', instead I get a dmlreadexception.

I am using PostgreSQL version 9.2.14 on centos7.
",57,22/12/2015,18/3/2016,87,Bug,Minor,10
MDL-52597,"forum neighbour tests use dirty, nasty, horrible sleep",There are currently 35 x 1 second sleeps in the mod_forum tests. Let's kill them and replace them with DB updates which are faster and less fragile.,11,23/12/2015,1/1/2016,9,Improvement,Minor,6
MDL-52634,Policy: magic __get and __set,"I'm opening this issue to discuss how are should use __set and __get (same should be applicable to __isset and __unset) like any lazy developer I used to like magic methods and I used them a lot to avoid boilerplate code and to reduce maintenance. They are nice when writing code but not nice when reading code from others.

They have some negative points:
# Resulting code is not as readable as normal function names
# Interfaces like $obj->attr when you know you are not dealing with a stdClass are confusing; they are not straight forward to deprecate and, may result in future conflicts if we change the class interface. This is worst when they are public interfaces as we need to maintain backwards compatibility 
# Not ideal during development: IDE autocompletion not working, shared php-doc block... (this last point might be considered good though)
# Slower than normal functions, depending on where they are implemented the difference is significant, I don't think we should use the premature optimisation thing as an excuse here. Performance comparison: http://www.garfieldtech.com/blog/benchmarking-magic

As examples of this we have modinfolib, where we abuse the functionality and results in a significant performance impact as it is a widely used lib in some components.",30,31/12/2015,31/3/2016,91,Task,Minor,13
MDL-52670,New Web Service mod_quiz_get_user_attempts,"Return quiz attempts information for the given user:

Parameteres:
* quizid
* userid (default, current user)
* status (default 'finished')
* includepreviews (default false)",17,7/1/2016,11/3/2016,64,New feature,Major,6
MDL-52696,Better handling of template due date when creating plans,"When creating plans from a template we should:

# Handle due date validation errors during in the scheduled task for template cohorts
# Hide the option to create plans from the UI when the validation of the due date will fail
# Hide the option to add cohorts to templates when the validation of the due date will fail",3,8/1/2016,13/1/2016,5,Task,Minor,3
MDL-52788,New Web Service mod_quiz_start_attempt,"Starts a new attempt at a quiz.

Parameters:
* quizid
* forcenew - to force a new attempt in review mode

Returns:
* attempt id
* attempt unique id
* attempt number
* page (in cases like last attempt page)",18,16/1/2016,18/3/2016,62,New feature,Minor,5
MDL-52849,File picker error messages are not read out in assignment to screen reader users,"From customer at occc.edu.

I have identified two potential error messages. Both of these pertain to submitting to an assignment as a student.

1. Attempting to submit without adding a submission of any type. Notification reads: ‚ÄúNothing was submitted‚Äù.
2. Submitting a txt or word file which is completely blank. Error: The file ‚Äòzzz.txt‚Äô is either empty or a folder. To upload folders unzip them first.

Neither of these messages are announced to screenreader users.",23,21/1/2016,16/8/2019,1303,Bug,Minor,10
MDL-52862,Forum search results not correctly formated when message format is not HTML,"To reproduce:

* Set your editor preferred text editor to Plain text area
* Add a new discussion to a forum
* Choose ""Plain text format"" for the message
* Write the following text:
{code}
one
two
three
{code}
* Post to forum
* Search in the forum the word ""one""

What you get in the results is the message you've just posted with html tags.

Maybe it's possible to reproduce this behaviour with other formats. Other versions may be affected too.",13,22/1/2016,19/2/2016,28,Bug,Minor,6
MDL-52981,PHPunit: Does not preserve $FULLME,"I had to spend quite a long time tracking down a PHPunit failure in a local plugin which only occurred if it was run as part of all unit tests - it passed individually.

Eventually I traced this to the weblib_test.php test_qualified_me function, which causes the global $FULLME to be set. For some reason (I don't actually understand why but don't think it matters), my test failed after that happened.

The unit test system preserves the main global variables, but does not preserve $FULLME. I think the best fix is to change the test system to preseve $FULLME in the same way. This is a simple fix; I'll submit a patch.",11,4/2/2016,12/2/2016,8,Bug,Minor,6
MDL-55827,PHP7.1 incorrect number of arguments can no longer be suppressed with @,"we have failures on PHP 7.1 similar to this (see full unittest results on issue MDL-55120):
{code}
8) core_moodlelib_testcase::test_clean_param_array
Error: Too few arguments to function clean_param_array(), 1 passed in /home/moodle/moodles/m/moodle/lib/tests/moodlelib_test.php on line 428 and at least 2 expected

/home/moodle/moodles/m/moodle/lib/moodlelib.php:752
/home/moodle/moodles/m/moodle/lib/tests/moodlelib_test.php:428
/home/moodle/moodles/m/moodle/lib/phpunit/classes/advanced_testcase.php:80

To re-run:
 vendor/bin/phpunit core_moodlelib_testcase lib/tests/moodlelib_test.php
{code}",9,1/9/2016,24/9/2016,23,Task,Minor,5
MDL-55992,Debugging Notice:  Fields list in snapshot record does not match fields list in 'external_tokens'. ,"
php[6240]
Debugging: Fields list in snapshot record does not match fields list in 'external_tokens'. Record is missing fields: sid, iprestriction, lastaccess in 
* line 876 of \lib\classes\event\base.php: call to debugging()
* line 201 of \login\token.php: call to core\event\base->add_record_snapshot()",6,17/9/2016,9/11/2016,53,Bug,Minor,7
MDL-56057,Manage global search page incorrectly reports search areas as disabled in a new 3.2 site,"The problem is that enabled search areas are not a standard admin_setting any more, the API defaults to enabled if there is no value and it is working properly, but admin_setting_searchsetupinfo page (admin/settings.php?section=manageglobalsearch) reports it incorrectly as it is checking directly the var's contents.

This is a regression introduced in MDL-53222.",15,22/9/2016,21/10/2016,29,Bug,Minor,6
MDL-56093,Auth DB does not sync custom fields from external DB to local moodle DB,"Expected: field matching would sync fields both ways
Actual: field matching only syncs fields internally to external DB

# setup auth_db with external db
# set up field matching in settings
# run cron

I have actually done the work required to get this working, so I was more or less putting this out there to know what the next steps are, or if I have completely misunderstood something about the plugin.",60,23/9/2016,13/7/2018,658,Bug,Major,16
MDL-56144,Boost: theme preview image overflows at the theme selector page,See the attached screenshot.,3,28/9/2016,10/10/2016,12,Task,Minor,3
MDL-56181,"CZ shortname has been renamed to Czechia by ISO, letter case typo in CI","https://www.iso.org/obp/ui/#iso:code:3166:CZ

Effective date of change:
2016-09-28	
Short description of change (en):
Change of the short name

https://www.iso.org/obp/ui/#iso:code:3166:CI",8,30/9/2016,7/10/2016,7,Task,Minor,6
MDL-56272,Boost theme form elements do not differentiate freeze from hardFreeze,"When editing an external blog trying to save the changes results in an error:
Undefined index: url in /home/vagrant/moodles/integration_master/moodle/blog/external_blog_edit_form.php on line 82

Seems to be complaining about the feed URL (which is already preset and isn't editable).

Editing works fine on the clean theme

Steps to replicate:
# Go to the user menu (top right hand corner) and select 'preferences'.
# Click on 'External blogs' (Blogs).
# Click 'Register an external blog'
# Find an rss feed from somewhere and fill in the details.
# Edit the external blog you just added
# Change the description and try to save it
# You should get the error mentioned above.

Discovered while testing MDL-56001",29,5/10/2016,28/10/2016,23,Bug,Critical,8
MDL-56380,Clicking link in the contact information takes browser to top of page,"# Log in as anyone.
# Click on 'Messages' in the user menu.
# Click on the 'Contacts' tab.
# Click on a contact or use the search to find another user to click on.
# Scroll down the page a bit so you are not at the top of the browser (may have to zoom in if you are on a large screen).
# Click on the link 'View messages'.
# Confirm you are not taken to the top of the page.
# Repeat for the links 'Block (or Unblock') contact' and 'Add (or 'Remove') contact'.",9,12/10/2016,28/10/2016,16,Bug,Critical,7
MDL-56450,"Improve group submissions: Presentation of the error message for students when ""Require group to make submission"" is set to Yes and member in more than one group","Hi,
this issue is related to MDL-50526 and MDL-50524
I've discovered that the existent error message do not fit into the cell height:
!student_error_more_than_one_group.png! 

This should be fixed so that the alert box fits into the cell.
Furthermore, it would be convenient, if the student gets an information box, analogous to the display of the teacher that explains, why it is a problem, that the user is member of more than one group.
Teacher's text-box:
!teachers_message.png! 

The box could say something like that:
""The assignment requires submission in groups. You are a member of more than one group. To be able to submit you must be member of exactly one group so that your submission can be mapped correctly to your group. Please contact your teacher to get enrolled in a group.""

Cheers, 
Kathrin",2,15/10/2016,28/1/2017,105,Improvement,Minor,6
MDL-56535,Post author information shouldn't be returned by WS is the author must be hidden,This is a follow up of MDL-18599 that it seems misses the changes in the Web Services to not return the author and profile image.,5,21/10/2016,9/11/2016,19,Bug,Minor,5
MDL-56583,Can edit submission status is not using same conditions between WS and web view,"When rendering new assignment grading interface there's a parameter that shows the teacher whether the user can edit its own submission or not. This cause that mobile and website not having the same status.

For WS the condition involves:
{code}
$showedit = $showlinks &&
                    ($this->is_any_submission_plugin_enabled()) &&
                    $this->can_edit_submission($user->id);
{code}

For Web views (including: assign_submission_status and assign_submission_status_compact).
{code}
if ($this->can_view_submission($userid)) {
    $showedit = $this->submissions_open($userid) && ($this->is_any_submission_plugin_enabled());
}
{code}

I think the problem is on WS. can_edit_submission function says: Capability check to make sure this grader can edit this submission. So it's not about the user to edit its own submission.

It probably needs some backporting.

Thanks [~barbararamiro] for spotting that! :-D",12,25/10/2016,2/11/2016,8,Bug,Major,8
MDL-56602,Boost dramatically slows down install/upgrade,"Because boost recompiles on every page, it makes install/upgrade very slow. It would be nice if there was a way around this.",33,27/10/2016,12/11/2016,16,Bug,Blocker,7
MDL-56633,Activities of type label are centered in boost,"conflict with rule
{code}
.label {
  text-align: center;
}
{code}",6,28/10/2016,2/11/2016,5,Bug,Minor,6
MDL-56726,$CFG->admin ignored when requiring other scripts ,"While peer-reviewing MDL-53945 I spotted three more non-mnet places where we incorrectly include scripts from /admin without respecting $CFG->admin.

{code}
admin/tool/monitor/index.php:require_once($CFG->dirroot . '/admin/tool/monitor/lib.php');
theme/boost/tests/behat/behat_theme_boost_behat_admin.php:require_once(__DIR__ . '/../../../../admin/tests/behat/behat_admin.php');
theme/boost/classes/output/core/admin_renderer.php:require_once($CFG->dirroot . '/admin/renderer.php');
{code}
{code}",9,4/11/2016,12/11/2016,8,Bug,Minor,7
MDL-56769,"theme_boost - change item ""course administration"" to ""More..."" in cog dropdown","Found while testing MDLQA-9949:

In boost the administration block was replaced with the new cog.  Some items that were in the administration block are no-longer available in this cog.  Specifically the enrollments (users), reports, badges, and question bank.

See the attached screenshots:",12,6/11/2016,16/11/2016,10,Bug,Critical,9
MDL-56808,Javascript low performance when commiting,"Hello all,

I work for the CNED in France. They have a big Moodle platform with a lot of SCORM packages.

Ultimately they have worked on a bunch of HTML5 SCORM 1.2 packages.

All those package pages have navigation buttons at the bottom. When someone click on next or previous button, the package commit to save the progression, time, ... and load a new page. 

The packages have dizains of pages so the users navigate heavily between the pages. It has been reported to use that changing pages could take more than 5s on latest firefox or chrome. The performance issue being much more visible in Chrome. 

I first though it was a server performance problem  but quickly understood that it wasn‚Äôt. The commit (POST to ajax_save_item.php) takes less than 300ms. 

I thus began to debug with the firefox javascript profiler. 

As you can see in my first screenshot (screenshot_scorm_wo_opti.png), it is the CollectData function in the scorm12.js that takes 32% of the execution time. And the most important, the other process won't begin while this one is not finished. The user has thus to wait 2 to 5 s to open the next page.

We inspected the function and saw that it was calling a few eval. We thus simply replace those evals (like in the patch attached) and ran the profiler again.

As you can see in the screenshot named screenshot_scorm_with_opti.png, the CollecData function doesn't appear anymore and the whole process is a lot faster. Use has now to wait less than a second. 

We have tested and tracking still seems to work. I think I didn't break anything but can't be sure.

Question are : 
- Is there a reason for those eval in CollectData function? 
- Is it dangerous to replace them? 

Thanks in advance for your time. 

Bets regards. 

Noel Dieschburg",25,8/11/2016,2/2/2017,86,Improvement,Major,10
MDL-56945,No easy back from PDF grading screen to list of submissions,"It's very cumbersome using the PDF grading screen because it's hard to get back from that screen. 

On completion of grading, you press save but there is no 'close' option and the breadcrumbs at the top don't lead anywhere useful. The link for the Assignment leads back to the main page and the marker then has to click 'View all submissions"" again (every time) to see the list. With assignments with large numbers of submissions refreshing these pages is slow. 

This leads markers to naturally use the back button, causing even more confusion",12,15/11/2016,5/1/2018,416,Improvement,Minor,8
MDL-57087,Site containing a site policy hides messaging icons for admin,"# Add a site policy to your site.
# Notice the messaging icons disappear for the admin.",8,22/11/2016,26/11/2016,4,Bug,Blocker,6
MDL-57163,Fatal error during installation if PHP curl extension is not installed,"*Steps to reproduce:*
1) Start installing Moodle on the system without curl PHP extension (in my case it was a Debian Linux box without php5-curl package installed).
2) After accepting license agreement you get redirected to ""Server checks"" page (/admin/index.php?cache=0&lang=en&agreelicense=1). 

*Expected behavior:*
The page should load properly and display the information about missing curl extension.

*Actual behavior:*
In production environment this page is blank (because of disabled error reporting in PHP). In development environment with E_ALL error reporting level this page displays the following error:
{quote}PHP Fatal error:  Call to undefined function curl_version() in /path/to/moodle/lib/upgradelib.php on line 2334{quote}

The problem is caused by changes introduced recently in MDL-55777:
https://github.com/moodle/moodle/commit/f2330472f0963985deb34ca72ee2b33a6d4358b7#diff-ec328f1a30e59aed57fc4f0555f82f44R875

The proposed fix (updated):
https://github.com/vvzh/moodle/commits/MDL-57163-undefined-function-curl_version",27,26/11/2016,30/11/2016,4,Bug,Major,6
MDL-57168,Behat failures in 3.2 RC2,"Last week after MDL-56586 and other got integrated, there were few behat failures left.

# Master Boost
#- [Parallel run|http://nightly.test.in.moodle.com:8080/job/M.08%20Run%20all%20behat%20features%20in%20firefox-linux%20-%20Parallel/674/console]
#- [Single run|http://nightly.test.in.moodle.com:8080/job/M.17%20Run%20all%20behat%20features%20in%20firefox-linux%20(Single%20run)/280/console]
# [Master Clean|http://nightly.test.in.moodle.com:8080/job/M.21%20Run%20all%20behat%20features%20in%20firefox-linux%20-%20Parallel%20-%20Clean/37/console]",18,28/11/2016,30/11/2016,2,Bug,Minor,5
MDL-57169,Debugging message shown when restoring a backup into a category with an image in the description,"Steps (with debug active):
# Insert an image in category description
# Start a restore by course backup
# The debug error message is displayed

=========================================================
Before calling format_text(), the content must be processed with file_rewrite_pluginfile_urls()
    line 1313 of /lib/weblib.php: call to debugging()
    line 746 of /backup/util/ui/renderer.php: call to format_text()
    line 319 of /lib/outputrenderers.php: call to core_backup_renderer->render_restore_category_search()
    line 283 of /backup/util/ui/renderer.php: call to plugin_renderer_base->render()
    line 535 of /backup/util/ui/restore_ui_stage.class.php: call to core_backup_renderer->course_selector()
    line 129 of /backup/restore.php: call to restore_ui_stage_destination->display()
=========================================================

In order to fix it:
In file */backup/util/ui/renderer.php* change the next lines (method *render_restore_category_search*):

{code:php}
                $row->cells = array(
                    html_writer::empty_tag('input', array('type' => 'radio', 'name' => 'targetid', 'value' => $category->id)),
                    format_string($category->name, true, array('context' => context_coursecat::instance($category->id))),
                    format_text($category->description, $category->descriptionformat, array('overflowdiv' => true))
                );
{code}

By:
{code:php}
                $context = context_coursecat::instance($category->id);
                $row->cells = array(
                    html_writer::empty_tag('input', array('type' => 'radio', 'name' => 'targetid', 'value' => $category->id)),
                    format_string($category->name, true, array('context' => context_coursecat::instance($category->id))),
                    format_text(file_rewrite_pluginfile_urls($category->description, 'pluginfile.php', $context->id, 'coursecat', 'description', null), $category->descriptionformat, array('overflowdiv' => true))
                );
{code}

",11,28/11/2016,4/12/2016,6,Bug,Minor,6
MDL-57171,Boost: Use Bootstrap classes for the labels in the Status column of the Server checks/Environment pages,"The labels for the Status column in the ""Server checks"" page and ""Environment"" admin page can be improved to use the Bootstrap classes (e.g. ""label label-success"", ""label label-warning"". etc).

See comparison with some labels with the ""label label-success"" class applied:
 !screenshot-1.png|thumbnail! ",17,28/11/2016,16/12/2016,18,Bug,Minor,6
MDL-57207,Redundant call to .popover() in LTI's tool_configure_controller,"Since MDL-56784 was integrated. It's no longer necessary to call {{.popover()}} to initialise popovers added to the DOM after page load. In LTI we have:

{code:javascript|title=mod/lti/amd/src/tool_configure_controller.js:}
    var screenReaderAnnounce = function(element) {
        var children = element.children().detach();
        children.appendTo(element);
        $('[data-toggle=""popover""]').popover();
    };
{code}

The {{$('[data-toggle=""popover""]').popover();}} is now redundant.",12,30/11/2016,4/12/2016,4,Bug,Minor,6
MDL-57220,radio buttons in mform are badly aligned,"Copy the attached file in your head root.
Navigate it and look at the left alignment of mform elements. (If you have no time and trust me, a screenshot is attached too.)
IMO line 232 of head/theme/boost/scss/bootstrap/_forms.scss
should be changed from
padding-left: 1.25rem;
to
padding-right: 1.25rem;",11,30/11/2016,4/12/2016,4,Bug,Minor,8
MDL-57274,Moodle 3.2 notices during installation,"Moodle 3.2 installation shows following notices on the screen of database engine selection:

Notice: Undefined property: stdClass::$curlsecurityallowedport in /var/www/moodle32/moodle/lib/classes/files/curl_security_helper.php on line 238

Notice: Undefined property: stdClass::$curlsecurityblockedhosts in /var/www/moodle32/moodle/lib/classes/files/curl_security_helper.php on line 250

Notice: Undefined property: stdClass::$curlsecurityallowedport in /var/www/moodle32/moodle/lib/classes/files/curl_security_helper.php on line 238

Notice: Undefined property: stdClass::$curlsecurityblockedhosts in /var/www/moodle32/moodle/lib/classes/files/curl_security_helper.php on line 250",27,6/12/2016,24/2/2017,80,Bug,Minor,10
MDL-57379,get_file_argument() should be more clever when dealing with slashargs,"some files inside scorm packages will add use parameters to pass information to flash files - and in one case I've seen a SCORM package that includes the word ""file"" as a parameter.

for example - a file could be loaded like this:
.../pluginfile.php/3854/mod_scorm/content/1/swf.html?file=video_.swf

get_file_argument grabs the ""file"" param first and tries to find the file ""video_.swf"" 

get_file_argument should be more clever about detecting when a path including slash arguments has been passed.

here's a report relating to articulate packages that do this:
https://community.articulate.com/discussions/articulate-storyline/swf-interactive-animation-wont-open-in-a-new-window#reply-386474",34,14/12/2016,24/2/2017,72,Bug,Minor,7
MDL-57412,"Respect ""linkcoursesections"" setting in boost","In Site administration >Appearance>Navigation, the setting ""Always link course sections"" linkcoursesections does not change whether the option is ticked or not. Previously you could decide whether or not sections would be linked. Now - whether you use Boost or Clean, it appears the sections are always linked. 
Is this a regression or deliberate? If deliberate, then the setting should be removed. If it's a regression, then it would be good to have it fixed as it has been noticed in the forums -see https://moodle.org/mod/forum/discuss.php?d=344429#p1388768",36,16/12/2016,25/8/2017,252,Bug,Major,10
MDL-57432,Decide Moodle 3.4 requirements and push them to environment.xml (due date: 29/05/2017),"We need to decide ASAP about all the PHP/DB/Moodle versions requirements and put all them into the environmental tests (adding them to all supported branches).

All the still open linked issues have been cloned here from the 3.3 sister issue (MDL-54901).

Usual discussions:

- PHP min. version/[supported versions|https://secure.php.net/supported-versions.php].
- database versions.
- Linked issues.
- ...

Feel free to propose areas to be discussed here. A numbered list with all them will be created to vote and decide the final outcomes of this issue.

TIA and ciao :-)",92,19/12/2016,15/7/2017,208,Bug,Minor,23
MDL-57433,Remove block_course_overview block,"There is another issue to add this to the plugins DB.

See https://docs.moodle.org/dev/My_course_overview_improvements#Questions_for_the_Integrators.",12,19/12/2016,22/12/2016,3,Task,Minor,4
MDL-57442,Component that created the calendar event needs to supply action details ,"# How to phrase, link, count ... 
# Is there a visibility override (e.g. can the user see this event?)
# Is the action completed by the user?

Will most likely use _component_callback()_. Possibly multiple callbacks will be responsible for this (callback, closure, etc...).

See https://docs.moodle.org/dev/My_course_overview_improvements#Todo_API",12,19/12/2016,16/2/2017,59,Task,Minor,4
MDL-57557,Remove moodle-calendar-info and replace with bootstrap popovers,"The current moodle-calendar-info is yui, adds two http requests to each page when the calendar block is visible and is quite out of style.

It can be replaced with bootstrap tooltips

 !Screen Shot 2017-01-02 at 15.02.26.png|thumbnail! ",18,3/1/2017,12/3/2017,68,Improvement,Minor,6
MDL-57576,"Error ""Can not create file"" when sending the same feedback file to a student.","If you try to resend the same feedback file to a student, it fails due to:

ERROR: duplicate key value violates unique constraint ""mdl_file_pat_uix""

The probable cause is not checking if the user already has that file before trying to copy again.

To reproduce:

1) Create an assignment (allow sending feedback files)

2) Select a student, send any file as a feedback file -- it should succeed.

3) Try again, same student, same file -- it should fail.",12,5/1/2017,24/2/2017,50,Bug,Minor,5
MDL-57586,Change $workshop variable from protected to public in class,"In mod/workshop/locallib.php, class workshop_user_plan, the property $workshop is already public.

In class workshop_assessment_base, May we change $workshop from protected to public.

It will help override renderers in theme to access data easier instead of getting from Database

",15,7/1/2017,2/2/2017,26,Improvement,Trivial,7
MDL-57648,New Web Service mod_lesson_get_questions_attempts,"Return the list of page question attempts in a given lesson.

Parameters:
- retries: the lesson attempt number
- pageid: to retrieve attempts only for the given page
- correct: to retrieve only correct attempts
- userid: to retrive only attempts for the given user",11,14/1/2017,24/3/2017,69,New feature,Minor,6
MDL-57851,Few scenarios fail on slow machine,"Following failures has been observed on nightly because of slowness.

https://integration.moodle.org/job/M.11%20Run%20all%20behat%20features%20in%20phantomjs-linux/764/console
{noformat}
001 Scenario: Add questions from question bank to the quiz. In order to be able to
  add questions from question bank to the quiz, first we create some new questions
  in various categories and add them to the question bank. # /store/moodle/behat_whole_suite_m_phantom/mod/quiz/tests/behat/editing_add.feature:106
      And I set the field ""item_qtype_essay"" to ""1""                                                                                                                                                                              # /store/moodle/behat_whole_suite_m_phantom/mod/quiz/tests/behat/editing_add.feature:145
        {""errorMessage"":""Element is not currently visible and may not be manipulated"",""request"":{""headers"":{""Accept-Encoding"":""gzip,deflate"",""Connection"":""Keep-Alive"",""Content-Length"":""27"",""Content-Type"":""application/json; charset=utf-8"",""Host"":""localhost:24418"",""User-Agent"":""Apache-HttpClient/4.5.1 (Java/1.8.0_111)""},""httpVersion"":""1.1"",""method"":""POST"",""post"":""{\""id\"":\"":wdc:1485955789629\""}"",""url"":""/click"",""urlParsed"":{""anchor"":"""",""query"":"""",""file"":""click"",""directory"":""/"",""path"":""/click"",""relative"":""/click"",""port"":"""",""host"":"""",""password"":"""",""user"":"""",""userInfo"":"""",""authority"":"""",""protocol"":"""",""source"":""/click"",""queryKey"":{},""chunks"":[""click""]},""urlOriginal"":""/session/7ec3e090-e876-11e6-8626-754624160858/element/:wdc:1485955789629/click""}}
        Build info: version: '2.53.1', revision: 'a36b8b1', time: '2016-06-30 17:37:03'
        System info: host: 'nightly', ip: '127.0.1.1', os.name: 'Linux', os.arch: 'amd64', os.version: '3.13.0-91-generic', java.version: '1.8.0_111'
        Driver info: driver.version: unknown (WebDriver\Exception\ElementNotVisible)

002 Scenario: Remove a section      # /store/moodle/behat_whole_suite_m_phantom/mod/quiz/tests/behat/editing_section_headings.feature:127
      Then I should see ""Heading 1"" # /store/moodle/behat_whole_suite_m_phantom/mod/quiz/tests/behat/editing_section_headings.feature:153
        Javascript code and/or AJAX requests are not ready after 10 seconds. There is a Javascript error or the code is extremely slow. (Exception)
{noformat}

https://integration.moodle.org/job/M.14%20Run%20all%20behat%20features%20in%20chrome-linux/615/console
{noformat}
001 Scenario: Preview a question using the mouse.                              # /store/moodle/behat_whole_suite_m_chrome/question/type/ddimageortext/tests/behat/preview.feature:28
      Then the state of ""Identify the features"" question is shown as ""Correct"" # /store/moodle/behat_whole_suite_m_chrome/question/type/ddimageortext/tests/behat/preview.feature:45
        Question ""Identify the features"" state is not ""Correct"" (Behat\Mink\Exception\ExpectationException)
{noformat}",10,2/2/2017,10/2/2017,8,Bug,Minor,5
MDL-57975,Add mustache helpers for user date,"We need mustache helpers to properly format course start and end dates.

Accordingly to the prototype, those dates must be formatted as Feb 15, 2017 (Mon Day, Year).

Also the course-summary template needs to be updated to use this new helper.",21,15/2/2017,12/3/2017,25,Task,Major,8
MDL-58017,Create the calendar action events required for the quiz activity,"h2. Events required:

h3. Student
* If you specify a date+time for the ‚ÄòOpen the quiz‚Äô field, an event is created on that day. The action url should appear disabled until this date+time has passed
* If you specify a date+time for the ‚ÄòClose the quiz‚Äô date an event is created on that day. The action url should appear enabled for the period up until this date+time has passed
* If both the 'Open the quiz' and 'Close the quiz' values are set then an action event should be created where the sort time is the 'Close the quiz' field. The action url should appear enabled during the period between the 'Open the quiz' and the 'Close the quiz' times
* Standard activity completion event required (if activity completion is specified) unless any of the other events are created.
* Create an action event that when the user received a ""user override"" with the same rules as above
* Create an action event that when the user received a ""group override"" with the same rules as above

h3. Teacher
* None as best I can tell
",5,20/2/2017,24/3/2017,32,Task,Critical,5
MDL-58110,Template contains broken link to activities,The action events that get displayed on the dashboard contain an incorrect link.,12,1/3/2017,17/3/2017,16,Bug,Minor,5
MDL-58116,Emails are being sent by noreply emailaddress even if it shoud not.,"Emails are being sent by moodle with the noreply emailaddress instead of the user emailaddress.
The cause is that the users are not enroled with the same enrolment method.

Prereqs:
The teacher have got an emailadress with an allowed domain to send emails from.
The teacher and the student are not together in a course.
The student set up the notification preferences to get subscribed forum posts via email on- and offline.

Test steps:
1. Enrol a teacher in a course with manual enrolment
2. Enrol a student in a course with another enrolemnt mehtod may be with global groups
3. In the course, the teacher set up a forum with auto subscription
4. The teacher is posting a message in the forum.
5. The student will get the forum post via email and recognize that the post was sent via noreply address instead of the emailaddress of the teacher.

Cause:
The function call of enrol_get_shared_courses in the function can_send_from_real_email_address returns only ""true"" if the users are enrolled by the same enrolment method.
",22,2/3/2017,22/4/2017,51,Bug,Major,8
MDL-58166,Students are unable to view submissions to assignments with marking workflow and allocated markers,"Since deploying -MDL-57766- our students are unable to view submissions on assignments with workflow enabled. They get 'nopermissiontocomment' error thrown.

When viewing the assignment, list_participants returns an empty array as the allocatedmarker filter SQL-side is set to the student's ID (USER->id) which is incorrect.

See here: [https://github.com/moodle/moodle/commit/609d5f18266a7fdc721303c864e54e973afe8a1d#diff-c78f4d657da22cf5ddfb4d13335bb97eR1613]",24,7/3/2017,24/3/2017,17,Bug,Major,8
MDL-58236,Events should not display if there is nothing to do,"If you create an assignment activity with grading due date set, it displays in the overview for a teacher even when no students have submitted anything.

There should probably be a check somewhere that stops events displaying if the actioncount is 0.",3,13/3/2017,15/3/2017,2,Task,Minor,4
MDL-58301,Show overdue events,"We need to display any overdue events to the user at the top of the Timeline (when sorted by date).

 !s2 timeline courses ‚Äì overdue.png|thumbnail! 

There is a cost/benefit decision to be made here.

Unfortunately, in order to fetch the events, we need to fetch a number of events, and then filter out any events which are no longer relevant.
Whilst fetching from the database has a relatively low fixed cost, the filtration can be expensive and is dependant upon the individual module, and activity completion criterion.
In addition, it is not feasible to cache which events are or are not completed for a user (because there are many factors which determine whether an activity can be complete and not all of these stem from specific actions).

Generally speaking, we expect a majority of past events to have been completed.
If we were to go back and fetch all overdue events, we would have to process all past events to determine whether they have been completed or not.

Therefore we feel it is sensible to limit the time period to go back for to a shorter period of around 7-14 days.

One of the features of the timeline is to highlight the critical information first. Going too far back in time has a decreasing benefit as it could be argued the activity is less likely to be completed the more overdue it is.
There's also little benefit to increasing the total limit of events to show (currently 20) for the same reason.",5,17/3/2017,22/3/2017,5,Improvement,Minor,4
MDL-58434,Numeric question type is not showing correctly user responses when are wrong,"In the detailed statistics view for one user attempt, the user response for numerical question types is not being displayed. This is only happening for incorrect responses.

This is causing some issues as described in MDL-57757",8,30/3/2017,6/5/2017,37,Bug,Major,6
MDL-58478,Upgrade settings for auth_oauth2,"The settings page for oauth_oauth2 were deprecated about an hour after they were integrated. See MDL-55820 and MDL-12689.

¬†",11,4/4/2017,19/4/2017,15,Bug,Minor,7
MDL-58497,Forum always shows 1 for itemcount,The forum activity will always show 1 for the item count and it is always visible to the user. It seems like it should either be a count of the unread posts (if that matches the completion criteria set) or the item count shouldn't be visible to the user (we don't show the item count for any other activity when it is 1).,18,5/4/2017,6/5/2017,31,Bug,Major,7
MDL-58512,The online users block pop-up for messaging does not translate the string 'changesmadereallygoaway',"In Moodle 3.1 (likely 2.9 to 3.1, but have not tested fully), on the Online Users block, click the chat bubble icon next to a person's name to message them.

It pops up an overlay message box on the page where you can type in a message to that person. (https://tracker.moodle.org/browse/MDL-48933)

If you type in part of a message, then click the x on that overlay box¬†it pops up a confirmation message, I believe¬†moodle-core-notification-confirm with the message string for¬†changesmadereallygoaway. The problem is rather than displaying the text of the string ""You have made changes. Are you sure you want to navigate away and lose your changes?"", it displays the literal text ""[[changesmadereallygoaway,moodle]]""

¬†",14,6/4/2017,19/4/2017,13,Bug,Minor,6
MDL-58544,Add option to trust email of an oauth provider,"As discussed last week.

The use case: institution uses Google for their domain, google oauth provider can be considered trusted for that domain. The administrator should have the option to enable 

When an account is created it should be possible for the user to SSO and login and not be sent to  check their email for confirmation.",21,10/4/2017,15/7/2017,96,Improvement,Minor,8
MDL-58560,Lesson uses wrong icon for question moves,"Found while testing MDLQA-10447 and MDLQA-10444:

When adding questions to the lesson module, the move icon displayed in Boost shows the crosshair rather than the up/down arrows.  This icon suggests that the user can drag / drop the item rather than having to click move and select a target.

NOTE: clean is not affected.

See the attached screenshots",8,11/4/2017,19/4/2017,8,Bug,Minor,6
MDL-58867,Fatal errors when trying to create an action calendar event outside of the module,"Displaying action calendar events for dashboard is currently only supported for the modules.

However there is already some code that checks if modulename is empty or not and performs different logic if it is empty.

If plugin defines an action event on the course level and specifies timesort, there are no errors/warnings while creating an event. When trying to view dashboard the ""undefined"" popups show up or there are fatal errors. When digging deeper one can find fatal PHP errors that terminate the script execution and WS calls return empty result.
 I'm submitting a patch that at least avoids the fatal errors for the plugin devs who will try to do the same.

To reproduce:
 # pick only the second commit from [https://github.com/moodle/moodle/compare/master...marinaglancy:wip-MDL-58867-test]
 # create or edit a course in ""Weeks"" format
 # login as a student - you will see fatal errors on the dashboard and when viewing calendar
 # if you change the type of the event in the code from CALENDAR_EVENT_TYPE_ACTION to CALENDAR_EVENT_TYPE_STANDARD and then edit the course again and save (so that calendar event is updated) there will be no errors for student.",10,10/5/2017,13/5/2017,3,Bug,Minor,5
MDL-59253,New Web Service mod_workshop_get_grades_report,To retrieve the assessment grades report,9,15/6/2017,7/10/2017,114,New feature,Minor,6
MDL-59274,Upgrade Video.JS to 6.3.2 and videojs_youtube to 2.4.0,"The latest stable now is 6.1.0 ([https://github.com/videojs/video.js/releases/tag/v6.1.0], also see [conversation on VideoJS blog|http://disq.us/p/1jm90t4])

This is also an opportunity to introduce HLS and MPEG-DASH support (using corresponding extensions), as well as RTMP (by resolving¬†MDL-58065¬†that depends on VideoJS upgrade to version 6) in core Moodle.

Notice, that flash support has become an extension in 6.0.0> (https://github.com/videojs/videojs-flash)

edited: latest versions at the moment are: *Video.JS 6.3.2 and videojs_youtube 2.4.0*",21,17/6/2017,14/10/2017,119,Task,Major,7
MDL-59311,When duplicating module the course cache is rebuilt twice,Noticed while looking at MDL-59300 - that's a performance problem. Rebuilding course cache on large courses can take long time.,17,22/6/2017,4/8/2017,43,Bug,Minor,5
MDL-59411,When activity is restricted and student follows URL Moodle should display why it is restricted,"This was raised on the forum
https://moodle.org/mod/forum/discuss.php?d=353131#p1427834

If activity has access restriction and the access restriction message is not hidden from the course page, access restriction is still not shown to the student if they try to access activity by URL

This is how the activity looks for the student on the course page:
!oncoursepage.png!

This is what they see if they follow URL directly (URL may be inserted by teachers in the text somewhere):
!when_following_url.png!

This has become more important in Moodle 3.3 with the introduction of stealth activities and removing ""orphaned sections"" functionality

{quote}If the user clicks on the label containing the cert icon too early, they are brought to the section and see the access restrictions and the reason they can't download it yet. If we linked to the cert directly, users would just see a message that this activity is hidden and no explanation as to why they can't get their cert.{quote}",10,29/6/2017,21/7/2017,22,Bug,Minor,6
MDL-59515,Order of messages in message notification popup is random,"The order of messages in the message popup is random.
h3. Steps to reproduce
h4. Assumptions
 * A user that has had many other users message them

h4. Steps to reproduce
 # Login to Moodle as the user
 # Open the messages notification draw
 # Note the order of the messages
 # Refresh the page
 # Note that the order of the messages is likely to have¬†changed

We would expect the order to be consistent and the same as the order in the AJAX response that is being rendered.

Having looked at MessagePopoverController.prototype.renderMessages in /messages/output/popup/message_popover_controller.js it looks like there might be a race condition going on with the promises.

Specifically each message is rendered in parallel and then immediately attached into the page (which means that which ever one finishes rendering first is added first)

I think the code needs to be changed so that the rendered messages are attached sequentially¬†attached to the page after they have all been rendered.",27,13/7/2017,21/7/2017,8,Bug,Minor,7
MDL-59649,Invalid response value detected: content3 in mod_data_get_entries,"When testing a database using the content3 field to store data:

{""exception"":""invalid_response_exception"",""errorcode"":""invalidresponse"",""message"":""Invalid response value detected"",""debuginfo"":""entries => Invalid response value detected: contents => Invalid response value detected: content3 => Invalid response value detected: Invalid external api response: the value is \""\"", the server was expecting \""bool\"" type""}

This seems to happen only in databases imported or updated from Moodle 1.x (new versions seems to not use content3 or content4), or maybe using a field plugin.",9,29/7/2017,4/8/2017,6,Bug,Major,5
MDL-59672,Creating a new event while viewing a course calendar should default to the course event type,"When clicking the ""new event"" button while viewing a specific course calendar the form should default to the event type being ""course"" and the current course selected.",11,1/8/2017,8/9/2017,38,Improvement,Minor,6
MDL-59699,Add course name link to summary modal,"On stables, the UI displays a link to the course that events belongs to.

The summary modal needs to display the course name as a link on summary modal for course events.¬†

REMEMBER: Add behat steps to check that.",18,3/8/2017,25/8/2017,22,Task,Minor,5
MDL-59728,Question Bank screen doesn't line up,"Latest weekly of 3.3 (2017051501.03)

The items in the question bank screen are not aligned with the headings, in Boost theme anyway

See attached image",9,5/8/2017,11/8/2017,6,Bug,Minor,6
MDL-59746,OAuth 2: upgrade_token does not urlencode parameters,"Nextcloud creates authorization codes (grants) as strings of the form {{+mdDIGjYe8en1p5y7fMI/Vwc3SOgrD5NOmTj40vQTKsffMHXp5ZvQxRIaz4e2a+CtBg3lzj3/QaUpIhl8z0SrzHpI1GSUc8EIr8dvA324B7p54QARCuyU+aEMK3K+Ayw}}.

When Moodle upgrades this grant to obtain an access token, it sends this string (and client ID, secret) as-is, taking care only of ""&"" as a special character. Nextcloud urldecodes this string and replaces all occurrences of {{+}} with spaces, thus rendering the token invalid.

¬†",11,8/8/2017,18/8/2017,10,Bug,Minor,5
MDL-59921,Add course search/filter,"I should be able to quickly find and select any other calendar I can create events in by searching.
",22,24/8/2017,14/10/2017,51,Improvement,Blocker,5
MDL-60003,Ignore samples with all indicator calculations = null,A samples with all indicator calculations with value null is not worth using for training nor prediction because it will train nothing and will get random predictions.,9,1/9/2017,7/10/2017,36,Improvement,Major,4
MDL-60088,Pin the travis docker image for stables,"We need to pin the travis docker image that is used for stables at the time of release and code freeze. This is to avoid some of the issues we've seen recently where they've broken the image,",12,11/9/2017,28/6/2019,655,Task,Critical,5
MDL-60129,Not all activites support deleting tags during course reset,"{noformat}
mod/book/lang/en/book.php:$string['tagsdeleted'] = 'Book tags have been deleted';
mod/forum/lang/en/forum.php:$string['tagsdeleted'] = 'Forum tags have been deleted';
mod/glossary/lang/en/glossary.php:$string['tagsdeleted'] = 'Glossary tags have been deleted';
mod/wiki/lang/en/wiki.php:$string['tagsdeleted'] = 'Wiki tags have been deleted';
mod/wiki/lib.php:                $status[] = array('component' => $componentstr, 'item' => get_string('tagsdeleted', 'wiki'), 'error' => false);
{noformat}

{noformat}
mod/book/lang/en/book.php:$string['removeallbooktags'] = 'Remove all book tags';
mod/forum/lang/en/forum.php:$string['removeallforumtags'] = 'Remove all forum tags';
mod/glossary/lang/en/glossary.php:$string['removeallglossarytags'] = 'Remove all glossary tags';
mod/wiki/lang/en/wiki.php:$string['removeallwikitags'] = 'Remove all wiki tags';
mod/wiki/lib.php:    $mform->addElement('advcheckbox', 'reset_wiki_tags', get_string('removeallwikitags', 'wiki'));
{noformat}

The modules implement the string 'tagsdeleted' and 'removeallxyztags' but only wiki supports this functionality.

In 3.2 the only activity that supports tagging is the wiki modules, so this is only an issue in 3.3 and above.",24,14/9/2017,14/10/2017,30,Improvement,Minor,7
MDL-60279,Prepare Moodle for PHP 7.2,"And again, my favorite epic. New PHP version is coming soon (end of 2017)!

https://wiki.php.net/rfc/deprecations_php_7_2
https://wiki.php.net/rfc/deprecate-and-remove-intl_idna_variant_2003

Moodle 3rd party libraries that use deprecated functions:
* ADODb - MDL-58546 - patch applied and pull request sent upstream. Pull request accepted
* Bennu - MDL-60391
* Horde - MDL-60390 - all fixed upstream
* Markdown - MDL-60239 - patch applied, it is already in markdown repo but was not tagged yet
* xhprof - MDL-60313 - patch applied and pull request sent upstream
* scssphp - MDL-60287 - patch applied and pull request sent upstream. Pull request accepted
* CAS - MDL-60280 - patch applied and pull request sent upstream. Pull request accepted
* tcpdf - MDL-60237 - patch applied, pull request already existed
* FPDI - MDL-60301 - patch not sent upstream, see comments on the issue
* htmlpurifier (idn_to_ascii) - MDL-60337 - patch applied, pull request sent upstream. Pull request accepted",24,29/9/2017,13/11/2017,45,Epic,Minor,5
MDL-60347,SMTP debugging can only provide verbose output (regardless of debugging output level),"Hi,

While playing with the SMTP settings I found out that if the SMTP debugging is turned on, an unauthenticated attacker can navigate to /login/forgot_password.php and reset the password of a user as long as he knows the username or the email address: this is caused by the SMTP debug messages, that by default are displayed directly in the browser.

Here's the debug output shown:

 

2017-10-04 16:50:18 CLIENT -> SERVER: Hi Admin,

2017-10-04 16:50:18 CLIENT -> SERVER:

2017-10-04 16:50:18 CLIENT -> SERVER: A password reset was requested for your account 'user' at New Site.

2017-10-04 16:50:18 CLIENT -> SERVER:

2017-10-04 16:50:18 CLIENT -> SERVER: To confirm this request, and set a new password for your account, please

2017-10-04 16:50:18 CLIENT -> SERVER: go to the following web address:

2017-10-04 16:50:18 CLIENT -> SERVER:

2017-10-04 16:50:18 CLIENT -> SERVER: http://192.168.1.35/login/forgot_password.php?token=adZ5CONp0mCNGRhytDl28cKFRhoiIXoJ

2017-10-04 16:50:18 CLIENT -> SERVER: (This link is valid for 30 minutes from the time this reset was first 2017-10-04 16:50:18 CLIENT -> SERVER: requested)

2017-10-04 16:50:18 CLIENT -> SERVER:

 

This also allows the attackers to perform username and email enumeration, because if a request is sent for a non-existing username or email address, no debug output is shown, so that it's easy to try to figure out admin username/email address.

 

I understand that the SMTP Debugging should be turned off most of the time, however I think the problem is with the default debug output settings that displays the output directly in the browser rather than appending it to a log file on the server(https://github.com/moodle/moodle/blob/master/lib/phpmailer/class.phpmailer.php#L345): with this configuration, an admin with a weak/easily discoverable username is only one click away from allowing everyone to reset his/her password. Changing the default debug output to the log file would make it more secure.

The SMTP debugging could potentially be currently enabled on many sites, and an attacker could report email issues on purpose to a target organization in order to trick them to enable it for troubleshooting purposes.

I'm using 'Serious' as a security level because no technical ability is required to exploit it and you don't even need to have an account on the site.

Thanks,

Antonio",29,5/10/2017,4/7/2019,637,Bug,Major,12
MDL-60348,WS mod_workshop_evaluate_assessment does not validate the weight and grading grade,Similar issue that the found in MDL-60144,9,5/10/2017,2/11/2017,28,Bug,Minor,5
MDL-60396,WS mod_workshop_evaluate_submission does not validate max grade limit,"This is a followup of MDL-60144 where the mod_workshop_evaluate_submission external was implemented and a post-fix was completely missed.

The fix is about to ensure that the function does validate the grade is not bigger than the maxgrade allowed.

Link to the missed commit that is going to be integrated here:

https://tracker.moodle.org/browse/MDL-60144?focusedCommentId=481529&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-481529

(will amend commit message to point here)

Sorry for the trouble!

-- [~stronk7].",3,11/10/2017,14/10/2017,3,Bug,Minor,3
MDL-60433,Groups are not correctly handled by Web Services in the database module,"Originally reported in MOBILE-2226

The groupid 0 is valid even if the user can't view all groups, the reason is that the inner API actually checks this case and return only entries not linked to groups.

This is affecting several Web Services",12,14/10/2017,2/11/2017,19,Bug,Minor,5
MDL-60474,Grading interface student switch user tool not reflecting sort order of grading table,"Teacher clicks on assignment - View all submissions
Filters for groups and sorts the name column by First name
Clicks the Grade button to bring up the grading interface
Grades the first student, uses the student selection tool top right to move to the next student only it is not the expected student.

e.g. Grading table order: Abbie Wordsworth, Ben Smith, Carole Jones (sorted by first name).  In the grading interface when the teacher clicks the next arrow on the student selection tool, they expect to see the students appear in the above order, however they are actually in order by last name.  After Abbie Wordsworth  the teacher would expect Ben Smith to be next, but Carole Jones appears next instead (names are fictional).

The student selection tool is sorted by last name and ignores the order the students are in on the grading table.  I have looked and can't see how to change this.  I would expect the  student selector in the grading interface to reflect the sort order of the grading table.",23,19/10/2017,20/12/2018,427,Improvement,Major,11
MDL-60537,Update behat for langstring change,String behat fixes from MDL-60449 and MDL-60072,10,23/10/2017,26/10/2017,3,Bug,Minor,4
MDL-60608,Bad default for defaulteventcontext,"The current default for {{defaulteventcontext}} is {{null}}. This leads to:
{code}
defaulteventcontext => Invalid response value detected: Invalid external api response: the value is """", the server was expecting ""int"" type
Error code: invalidresponse
* line 424 of /lib/externallib.php: invalid_response_exception thrown
* line 233 of /lib/externallib.php: call to external_api::clean_returnvalue()
* line 59 of /lib/ajax/service.php: call to external_api::call_external_function()
{code}

Apparently null is not a valid int.

Personally I'd say that this is a bug in the WS, and that an optional value should accept null as a default.

This is seen by:
# Login as admin
# Add Calendar block to site home
# Log off
# View current month and log in as GUEST
# Try to navigate month",8,27/10/2017,2/11/2017,6,Bug,Critical,7
MDL-60628,core_calendar_get_calendar_events does not return category events,This webservice is used by the mobile app - it needs to be made aware of category events or they will not display on mobile.,17,31/10/2017,11/11/2017,11,Bug,Blocker,8
MDL-60635,Previous/Next month calculation wrong in three-month view,"When viewing the last day of a month with 31 days, it appears that something is getting the month calculation wrong and we end up with a three-month view of the calendar which has the same month twice. For example: October, October, November; instead of September, October, November.

When I originally converted this view to use a template, I stripped out some old code which I didn't think was required. Apparently it was.",8,31/10/2017,2/11/2017,2,Bug,Minor,5
MDL-61046,Import fixed English strings (en_fix) into the main English pack for 3.4.1 ,Moodle 3.4.1 is scheduled for release on Monday 15 January 2018.,11,16/12/2017,12/1/2018,27,Task,Minor,6
MDL-61056,Feedback response navigation elements not displayed correctly in Boost,"As noticed by [~markn], the Feedback module page ""Show responses"" has broken links for navigating through responses. This seems to be a indirect regression of MDL-59313 that started to display links to navigate through activities.

h3. Steps to reproduce:

1. Have a 3.4 site with the Boost theme
2. Have at least 3 activity modules in a course with a Feedback module in the middle (with at least one module before, one after it).
3. Define a simple question in the Feedback
4. Submit answers to the Feedback as at least 3 students (so there are at least 3 responses)
5. As a teacher, go to the ""Show responses"" tab
6. Click on one of the responses

Expected behaviour:

* Links to navigate through the responses are nicely displayed

Actual behaviour:

* Links to navigate through the responses are broken, the ""Back"" link is completely covered with the ""Jump..."" selector.",11,19/12/2017,29/12/2017,10,Bug,Minor,6
MDL-61058,Automate MDLQA-8146,An admin can create and assign a keyholder role,12,19/12/2017,2/2/2018,45,Task,Minor,5
MDL-61218,ChartJS tooltip not working after 3.4 upgrade,"This bug has been reported by [~CrymSonir].

After upgrade to 3.4 the tool tips on pie and donut charts stop working, the chart is generated but when you hover over the chart, you get the following JS error:
{code}
chartjs-lazy.js:281 Uncaught TypeError: Cannot read property 'r' of null
    at new Color (http://simey.per.in.moodle.com/stable_master/lib/requirejs.php/-1/core/chartjs-lazy.js:281:22)
    at Color (http://simey.per.in.moodle.com/stable_master/lib/requirejs.php/-1/core/chartjs-lazy.js:255:20)
    at Object.helpers.color (http://simey.per.in.moodle.com/stable_master/lib/requirejs.php/-1/core/chartjs-lazy.js:10131:24)
    at helpers.getHoverColor (http://simey.per.in.moodle.com/stable_master/lib/requirejs.php/-1/core/chartjs-lazy.js:10138:25)
    at ChartElement.setHoverStyle (http://simey.per.in.moodle.com/stable_master/lib/requirejs.php/-1/core/chartjs-lazy.js:9304:137)
    at Chart.updateHoverStyle (http://simey.per.in.moodle.com/stable_master/lib/requirejs.php/-1/core/chartjs-lazy.js:8937:86)
    at Chart.handleEvent (http://simey.per.in.moodle.com/stable_master/lib/requirejs.php/-1/core/chartjs-lazy.js:9020:24)
    at Chart.eventHandler (http://simey.per.in.moodle.com/stable_master/lib/requirejs.php/-1/core/chartjs-lazy.js:8957:34)
    at listener (http://simey.per.in.moodle.com/stable_master/lib/requirejs.php/-1/core/chartjs-lazy.js:8894:37)
    at HTMLCanvasElement.proxies.(anonymous function) (http://simey.per.in.moodle.com/stable_master/lib/requirejs.php/-1/core/chartjs-lazy.js:15266:17)
{code}

To reproduce, go to {{http://YOURMOODLESITE/stable_master/lib/tests/other/chartjstestpage.php}} with the console open and hover over the pie or donut chart, you'll notice the tool tip is not displayed and the error above is displayed on the console.  ",11,16/1/2018,2/2/2018,17,Bug,Major,5
MDL-61251,"Explanatory text for ""Enable RSS feeds"" in module settings is wrong","In the Database, Forum and Glossary module settings, the explanatory text for ""Enable RSS feeds"" is wrong. It currently reads... ""This switch will enable the possibility of RSS feeds for all databases. You will still need to turn feeds on manually in the settings for each database.¬†RSS feeds are disabled at the server level. You need to enable them first in Server/RSS.""

The last sentence *should* read 
""You need to enable them first in Advanced Features /¬†Enable RSS feeds""",11,22/1/2018,9/2/2018,18,Bug,Minor,6
MDL-61359,Self-XSS when sending message to another user,"We have received an email to security address at moodle with the description of self-XSS that can be easily reproduced. This is not a security issue because you can not attack other users. 

{quote}Security Researcher: Dan Nino I. Fabro

Description and Impact:
I was continually browsing the website when I found something
interesting. One of the features of the website is to enable
communication with other users using the chatbox, url:
https://school.demo.moodle.net/message/index.php?user=[USERNUMBER]&id=[IDNUMBER],
now, the input field of the chatbox is the one vulnerable here wherein
an attacker may use this as an attack vector for injecting arbitrary
javascript code and enable himself to steal or edit cookies of other
users of the site.
I was only using demo account, what if real account already, right?

Payload used:
""><img src=x onerror=prompt(document.cookie)>

Browser used:
Google Chrome Version 61.0.3163.100 (Official Build)
(64-bit){quote}",23,6/2/2018,13/7/2018,157,Bug,Critical,7
MDL-61366,MDL-57103 tries to use $PAGE before it has been initialised,"PHP logs are full of

[05-Feb-2018 20:07:00 Europe/London] Debugging: Coding problem: $PAGE->context was not set. You may have forgotten to call require_login() or $PAGE->set_context(). The page may not display correctly as a result in

    line 493 of /lib/pagelib.php: call to debugging()
    line 1587 of /lib/pagelib.php: call to moodle_page->magic_get_context()
    line 677 of /lib/pagelib.php: call to moodle_page->initialise_theme_and_output()
    line 864 of /lib/pagelib.php: call to moodle_page->magic_get_theme()
    line 390 of /lib/setuplib.php: call to moodle_page->get_renderer()
    line ? of unknownfile: call to default_exception_handler()


This is because MDL-57103 uses global $PAGE in a place way before it has been initialised.",14,7/2/2018,16/2/2018,9,Bug,Minor,7
MDL-61421,Task cohort_role_sync development error when the same user is into two cohorts,"Task cohort_role_sync attempts to sync users and fails when two cohorts have a common user.

*Steps to replicate*
 # Create a Cohort 1
 # Create a Cohort 2
 # Add a user X to the Cohort 1
 # Add the same user X to the Cohort 2
 # Create a Role which can be assigned at the user level
 # Go to Site administration / ‚ñ∫ Users / ‚ñ∫ Permissions / ‚ñ∫ Assign user roles to cohort
 # Choose a user Y from the '*Select users to assign role'* dropdown
 # Select the Cohort 1 and Cohort 2 from the '*Select cohorts*' dropdown
 # Click *Assign*
 # Run the scheduled task ({color:#000000}php admin/tool/task/cli/schedule_task.php --execute=tool_cohortroles\\task\\cohort_role_sync --showdebugging{color})

You will get the next message:

{{++ Did you remember to make the first column something unique in your call to get_records? Duplicate value '8' found in column 'userid'. ++}}

¬†",11,11/2/2018,23/2/2018,12,Bug,Minor,7
MDL-61514,Backup / restore of quiz should read/write some data from/into quiz_slots,"should include tags data
should read/write from/to quiz_slots.questioncategoryid, quiz_slots.includingsubcategories and quiz_slots.tags",38,22/2/2018,23/3/2018,29,Task,Blocker,7
MDL-61526,Course restore creates multiple TOP question categories,Course restore creates multiple TOP question categories,15,24/2/2018,16/3/2018,20,Bug,Minor,5
MDL-61673,Calendar help text for next month arrow is wrong,"The help text for the next month arrow has a wrong value. It should says 'Next month' but instead says 'Previous month'. I was able to replicate this issue in https://qa.moodle.net/?lang=es

*Steps to Replicate*
* Log in admin
* Go to /my/ page
* Put the mouse on top of next month arrow(right arrow)

*Expected:* Help text should be 'Next month'
*Actual:* Help text is 'Previous month'

I have attached an image showing how it looks the bug.
 !Screen Shot 2018-03-16 at 10.41.17 AM.png|thumbnail! ",15,17/3/2018,6/4/2018,20,Bug,Minor,7
MDL-61950,Quiz statistics report doesn't show chosen random questions,"The quiz statistics report no longer shows the chosen questions for a random question slot when generating the table summary.

The table should show the list of questions that were chosen for a random question slot in the quiz attempts (where the number of distinct questions allocated is < 9).

To replicate:
# Log in as admin
# Enrol 2 users as students
# Create and view a quiz
# Go to the question bank (edit cog > question bank)
# Create 5 questions in the default category for the course (it doesn't matter the type of question but I find true/false the easiest because you'll need to attempt the quiz).
# Edit the quiz and add a random question from the default course category
# Log in as each of the students and attempt the quiz
# Log in as admin
# View the quiz
# View the statistics report (edit cog > results > statistics)
# You should see a row (Q# will likely be 1) for the random question slot
# You should see some rows below that for each of the questions that were allocated during the attempts above (Q# will likely be 1.1, 1.2, 1.3... etc).

This is how the report should look:
!expected.png|thumbnail!

This is how it looks with the bug:
!actual.png|thumbnail!",8,12/4/2018,21/4/2018,9,Bug,Major,5
MDL-61956,Unable evaluate a Hidden course via to Switch role to Student,"In our 3.2 instance I can go to a hidden course (Visible=Hide) as a Teacher and Switch role to Student to evaluate my course.¬† When emulating a student I can explore the course fully even though it is technically 'hidden'.¬†

In 3.4 we have found that trying to switch role to a Student in a hidden course produces the error message 'Sorry, but you do not currently have permissions to do that (View hidden courses) '.¬† So it is now enforcing the Student role much more literally inside of the hidden course and no emulation is possible.
 # Go to a course where you have the Teacher role.
 # Via Edit Settings set the Visible setting to Hide
 # Via the User menu select Switch role to
 # Select the Student role from the list
 # Instead of being able to explore the course as a student you will see ' 'Sorry, but you do not currently have permissions to do that (View hidden courses) '.¬†",13,12/4/2018,9/5/2018,27,Bug,Minor,7
MDL-62023,Developer info text are mostly obscured,"Please see the following screenshot:
 !screenshot-1.png|thumbnail! ",6,18/4/2018,25/4/2018,7,Bug,Minor,5
MDL-62155,Forum post alignment and positioning issues after theme boost upgrade,"As reported by [~marycooch]¬†in¬†https://tracker.moodle.org/browse/MDLQA-11635

??I've noticed the alignment of the options when in a forum¬† is different in 3.5 from 3.4 - see attached images. I made sure my screen was 100% in both sites and I also tested in Firefox and Chrome. I am not actually sure if this is intended or not; it doesn't stop anything working correctly, so I will fail it, in order to have someone double check it.??",15,24/4/2018,2/5/2018,8,Bug,Minor,6
MDL-62161,"Keep selected users, even if they no longer match the search only keeps one user","When adding / removing users from a Cohort and searching for users, with the ""Keep selected users, even if they no longer match the search"" search option selected, if you search for a term and select multiple users, and then you then search for another term only one of the selected users is kept.",25,24/4/2018,6/9/2019,500,Bug,Minor,8
MDL-62183,Solr unit test failures,Solr unit tests are not setting solr as search engine. The default search engine for new sites changed to the local moodle db in MDL-53226.,7,25/4/2018,25/4/2018,0,Bug,Minor,3
MDL-62359,moodleform addGroup separator does not work same as in previous version,"While updating plugins used at moodle.org for moodle 3.5, I have discovered a regression in the Boost theme.

I have a form code like this:
{code}
    public function definition() {
        
        $mform = $this->_form;
        
        $mform->addGroup([
            $mform->createElement('checkbox', 'foo1', null, 'Foo1'),
            $mform->createElement('checkbox', 'foo2', null, 'Foo2'),
            $mform->createElement('checkbox', 'foo3', null, 'Foo3'),
        ], 'foos', 'Select foos', '<br>', false);
    }
{code}

In Clean theme and in Boost 3.4, the checkbox elements are displayed as stacked vertically, using the {{<br>}} as the separator.

In Boost 3.5 however, the separator seems to be ignored and the items are displayed next to each other.

h3. Steps to reproduce

# Go to a course and turn editing mode on
# Add a new SCORM activity
# Expand the Appearance section
# Click ""Show more..."" link
# Observe the checkbox options for the ""Options (Prevented by some browsers)"" field

Expected behaviour: Options are supposed to be stacked vertically

Actual behaviour: Options are displayed next to each other",14,9/5/2018,16/5/2018,7,Bug,Minor,5
MDL-62364,The notification_sent event should not require courseid,"From David Mudrak -

{quote}
I am experiencing a regression while testing 3.5 upgrade of moodle.org which is likely related to this issue.

Our custom plugin there is sending a notification that does not have the courseid set. The courseid is not a required property of {{\core\message\message}} as per its inline docs. Yet {{\core\message\manager::send_message()}} seems to expect it be part of the {{$eventdata}}.

{quote}

{quote}

To clarify, it is {{\core\event\notification_sent}} which was introduced as a part of this issue, which throws exception when courseid is not set - see its {{validate_data()}} method.

{quote}

¬†The thrown coding exception is
{code}
The 'courseid' value must be set in other.
{code}",7,9/5/2018,13/5/2018,4,Bug,Minor,4
MDL-62584,Xmlrpc server returns content-length:0 for exceptions,"Moodle xmlrpc server returns content-length:0 header with non-empty content. For some reason https://moodle.net server strips out content completely in this case, probably because of the web-server (it uses nginx) or other software involved in page serving.

This results with error not being returned to sites that try to register.

Another challenge that this can not be reproduced in local/testing environments - header ""content-legth:0"" is just ignored and full response body is returned",9,28/5/2018,1/6/2018,4,Bug,Minor,5
MDL-62586,"Forum ""Started by"" column wraps badly","Would be nice to improve the way that we dispaly the Started by column when on smaller displays.
At the moment it wraps badly.",13,28/5/2018,8/6/2018,11,Bug,Minor,6
MDL-62719,Add hidden css style to course title in breadcrumb and navigation,"There is currently no simple visual indicator for course visibility status in boost theme in 3.4

I suggest adding of a hidden css class so the course title can be styled differently.",1,15/6/2018,21/10/2019,493,Improvement,Minor,2
MDL-62787,popper lib throwing minor warning about source map,"The last line of lib/amd/src/popper.js is a comment pointing to a source.map file that doesn't exist:

{{//# sourceMappingURL=popper.js.map}}

Firefox at least gives you a warning in the dev tools after it tries to access that file, gets a 404 error instead and then tries to interpret the error page as JSON.
{noformat}Source map error: SyntaxError: JSON.parse: unexpected character at line 1 column 1 of the JSON data
Resource URL: http://<moodlesite.com>/lib/requirejs.php/-1/core/first.js
Source Map URL: popper.js.map[Learn More]
{noformat}
I'm guessing just deleting the comment is the way to go here.",2,24/6/2018,8/9/2018,76,Improvement,Minor,2
MDL-63102,Reduce padding of blocks,Reduce the padding on the blocks on the dashboard,18,9/8/2018,17/10/2018,69,Improvement,Minor,6
MDL-63141,Update mod_imscp_core_calendar_provide_event_action callback to accept $userid,"As a follow-up to MDL-58768, we need to update the implementations of mod_<modname>_core_calendar_provide_event_action callback in all activity modules to accept a $userid parameter",11,15/8/2018,5/10/2018,51,Bug,Minor,4
MDL-63194,Moving questions from section to section in quiz does not work,"* Create a quiz
 * fill in some questions
 * add some section headings (two or more questions per section)
 * move a question from one section to another
 * reload the page -> the question is still at its former position",33,22/8/2018,11/10/2018,50,Bug,Minor,7
MDL-63414,Allow bulk download of assignments to create files in lastname_firstname format,"Currently when bulk downloading files submitted to an assignment, Moodle creates filenames that are firstname_lastname. Instructors have asked me if this can be configured to be lastname_firstname instead. Could an option be added?",2,21/9/2018,24/4/2020,581,Improvement,Minor,3
MDL-63465,New Web Service core_block_get_dashboard_blocks,"New WS to retrieve the blocks displayed in the user dashboard, this is necessary to be able to display the correct blocks (in the correct order) for mobile users.",15,26/9/2018,20/10/2018,24,New feature,Minor,5
MDL-63614,Activity completion - require passing grade or all attempts completed not working as expected,"If you set up a quiz to ""require a passing grade or have all attempts completed"" and use that quiz as the sole criteria for a badge.¬† It is impossible for a student who fails the quiz (but completes all allowed attempts) to earn the badge.

Steps to reproduce: (reproducable on qa.moodle.net)

on a site with badges enabled:
 # create a quiz, with a single true/false question.
 # Configure the quiz to allow 2 attempts and set the passing grade to 75
 # Enable activity completion for the quiz, and set the following: require grade, require passing grade, or all attempts completed
 # create a badge using the quiz as the sole criteria
 # enable the badge
 # Attempt the quiz twice by the student, failing the quiz both times.
 # Verify that the activity completion checkbox for the student is marked complete

Expected result: student should have been awarded the badge
Actual result: the badge is not awarded.

¬†",22,11/10/2018,8/2/2019,120,Bug,Minor,6
MDL-63729,Update Badges Web Services to return new fields and data added by the 2.0 spec,"MDL-58454 added new fields and tables to support the 2.0 specification, we need to update the existing Web Services to return everything new",13,22/10/2018,13/11/2018,22,Improvement,Minor,5
MDL-63794,Display course category in course overview block,Look into the possibility of displaying the course category in the courses on the course overview block. This helps identify courses that have duplicate names.,20,29/10/2018,20/12/2018,52,Improvement,Minor,10
MDL-63844,"Re-add ""Date enrolled"" to participant's Enrolment details.","Prior to the Moodle 3.4 upgrade, each participant's Enrolment details (accessed by clicking the 'i' icon under status on the participants page) included the date on which the user was enrolled in the site. The upgrade to Moodle 3.4 removed this feature, this patch will bring it back.",25,2/11/2018,20/12/2018,48,Improvement,Minor,9
MDL-63913,"Add API function to generate unread counts for conversations by type, with favourites support.","This will assist in populating the unread counts for the accordion tabs in the new UI.¬†

Let's say we have 10 favourited conversations, and we have 4 of these with unread messages (it doesn't matter how many unread messages per conversation - ignore that), then the unread count for favourites would be 4.

Same applies to the group and individual types.",13,8/11/2018,20/11/2018,12,Improvement,Critical,4
MDL-63937,Form autocomplete should show the indicator when processing the AJAX request,"Updated on 2018-02-20:

Since [~dobedobedoh] already fixed the multiple AJAX request issue in MDL-62514. So in this PBI we only add the spinner/indicator to let the user know that their request is processing.

---------------------------------------------

We are suffering from MDL-56059, which means that the Ajax requests in the enrolled users UI are taking over 10 seconds. This exposes usability problems with the autocomplete form element.

MDL-51324 added throttling of the keyboard evens, so Ajax requests are only triggered 0.3s after the user stops typing.

However, if you type: ""T [0.5s pause] i [0.5s pause] m"" then it will initiate three concurrent ajax requests, all of which take ~10s +/- a few seconds. Therefore, when everything eventually updates, you may find yourself looking at the search results for ""T"", not ""Tim"".

So, I think that autocomplete should not send a second Ajax request until the first one is finished. That make the UI more understandable, and avoid overloading the database with multiple really slow queries.

Also, there needs to be more visible UI status while the form control is waiting for ajax.

The code in quiz autosave gets the waiting right, and might be worth looking at [https://github.com/moodle/moodle/blob/master/mod/quiz/yui/src/autosave/js/autosave.js#L299].

The old user-selector code took a different approach: [https://github.com/moodle/moodle/blob/master/user/selector/module.js#L92]. It tried to abort the current ajax request before starting a new one (line 147 there). However, I am not sure that fully works, because I don't think PHP can stop in the middle of waiting for a really slow database query to run. So, I think the quiz approach is better.",35,9/11/2018,8/3/2019,119,Improvement,Minor,9
MDL-64143,Contacts: Make contact names bold,"Contacts: Make contact names bold

!Contacts.png|thumbnail!",12,21/11/2018,1/2/2019,72,Bug,Minor,6
MDL-64165,Multiple things wrong with the helper method get_conversation_member_structure,There are multiple things wrong with this helper method that should be fixed before release as we do not want people using this incorrectly.,6,22/11/2018,24/11/2018,2,Bug,Minor,4
MDL-64180,Add new web service to expose number of unread contact requests,This is required by the mobile team - see MOBILE-2734.,7,23/11/2018,24/11/2018,1,Improvement,Minor,4
MDL-64200,Behat Firefox: Edit media dialog goes offscreen + create activity strange error,"After a number of behat runs towards the completion of the [https://docs.google.com/spreadsheets/d/1TcMJT3o2Cnyq006lmLWrXJeNQQzyNXz2E_Vbc8ff5EE/edit?pli=1#gid=0|3.6 testing release matrix], these 3 errors are happening consistently with Firefox & Mac.

A) This seems a silly one. After creating an assignment as teacher, the activity is just not there when logged in as student:

{code}
001 Scenario: Submit a PDF file as a student in a team and annotate the PDF as a teacher # /Users/stronk7/git_moodle/testing/mod/assign/feedback/editpdf/tests/behat/annotate_pdf.feature:70
      And I follow ""Test assignment name""                                                # /Users/stronk7/git_moodle/testing/mod/assign/feedback/editpdf/tests/behat/annotate_pdf.feature:118
        Link matching locator ""'Test assignment name'"" not found. (Behat\Mink\Exception\ElementNotFoundException)

1 escenario (1 fallaron)
38 pasos (14 pasaron, 1 fallaron, 23 saltadas)
0m49.18s (61.08Mb)
{code}

B) The insert/edit media dialog goes off-screen, leading to a couple of consistent failures.

{code}
001 Scenario: Insert some media as a video with display settings # /Users/stronk7/git_moodle/testing/lib/editor/atto/plugins/media/tests/behat/media.feature:50
      And I click on ""Display options"" ""link""                    # /Users/stronk7/git_moodle/testing/lib/editor/atto/plugins/media/tests/behat/media.feature:65
        The ""(//html/.//a
        [./@href][((./@id = 'Display options' or contains(normalize-space(string(.)), 'Display options') or contains(./@title, 'Display options') or contains(./@rel, 'Display options')) or .//*[(contains(concat(' ', @class, ' '), ' icon ') or name() = 'img') and (contains(./@alt, 'Display options') or contains(./@title, 'Display options'))])] | //html/.//*
        [translate(./@role, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz') = 'link'][((./@id = 'Display options' or contains(./@value, 'Display options')) or contains(./@title, 'Display options') or contains(normalize-space(string(.)), 'Display options'))])[1]"" xpath node is not visible and it should be visible (Behat\Mink\Exception\ExpectationException)

002 Scenario: Insert some media as a video with tracks                                                                                    # /Users/stronk7/git_moodle/testing/lib/editor/atto/plugins/media/tests/behat/media.feature:85
      And I set the field with xpath ""(//*[contains(concat(' ', normalize-space(@class), ' '), ' atto_media_track_default ')])[1]"" to ""1"" # /Users/stronk7/git_moodle/testing/lib/editor/atto/plugins/media/tests/behat/media.feature:105
        The ""((//html//*[contains(concat(' ', normalize-space(@class), ' '), ' atto_media_track_default ')])[1])[1]"" xpath node is not visible and it should be visible (Behat\Mink\Exception\ExpectationException)

19 escenarios (17 pasaron, 2 fallaron)
1058 pasos (992 pasaron, 2 fallaron, 64 saltadas)
25m52.40s (74.62Mb)
{code}

Only tested with 3.6, may apply to older branches. Only verified with FF & Mac (passes perfectly with Chrome, any selenium & chromedriver version). Exact versions used:

- Firefox 47.0.1
- Selenium 3.141.59 (latest) & Selenium 3.13.0 (older).

Ciao :-)",17,24/11/2018,22/2/2019,90,Bug,Minor,4
MDL-64227,Nextcloud documents shared via controlled links that are displayed embedded in a file resource shows the complete site embedded,"See the attached image:
Steps to reproduce
# Enable Nextcloud repository integration
# Go to a course and create a file resource:
#* Using the file picker, browse the Nextcloud repository and add a file as a ""controlled link / link to file""
#* Use the display options to embed the file",10,27/11/2018,1/12/2018,4,Bug,Minor,6
MDL-64332,Error when duplicating a question with an IDnumber,"Starting with *Moodle 3.6*, questions _can_ have an ID number (which must be _unique_ within a given category). This results in a bug when duplicating a question with an ID if the user forgets to give the duplicated question a different ID. I would have reported this in the tracker, but I've lost touch with it for a few years. I hope the info below will be useful for someone to create a bug report.

My original question had an ID number = 99.

Error writing to [database|https://moodle.org/mod/glossary/showentry.php?eid=15&displayformat=dictionary]

*Debug info:* Duplicate entry '2-99' for key 'mdl_ques_catidn_uix'
INSERT INTO mdl_question

etc.

*Stack trace:*
 * line 489 of \lib\dml\moodle_database.php: dml_write_exception thrown
 * line 1329 of \lib\dml\my[sql|https://moodle.org/mod/glossary/showentry.php?eid=6851&displayformat=dictionary]i_native_moodle_database.php: call to moodle_database->query_end()
 * line 1375 of \lib\dml\mysqli_native_moodle_database.php: call to mysqli_native_moodle_database->insert_record_raw()
 * line 372 of \question\type\questiontypebase.php: call to mysqli_native_moodle_database->insert_record()
 * line 273 of \question\question.php: call to question_type->save_question()

Note: First reported in the Quiz forum at https://moodle.org/mod/forum/discuss.php?d=379434#p1529695",15,5/12/2018,14/12/2018,9,Bug,Minor,5
MDL-64388,Add info about 3.6 theme layout changes to theme/upgrade.txt,"It seems there is a new feature in the theme layout files resulting in messaging not working for sites using a custom theme when they upgrade to Moodle 3.6.

It would be helpful for info to be added to theme/upgrade.txt.",9,13/12/2018,20/12/2018,7,Task,Minor,5
MDL-64404,Qtype gapselect: currency like options ($4) do not show in the selector ,"Create a¬†'Select missing words' (gapselect)¬†question and add an option group¬†with values that are currency like e.g.¬†'$2 or $4.99'. Preview the question and see how the select dropdown has '' where the option should show the currency value.

Note that it is possible to 'sort of fix this' by putting a space between the $ and the first digit.",10,15/12/2018,8/2/2019,55,Bug,Minor,5
MDL-64506,Remove clean theme,"Remove the clean and bootstrapbase themes.
This changes should also consider:
# removing the less compilers from both php and grunt
# removing old references to bootstrapbase:
## /lib/adminlib.php :  bootstrap_renderer
## /lib/outputlib.php : find_theme_config('bootstrapbase', /lib/weblib.php : bootstrap_renderer::
## /lib/setuplib.php: bootstrap_renderer::
# updating any unit tests which make use of the {{clean}} theme to make it use {{classic}} instead. There are some which test theme availability and fallback.",34,7/1/2019,6/4/2019,89,Task,Minor,10
MDL-64540,Backport MDL-60008 - File won't render in the grader if both submission types are selected,"MDL-60008 was a bug, but was integrated to master only. In https://tracker.moodle.org/browse/MDL-60008?focusedCommentId=647360&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-647360, it was agreed by [~damyon] and [~jpataleta] that there will be a backport request to backport MDL-60008 to stables, but this wasn't created during integration anymore as far as I see.

As the creator of MDL-62467 which was closed as ""will be solved by MDL-60008"", I would be very keen to see MDL-60008 backported to stables. Thanks for your consideration.",20,9/1/2019,22/2/2019,44,Bug,Minor,6
MDL-64547,Forum facelift,"Update the look and feel of the forum.

This is a placeholder for the Forum Facelift project.
More detail will be added here shortly.",6,11/1/2019,22/5/2019,131,Epic,Minor,6
MDL-64615,App download page (setuplink) should not append site info for custom download pages,When using a custom download page with slash arguments the resulting page loses the slashes.,13,17/1/2019,29/3/2019,71,Bug,Minor,5
MDL-64672,Add behat test for new message drawer to unread messages,"*Feature*
In order to know how many unread messages I have
As a user
I need to be able to view an unread message

*Scenarios*
* Show unread messages on the popover
* Show unread messaged for starred/group/private
* Clicking/reading a message marks it as read",29,23/1/2019,27/4/2019,94,Improvement,Minor,6
MDL-64715,Messaging: Add support for personal space,"For personal space in messaging, a number of things are required:
- Sending a bulk message from the course or site to one's self must also trigger the email processor for that sender. Currently (3.6 ) it does not. This is in the message manager.
- personal space conversations should be returned by the relevant APIs and web services.
- personal space conversations should be displayed in the UI
- A user should be able to reply to a personal space conversations
- (as per 3.5 and older) a user should not be able to initiate a personal space conversation with themselves via the messaging UI. It can be achieved only via the bulk messaging.

We also need to make sure that options like ""Block"" etc - which don't really make sense when talking about the current user - are removed from the UI.

",60,29/1/2019,23/4/2019,84,Improvement,Major,14
MDL-64954,"Provide a ""More info"" link to extend the information available for the different analytics elements in core","This issue is about making sure that users are well informed when using the analytics tool.

The create / edit model page includes some elements which meaning is not clear from a simple and short description (e.g. the text of a select box's option). *Targets* and *Time splitting methods* fields already have a help text to explain what they are. We should provide a link to a Moodle Docs page where more info about the available options is displayed.",17,26/2/2019,10/4/2019,43,Improvement,Critical,8
MDL-65081,\single_select::export_for_template() doesn't set attributes,"The \single_select::export_for_template() doesn't set the attributes. For example:

{code}
$attributes = [
    'data-action' => 'some action'
];
echo $OUTPUT->single_select('#', 'action', $options, null, ['' => 'choosedots'], 'formid', $attributes);
{code}

The HTML for the select element doesn't include the 'data-action' attribute.",10,15/3/2019,29/3/2019,14,Bug,Minor,5
MDL-65114,Messaging: timestamp should include days and years in main conversations list,"Like ""Monday, 11th March 2019"".

Update: Spoke to UX and the outcome was:

For conversations listed on the main view (Starred, Group, Private), we want to:
 - Display the time in the format ""14:18"" for conversations having a message posted today.
 - Display the date in the format ""29/01/19"" for conversations older than today.

This likely means we can't simply use the strftimetime24 in the template and must preformat the dates before rendering the template",20,20/3/2019,6/4/2019,17,Improvement,Minor,6
MDL-65144,Logo on Boost is not scaled on login page ,"¬†The logo help says:

""A full logo to be used as decoration by some themes (such as core themes). This image can be quite high resolution because it will be scaled down for use (and cached for performance). Logos that are wider than they are high usually give better results. Formats accepted: PNG and JPG.""

On Boost in 3.6.1 it is not scaled.¬† This seems to be a regression.

¬†

!screenshot.png|width=1124,height=755!",19,21/3/2019,2/4/2019,12,Bug,Critical,8
MDL-65222,Explain question walkthough tests,"As [~dougiamas] always used to say, asking good questions is one of the most powerful tools for education. Recently, [~lameze] asked me some good questions about qbehaviour_walkthrough_test_base which I answered to explain what theses tests were all about. Rather than leaving those answer to get lost in a Telegaram chat, they should be put into the PHPdoc comments.",10,29/3/2019,23/4/2019,25,Improvement,Minor,4
MDL-65423,Incorrect possible value in the Mobile features multiple selector,"There is an incorrect element value in the ""Disabled features"" option within the Mobile administration options.",9,26/4/2019,11/5/2019,15,Bug,Minor,4
MDL-65436,Undefined $select variable when upgrading,"Got this error while upgrading to the latest weekly release:
{noformat}
Notice: Undefined variable: select in /home/jun/moodles/stable_master/moodle/lib/db/upgrade.php on line 3135
{noformat}
",10,29/4/2019,1/5/2019,2,Bug,Major,7
MDL-65458,Improve the group messaging digest email html,"The group messaging html improvement have been added in¬† MDL-64017

This issue has been created to further tweak and improve the design.

 !Email notifications.png|thumbnail! ",13,1/5/2019,4/5/2019,3,Improvement,Major,7
MDL-65474,User image disappears when adding a video to a posting,"The left column containing user + group images collapses when adding a video to a posting.

additional points I'll address in this issue:
The user + group images are not part of the post header but shown as a column left of the post. Which makes the post heading hard to style using css.

There is no visual distinction between user and group images.

The user image has a aria-hidden=true tag, the group images don't have the aria-hidden tag.

When adding a rating to forum posts the rating selector position looks wrong, it should be part of the post footer.",8,2/5/2019,9/5/2019,7,Bug,Minor,6
MDL-65492,Cache admin UI: make it easy re-purge the cache you just purged,"When doing mobile development of plugins, you need to purge the tool_mobile/plugininfo every time you change the CSS.

You can just use Purge all caches, but that is horribly slow.

Of you can go to the cahce admin page, find the right 'Purge' link in the middle of the page (which is slow) but then the actual purging is faster.

It occurred to me that there are probably other cases, when you are tring to fix a specific thing, where you might need to purge the same cache a few times in a row. Therefore, I propose to change the ""Successfully purged the requested definition."" Notification to instead say something like ""Successfully purged the ""This stores the list of plugins with mobile addons (tool_mobile/plugininfo) cache. _Purge again_.""",30,3/5/2019,14/6/2019,42,Improvement,Minor,6
MDL-65599,Invalid parameter value detected when dismissing the user competency summary modal ,"As reported by [~jmeuriss] in MDLQA-13390:

getting an ""invalid parameter exception"" at step 6 of Test 2 when dismissing the modal showing the details of the competencies. The error doesn't occur when viewing dismissing the first modal window, but occurs with all the following ones. That is I view A2, dismiss the modal --> ok; I view B1 and dismiss the modal --> exception; I view B2 and dismiss the modal --> exception

Could be reproduced on QA test site with the following steps.
 # Log in as teacher and select a course
 # Go to the competencies page and add a competency to the course
 # Go to competency breakdown page¬†
 # Click a first time on ""not rated"" in Rating column then dismiss the modal --> ok
 # Click a second time on ""not rated"" then dismiss the modal --> exception thrown

{quote}Invalid parameter value detected
File: /lib/externallib.php
Line: 349

Stack trace:
moduleid => Invalid parameter value detected (Invalid external api parameter: the value is """", the server was expecting ""int"" type): Invalid external api parameter: the value is """", the server was expecting ""int"" type
Error code: invalidparameter
* line 349 of /lib/externallib.php: invalid_parameter_exception thrown
* line 223 of /lib/externallib.php: call to external_api::validate_parameters()
* line 59 of /lib/ajax/service.php: call to external_api::call_external_function()
{quote}",7,14/5/2019,16/5/2019,2,Bug,Minor,6
MDL-65619,Default notification preferences are unset by default for Permitted/Locked/Disallowed,"After changes made in¬†MDL-64495 adding a new Notification settings page, both Notification plugins' settings and Default notification preferences are altogether. As discussed in¬†MDL-64495, when admin enables a new notification provider, no default notification preferences column appears. But when they click on Save changes, all preferences for all providers are saved, even the preferences don't exist in the page.¬†

This behavior doesn't respect default values for user preferences and unsets all default preferences.¬†",8,15/5/2019,16/5/2019,1,Bug,Minor,5
MDL-65744,Upgrade lib\minify to latest release,"lib\minify\readme_moodle.txt implies both of these should be upgraded at the same time.

MatthiasMullie\Minify /lib/minify/matthiasmullie-minify/ 1.3.51 1.3.61 Yes [https://github.com/matthiasmullie/minify/releases]

MatthiasMullie\PathConverter /lib/minify/matthiasmullie-pathconverter/ 1.1.0 1.1.2 Yes
[https://github.com/matthiasmullie/path-converter/releases]",13,29/5/2019,19/7/2019,51,Task,Minor,5
MDL-65758,Upgrade mustache.js to 3.0.1,"There's a major version bump here so we want to get on top of it ASAP.

Mustache.js	/lib/amd/src/mustache.js	2.3.0	3.0.1	Yes	https://github.com/janl/mustache.js/releases",9,29/5/2019,19/7/2019,51,Task,Minor,5
MDL-65797,Performance improvements for user / group overrides for mod assign,"At scale the hairy sql here performs really badly, eg minutes to load the grading UI:

[https://github.com/moodle/moodle/blob/master/mod/assign/gradingtable.php#L172-L236]

Some combination of sql rewrite or indexing needed.

¬†",23,30/5/2019,28/6/2019,29,Improvement,Minor,6
MDL-65920,Further PHP 7.2 adodb bug fixes,Following on the steps of MDL-58546 there are still usages on {{each()}} and {{create_function()}} within the adodb library,16,14/6/2019,9/1/2020,209,Bug,Minor,5
MDL-65937,Use the checkbox-toggleall component for the lesson activity,"h5. Who is this for?
* Moodle users who can manage lesson activities (e.g. teachers, course managers, etc)

h5. What is the problem that you're trying to solve?
* The inconsistent way of checking items on a list throughout Moodle

h5. Why does it need solving?
* A consistent way of checking items on a list would provide a better user experience

h5. How does this issue tackle the problem?
* The patch for this issue will implement the usage of the checkbox-toggleall output component which aims to improve the UI and UX by:
**  having a master checkbox for toggling the checked states of the checkbox elements in the items list.
** making the ""{{With selected}}"" select box enabled only when there's at least one item selected.",15,17/6/2019,16/8/2019,60,Improvement,Minor,5
MDL-66076,Epic: Create advanced forum reporting,"This is an epic to capture all of the relevant changes to support enhanced reporting within the Forum.

This issue duplicates a number of other issues but serves as a clean place for the purposes of project development.",22,4/7/2019,12/10/2019,100,Epic,Blocker,10
MDL-66087,MDL-63042 sets bg on dasboard to light gray,"MDL-63042 set the background color on #page-my-index to a light shade of gray ($gray-100: #f8f9fa).

This means if you set the $body-bg variable, then every page background will change apart from this one.

I'm not totally sure what the reasoning behind the color choice is (possibly to set off the blocks from the white background better but one option is to set a variable for this (name will probably depend on the exact reason for the choice):

$dashboard-bg: darken($body-bg, 10%) !default;

This will be the same color as now if the body-bg is white, and it should work for most other light shades as well. If someone wants to use a very dark background then they may need to override this variable.

¬†",14,5/7/2019,5/12/2019,153,Improvement,Minor,10
MDL-66115,Setting message on ddimageortext if choice not found allows legacy cron to finish,Adding this fix for the bug reported in MDL-66095 which allows the cron job to finish while we get that fix under control.,15,10/7/2019,19/7/2019,9,New feature,Major,5
MDL-66272,Custom theme favicon on LTI provider site breaks LTI authentication,"This report stems from the discussion at¬†[https://moodle.org/mod/forum/discuss.php?d=371252]

Problem: If a favicon is added through a custom theme setting on the provider site, LTI authentication doesn't work.¬†

A technical description of the issue can be read here:¬†[https://moodle.org/mod/forum/discuss.php?d=371252]

¬†",10,29/7/2019,9/8/2019,11,Bug,Minor,5
MDL-66375,"Option to disable the ""Forgotten password"" feature in the app",We should allow site admins to disable this features so its not displayed in the app.,9,12/8/2019,30/8/2019,18,Improvement,Minor,5
MDL-66849,Appearance of tooltip title attributes in custom menu is incorrect,"Custom menu items that don't have an optional tooltip title (3rd parameter) specified, end up with duplicated menu item text in the HTML title attribute. This is an accessibility issue because screen readers will read both the link text and the title attribute resulting in every menu item being repeated twice.

Parent dropdown custom menu items that should have a title, when specified, do not end up with a title tag.
h4. *What I expected*

If no tooltip title parameter is specified, there should be no title attribute included in the link. If a title was specified, it should be included in the link.
h3. *Before the fix is applied*

Before you begin, make sure your Moodle site is using the default Boost theme as some 3rd party themes may override Moodle's default behaviour.
 # Log into Moodle as a *Moodle Administrator*.
 # Navigate to *Site Administration* > *Apperance* > *Theme* > *Theme settings*
 # In the¬†*Custom menu items* field, copy the example included in that section and paste it into the field. For our purpose, you will need to make 2 changes:
 ## Replace the first line with:¬†*Moodle community||My community*
 ## Replace the 4th line with: *-German Moodle Docs|https://docs.moodle.org/de|Documentation in German*
 # Scroll down to the bottom of the page and click *Save Changes*.

h3. *Before the fix is applied*

*Screenshot*
 !image-2020-02-18-16-26-51-903.png!

As you can see in the screenshot of the HTML source code for all of the links in the custom menu:
 # There is no *title*¬†attribute for the *Moodle community* menu item. This is incorrect as *title* parameter *was specified* yet none appear (highlighted in yellow).
 # There are a¬†*title* attribute for the¬†*Moodle Free Support*, *Moodle Docs*, *Moodle Development*, and *Moodle.com* menu items. This is incorrect as a¬†**¬†*title* parameter *was not¬†specified* for any of these items and is an accessibility issue.¬† (highlighted in red).
 # There is a¬†*title* attribute for the¬†*German Moodle Docs* menu item: *Documentation in German*. This is correct as a¬†*title* parameter¬†*was specified* (highlighted in green)*.*",58,4/10/2019,17/4/2020,196,Bug,Minor,9
MDL-66893,Improve the Forum grader UI,"Once the majority of the forum grading interface functionality has been implemented, we should make the UI match the designs.",14,10/10/2019,8/11/2019,29,Improvement,Minor,8
MDL-66960,Align question bank column titles,"The column titles of the question bank, (""Question"", ""Created by"", ""Last modified by"") are not aligned by css and do top align only by coincidence (master). In Moodle 3.7, ""Question"" really does not align.
This could be fixed.
Also, the checkbox in the title column for selecting all questions could then be bottom aligned to be closer to all other checkboxes.

 !MDL-66960-before.png|width=420! ",7,18/10/2019,22/10/2019,4,Bug,Minor,5
MDL-66966,Upgrade TCPDF to 6.3.2,"Upgrade TCPDF to 6.3.2. It includes (practically all*) the changes required to allow it to work with php74.

Bump from 6.2.26 to 6.3.2.

\* practically all, because there are still some PRs, not merged upstream that maybe we'll need to apply locally.",8,20/10/2019,29/11/2019,40,Bug,Minor,5
MDL-67073,Wrong context level for capability moodle/course:viewsuspendedusers,"capability moodle/course:viewsuspendedusers has context_system when it is something that can be granted in the course

This capability can still be added to the roles that are assignable in the course context (such as editingteacher), however it can not be overridden because of the wrong definition",7,30/10/2019,22/11/2019,23,Bug,Minor,6
MDL-67077,Remove curly brace syntax for accessing array elements in H5P component,"We have to solve an issue raised in php74 regarding the deprecation of the curly braces  in php74.
Link: https://ci.moodle.org/view/Testing/job/DEV.74%20-%20PHPUnit%207.4%20-%20MDL-66260/8/

Array and string offset access syntax with curly braces is deprecated
{code}
/var/www/html/lib/h5p/h5p.classes.php:2760
/var/www/html/h5p/classes/autoloader.php:56
/var/www/html/h5p/classes/autoloader.php:56
/var/www/html/h5p/classes/framework.php:36
/var/www/html/lib/classes/component.php:118
/var/www/html/h5p/classes/factory.php:76
/var/www/html/h5p/tests/framework_test.php:48
/var/www/html/lib/phpunit/classes/advanced_testcase.php:80
{code}

More details: https://tracker.moodle.org/browse/MDL-66609?focusedCommentId=707888&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-707888",11,30/10/2019,22/11/2019,23,Sub-task,Minor,5
MDL-67097,Identify and fix problems with rtlcss support after css parser upgrade,"MDL-65759 upgraded the parser.
lib/rtlcss uses this.

As a result, video js stopped working on RTL (MDL-66982), as some directives (valid ones) were not being respected any more.

That issue was closed, but caused a larger RTL issue (MDL-67086).

This issue is about working out why the css parser upgrade caused this (this was verified via a bisect - before that change the issue in MDL-66982 is not present)

Edited: 
Note: As part of this issue resolution we need to ensure, apart from understanding why our RTL is so ""unestable"" and fixing it, that MDL-66982 (RTL videojs) is fixed. Just to avoid forgetting it.",25,31/10/2019,8/11/2019,8,Bug,Blocker,7
MDL-67165,Improve the user grade display modal,Once we get the core functionality of displaying user grades into core we should have UX run through it and provide us with some designs.,34,7/11/2019,20/12/2019,43,Improvement,Minor,6
MDL-67300,Calendar: Inconsistent behaviour of managegroupentries capability,"1. When creating a new calendar event in a specific course, which calls calendar_get_allowed_event_types with a passed-on course id, you need one of the following capabilities:

moodle/calendar:manageentries (to create a course event)
or
moodle/calendar:managegroupentries, and a group membership or accessallgroups (to create a group event).

The manageentries capability also gives you the same permissions as managegroupentries, i.e. if you can manage course entries, you can also manage group entries (for groups you belong to, or if you have accessallgroups).

Overall, this behaviour seems fairly logical, so I'm assuming it is correct/intended.

2. When editing a calendar event, calendar_get_allowed_event_types *without* passing in a courseid, you need 

moodle/calendar:manageentries on any course (for a course event)
If you additionally have moodle/calendar:managegroupentries on that course, and a group membership or accessallgroups then you can also do group events.

Notice that this is different: editing (with course id not passed) requires both manageentries AND managegroupentries in order to edit a group event, whereas creating (with course id passed) requires either manageentries OR managegroupentries.

This strikes me as wrong. It also means you cannot correctly configure it so that some people can create tutor group events but not course ones (which is what we would like it do do). If you try to make that configuration, then it does indeed work so that these users can create tutor group events, but they then may be unable to edit the event they just created, which is obviously wrong.

See test script for an example of how to reproduce this.",21,19/11/2019,29/11/2019,10,Bug,Minor,5
MDL-67522,Config-dist refers to $CFG->lock_file_root but code uses $CFG->file_lock_root,"Config-dist refers to $CFG->lock_file_root but code uses $CFG->file_lock_root

See https://github.com/moodle/moodle/blob/master/lib/classes/lock/file_lock_factory.php#L66-L70",8,14/12/2019,20/12/2019,6,Bug,Minor,4
MDL-67548,Allow plugins to hook into course category deletion form,"When manager deletes course category, there is a confirmation dialogue that says something like this: ""This category contains: ..."", ""What to do""
 !Screenshot 2019-12-18 at 14.55.13.png|thumbnail! 

Plugins also may have contents associated with the category. Would be good if they can hook into this form and tell the manager about it. Also plugins need to know what is the selected action and perform their checks/execute code in:

core_course_category::can_move_content_to()
core_course_category::delete_move()
etc.

Currently if ""Move content to"" was selected, there is no information about the new category in the ""category_deleted"" event and plugins can not distinguish it from the full deletion event.

====

A viable plan to better allow plugins to intercept coursecat actions (delete & move right now) can be something like:

A) hooks will be used to both modify the UI/form. It's not clear if we just need to ""display"" information or, also, be able to get new data on form submission. That will define how many hooks the UI/form need.

B) hook will be also used to check permissions. The idea is to have one unique hook called something like (disclaimer, name invented, just showing what it will do): {{xxx_delete_category_can_action($category, $action)}} that will enable plugins to decide if a given action can happen.

C1) For the execution itself... there was a little bit of debate. Finally, based on how course delete/reset is doing currently, it was agreed that we would be using the existing cat_delete and cat_update events to implement the action execution in plugins. That's the primary idea.

C2) If, for any reason, the event is not enough (because it's created AFTER core has performed the execution... it's possible to use the already existing {{xxxx__pre_course_category_delete()}} hook, that happens BEFORE core execution.

D) It's acknowledged by all parties that event observers are forbidden solution for core (and that hook callbacks, when possible, should be also avoided in core, though they are not forbidden). So, in case any core plugin wants some day to take part on the ""delete cat"" & ""move cat"" actions... we should create a new {{xxxx__pre_course_category_move()}} to avoid any event observer in core.


Associated aspects to decide:

- TODO1: Decide who wins when checking permissions. Surely the easier (and also logic) is to require all the hook permissions to return ""true"" (allowed). If there is just one plugin not allowing the action to happen (false) then the action should be prevented. Note that's a simplification (true/false), surely the check can come with a textual reason too.

- TODO2: Some small refactoring, keeping BC will be needed, for example the update category event needs to be enriched to easily know which action has happened, and associated information (like the new parent category in a move and other details). That way, observers can fine-decide when they have something to do or no.

- TODO3: Point D... if that new callback for move (or update in general, although maybe that's too much) action was created now... then we wouldn't need to perform any refactor like the TODO2 above. and the solution here would be 100% hook-based (no need for events at all). This should be considered, IMO.

- TODO4: Consider how recursion affects to all this, related to the ""delete"" action. Both if the existing hook and/or the events are used.

That's it, so far. Please, feel free to amend it any time, discuss, whatever. Ciao :-)",27,18/12/2019,22/5/2020,156,Improvement,Minor,8
MDL-67663,Forum grading submit grade form does not conform to accessibility guidelines,"* Navigate to the ""Grade Users"" UI for a forum post
 * Input a grade in the ""Grade"" field
 * Navigate back to the ""Next"" link and click
 * A screen reader perceivable message ""Grade saved for ..."" is presented.

¬†

The accessibility and usability issues here can be parsed in a few ways:
 * That the ""Next"" element is marked up as a link doesn't conform to [WCAG 2.1 4.1.2|https://www.w3.org/WAI/WCAG21/Understanding/name-role-value]¬†because, when data is present, it functions as a submit button. Users do not typically expect clicking a link to submit data. (There is arguably no 4.1.2 issue if there is no data in the ""Grade"" field, because it is functioning as a link.)
 * You could view the same issue as a [WCAG 2.1 1.3.1|https://www.w3.org/WAI/WCAG21/Understanding/info-and-relationships]¬†nonconformance, since the relationship between the navigation and the form is not clear, and submitting data by not clicking a link is not semantics. (WCAG 1.3.1 generally hopes for valid semantics.)
 * Since there are no instructions indicating that the way to submit the data is by clicking the link, the interaction does not really conform with the spirit of [WCAG 2.1 3.3.2|https://www.w3.org/WAI/WCAG21/Understanding/labels-or-instructions], which expects helpful instructions for forms.
 * While the grade submitted status message is perceivable by screen readers, the is no indication that the student presented has updated (that the link has taken the user to a new student.) The new student's name and the ""X out of Y"" change in context are not updated. so this does't conform to [WCAG 2.1 4.1.3|https://www.w3.org/WAI/WCAG21/Understanding/status-messages]. To demonstrate this, click the ""Next"" button without data entered into the grade field. No status message is presented to the user even though the student displayed has been updated.
 * Though not a strict accessibility nonconformance but a usability concern: when clicking the ""Next"" or ""Previous"" button, focus remains on the link, which may suggest to a screen reader user that nothing has changed when clicking it, especially when there is no status message. Moving focus to, say, the users name may help indicate to the user that clicking a link has in fact navigated to a new resource.
 * Typically, in forms, submit buttons occur at the end of the form. Since the ""Next / Previous"" buttons appear at the top of the form, and no explicit submit button is present, and no instructions are present, a user may be confused how to submit the form information. It can also be cumbersome to navigate to the end of the form to submit data, and then navigate back through the form to find the submit button.

I'm not sure whether these would be usability issues without testing with users with disabilities, and if they have said they have no issue with the UI, that's great. But if usability testing hasn't done, the overall interaction might be a candidate for testing and redesign.

In the mean time, adding instructions that clicking the Next button will submit data, if any data is present, and providing status updates that the UI has navigated to a new student, would present immediate accessibility improvements.",22,11/1/2020,17/4/2020,97,Bug,Major,7
MDL-67734,Create basic skeleton for a global xAPI library needed for H5P content,"A basic xAPI LRS support is needed In order to get statements from H5P content.

This first issue will cover the following needs:
 * Have a ""lib/xAPI"" library for the main LRS access point
 * A generic Moodle webservice layer which wraps a xAPI statement processing
 * xAPI handler base classes which every plugin can extend to use xAPI on their code
 * xAPI statement class to generate xAPI statements with all related classes for handling actors (user, group), objects and verbs (the rest of xAPI properties would be compatible but validations will be responsibility of every plugin for now).
 * PHPUnit test
 * Null privacy provider

The web service for processing a xAPI statement will delegate part of the process to specific plugins like the future mod_h5p.
h2. xAPI generic webservice (component, statement)

The web service receive a frankenstyle component responsible to handle part of the statement and a xAPI statement structure.

xAPI Statement generic processing method will:
 # xAPI checks the statement structure, if any check fails, it returns an error. That means:
 ## Check that only supported xAPI attributes are used
 ## Check all users and groups are created in the LMS
 # xAPI checks if the component has a xAPI handling class implementation. Otherwise it returns an error.
 # For every statement:
 ## *xAPI asks again the plugin to you convert into a standard event*. In case the plugin could not convert some statement into an event, this statement will be marked as ‚Äúrejected‚Äù and xAPI continue to the next statement.
 ## xAPI handler will trigger all the generated events
 # Once all statements are processed:
 ## If ALL statements are marked as ‚Äúnot processed‚Äù it returns an error.
 ## If some statement could be processed, returns an array containing ‚Äútrue‚Äù if the statement is processed and ‚Äúfalse"" otherwise.

¬†",72,20/1/2020,2/4/2020,73,Improvement,Major,7
MDL-67758,Missing $CFG->wwwroot in messageoutput_airnotifer payload sent to Airnotifier prevents intended use checks,"The $CFG->wwwroot is necessary to check for good use of the provided Access keys by Airnotifier (the access key should be only used by the site that originally requested it).

Right now, this value is not passed to the Airnotifier public instance so it is very easy to use the same ""Access key"" for multiple different sites (even if they are not registered).

¬†

¬†",9,21/1/2020,28/2/2020,38,Bug,Major,5
MDL-67827,Random behat failures: 'value' must be a string when selecting users,"Issue link: https://ci.moodle.org/job/W.03.01%20-%20Behat%20-%20Chrome%20+%20Postgres/635/

{code:java}
001 Scenario: Searching for a non-existing user          # /var/www/html/enrol/manual/tests/behat/quickenrolment.feature:130
      And I set the field ""Select users"" to ""qwertyuiop"" # /var/www/html/enrol/manual/tests/behat/quickenrolment.feature:133
        Exception: invalid argument: 'value' must be a string
          (Session info: chrome=79.0.3945.117)
          (Driver info: chromedriver=79.0.3945.36 (3582db32b33893869b8c1339e8f4d9ed1816f143-refs/branch-heads/3945@{#614}),platform=Linux 4.15.0-74-generic x86_64) in /var/www/html/vendor/instaclick/php-webdriver/lib/WebDriver/Exception.php:144
{code}

This has been detected to be happening at very least in the following scenarios:

- Searching for a non-existing user
- Teacher can search and enrol one particular student
- If there are less than 100 matching users, all are displayed for selection
- If there are more than 100 matching users, inform there are too many
- Change the Show user identity setting affects the enrolment pop-up : (happens 2x often than the others)
- Changing the Maximum users per page setting affects the enrolment pop-up

Never failing twice apparently, but the last one, that have happened twice a couple of times at very least.

",20,29/1/2020,12/3/2020,43,Bug,Blocker,6
MDL-67846,Add name of user to fields included in forum exports,"When exporting a forum (discussions) to a CSV, Excel etc, it only includes the user ID field which is of little/no use to teachers/instructors. It would be great to include the user's names etc.",22,31/1/2020,28/2/2020,28,Improvement,Minor,7
MDL-67901,No label for clear my choice option on multiple-choice questions,"h5. Issue
 * No label for clear my choice
 * 2 errors were found using W3C Nu Validation Service and filtered to indicate WCAG errors only. See¬†screenshot-2.

h5. Affected guidelines:
h6. A
 * *Info and Relationships:*
 *1.3.1* Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.
 * *Labels or instructions:*
 *3.3.2* Labels or instructions are provided when content requires user input
 * *Parsing:*
 *4.1.1* In content implemented using markup languages, elements have complete start and end tags, elements are nested according to their specifications, elements do not contain duplicate attributes, and any IDs are unique, except where the specifications allow these features.
 Note: Start and end tags that are missing a critical character in their formation, such as a closing angle bracket or a mismatched attribute value quotation mark are not complete.

h5. Affected browsers:
 * All",33,7/2/2020,20/3/2020,42,Bug,Minor,8
MDL-67910,"Random failure with scenario ""Delete an event""","it has been detected that this failure is happening a good number of times, although it doesn't use to happen twice in the same run.

Links:
 * [https://ci.moodle.org/job/S.07.01%20-%20Behat%20-%20Firefox%20+%20Postgres%20+%20Classic/170/]
 * [https://ci.moodle.org/job/S37.03.03%20-%20Behat%20-%20Chrome%20+%20MariaDB%20(lowest)/131/]¬†

{code}Scenario: Delete an event                # /var/www/html/calendar/tests/behat/calendar.feature:102
      And I click on ""Delete event"" ""button"" # /var/www/html/calendar/tests/behat/calendar.feature:112
        Button matching locator ""Delete event"" not found. (Behat\Mink\Exception\ElementNotFoundException)
{code}
While not critical, better if we are able to find the cause and stop it.",22,8/2/2020,17/4/2020,69,Bug,Minor,4
MDL-67913,Update table_sql to support a generic web service,"Currently table_sql and its derivatives are entirely configured via their constructor and one-off endpoints (e.g. /user/index.php).

I am proposing the following changes:
# Update {{lib/components.json}} to define the existing {{""table""}} subsystem in ""{{lib\/table}}""
# create a new interface {{\core_table\dynamic}} (or similar) in {{lib/table/classes/dynamic.php}}. Can be initially empty while we work the full details out
# have our existing user class implement the new interface ({{\core_user\participants_table}})
# move all logic from the current constructor of the participants table to the new argument processing system, and update the calls to it in {{user/index.php}}
# create a new web service to fetch a table_sql view;

h3. Interface and implementation in participants table
# Will need functions including:
## {{get_unique_id_from_argument(string $argument): string;}} (discussed below);
## {{get_base_url(): \moodle_url;}}
## {{process_arguments(?): void}}

h3. Webservice
# Will have a WS name like '{{core_table_dynamic}}' and be located in {{\core\table\external\dynamic}} ({{lib/table/classes/external/dynamic.php}})
# Should take arguments:
## {{handler}} - the auto-loadable class name of a class extending {{table_sql}} and implementing {{\core_table\dynamic}}
## {{uniqueid}} - the unique id of the table:
### This is typically done in the class extending {{table_sql}}. e.g in {{\core_user\participants_table}} we call {{parent::__construct('user-index-participants-' . $courseid)}} - so the unique id is {{user-index-participants-[\d+]}}
### We may wish to create a static function on the interface + implementation like {{get_unique_id_from_argument(string $argument): string;}}
### We can then create an implementation in the participants table like:
{code}
public static function get_unique_id_from_argument(string $argument): string {
    return ""user-index-participants-{$argument}"";
}
{code}
And in our WS we can use it like:
{code}
if (!class_exists($handler) || !is_subclass_of($handler, \core_table\dynamic::class)) {
   throw new \Exception('Not supported');
}
$instance = new $handler($handler::get_unique_id_from_argument($uniqueid));
{code}
## {{filters}} - the list of filters to the table. This is essentially the extra arguments currently provided to the constructor.
### We probably want to make this a list of key/value pairs _or_ a JSON string that we can decode and pass to the instantiated class
# We will return:
## list of data attributes which correlates to the input received
## Raw HTML raw
### In future we will update the {{table_sql}} and {{flexible_table}} classes to make use of a set of templates, and we can then return the template name, and a data structure",31,10/2/2020,20/3/2020,39,Improvement,Critical,5
MDL-68019,Improve favourites performance for the activity chooser,"There are 2 parts to this:

The first, is an addition to the existing API, to address a situation encountered in MDL-67585. This situation is when a component wishes to store favourites for an area using multiple different itemtype strings. In such a case, we'd like to be able to get the favourites for all the item types at once - at present, this must be done via multiple API calls to find_favourites_by_type.

The second is to update the calling code in content_item_readonly_repository, to use the single new API call instead of several calls in a loop (the current situation).

¬†",15,21/2/2020,12/3/2020,20,Improvement,Minor,5
MDL-68049,Link-level LTI memberships service not working,"The {{/mod/lti/services.php/links/\{link_id\}/memberships}} endpoint is returning a 404 error.

The membership data has a misspelled element (""giveName"") and omits the ext_user_username element when this is included in launch messages.

Note that this only affects the old version of the Link-level Memberships service, not the new version which uses a query parameter to the Context-level Memberships service to request a link-level response.",42,25/2/2020,2/4/2020,37,Bug,Major,8
MDL-68203,Error duplicating quiz when there is a course view link in the answer,"Steps to replicate
 # Create A course
 # Create a quiz
 # Add a multiple choice question
 # Add an answer contain a link which point to http://[currentmoodlesite]/course/view.php?id=[courseid]
 # Save the question
 # Duplicate the quiz
 # There will be error displayed:

{quote}Failed to find an answer matching ""<p><a href=""$@COURSEVIEWBYID*14@$"">Link ABC</a></p>"" in the question_answers database table. This occurred while restoring the question with id 1 in the backup file, which has been matched to the existing question with id 1 in the database.

Error code: error_question_answers_missing_in_db
 * line 185 of /backup/moodle2/restore_qtype_plugin.class.php: restore_step_exception thrown
 * line 137 of /backup/util/plan/restore_structure_step.class.php: call to restore_qtype_plugin->process_question_answer()
 * line 121 of /backup/util/helper/restore_structure_parser_processor.class.php: call to restore_structure_step->process()
 * line 178 of /backup/util/xml/parser/processors/grouped_parser_processor.class.php: call to restore_structure_parser_processor->dispatch_chunk()
 * line 109 of /backup/util/helper/restore_structure_parser_processor.class.php: call to grouped_parser_processor->postprocess_chunk()
 * line 148 of /backup/util/xml/parser/processors/simplified_parser_processor.class.php: call to restore_structure_parser_processor->postprocess_chunk()
 * line 92 of /backup/util/xml/parser/processors/progressive_parser_processor.class.php: call to simplified_parser_processor->process_chunk()
 * line 190 of /backup/util/xml/parser/progressive_parser.class.php: call to progressive_parser_processor->receive_chunk()
 * line 278 of /backup/util/xml/parser/progressive_parser.class.php: call to progressive_parser->publish()
 * line ? of unknownfile: call to progressive_parser->end_tag()
 * line 179 of /backup/util/xml/parser/progressive_parser.class.php: call to xml_parse()
 * line 158 of /backup/util/xml/parser/progressive_parser.class.php: call to progressive_parser->parse()
 * line 110 of /backup/util/plan/restore_structure_step.class.php: call to progressive_parser->process()
 * line 181 of /backup/util/plan/base_task.class.php: call to restore_structure_step->execute()
 * line 178 of /backup/util/plan/base_plan.class.php: call to base_task->execute()
 * line 168 of /backup/util/plan/restore_plan.class.php: call to base_plan->execute()
 * line 384 of /backup/controller/restore_controller.class.php: call to restore_plan->execute()
 * line 3506 of /course/lib.php: call to restore_controller->execute_plan()
 * line 3518 of /course/externallib.php: call to duplicate_module()
 * line 244 of /lib/externallib.php: call to core_course_external::edit_module()
 * line 79 of /lib/ajax/service.php: call to external_api::call_external_function(){quote}
¬†

{{I find that during an general course restore, the function define_decode_rules() is called}}
 {{But during the quiz duplication, the function is not called}}

¬†",33,19/3/2020,5/6/2020,78,Bug,Minor,10
MDL-68281,Missing moodle_phpmailer in core_authlib_testcase::test_signup_validate_data_same_email,"This is a regression introduced by MDL-68183

In an experimental issue I've (travis windows support), where I do execute unit tests separated into multiple filtered groups... (to avoid timeouts) I'm getting the following failure:

{code}
There was 1 error:
1145
11461) core_authlib_testcase::test_signup_validate_data_same_email
1147Error: Class 'moodle_phpmailer' not found
1148
1149C:\Users\travis\build\stronk7\moodle\lib\tests\authlib_test.php:436
1150C:\Users\travis\build\stronk7\moodle\lib\phpunit\classes\advanced_testcase.php:80
1151
1152To re-run:
1153 vendor/bin/phpunit --verbose ""core_authlib_testcase"" lib/tests/authlib_test.php
{code}
(link: https://travis-ci.org/github/stronk7/moodle/jobs/667670316)",9,28/3/2020,2/4/2020,5,Bug,Minor,5
MDL-68351,Backport MDL-67374 (Upgrade SimplePie to latest version) to 38_STABLE,"MDL-67374 updated SimplePie from 1.5.2 --> 1.5.3.

Changes were really small (mostly is was text) and it comes with [a php74 support change|https://github.com/stronk7/moodle/commit/0df71b23a28c7a91a13d0369ca466fb2245c19e3#diff-27a7df8a64dda47edab485833f5bfdf7L578-R579] that we need in the 38_STABLE branch.

While the change could be picked individually, in this case it seems that picking the whole issue is safe and better (so we don't have to keep local modifications).

So this is a proposal to backport, plain and straight, the original issue.",16,6/4/2020,24/4/2020,18,Bug,Minor,5
MDL-68405,Regression: grunt gherkinlint not providing correct exit status anymore,"This was detected when working on MDLSITE-6103 because I was getting non-consistent results in some of the tests being added there.

In that issue ([see details|https://tracker.moodle.org/browse/MDLSITE-6103?focusedCommentId=791100&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-791100]) the problem was bisected and found that the change of behavior came with MDL-67953.

Basically, before that patch... whenever the {{gherkinlint}} task finds errors, they are reported, then some warning text is shown and the execution ends with error and exit code (not 0).

After the patch, the errors are reported exactly the same, but the warning text is not shown and the execution ends without error and with exit code (= 0).

To reproduce:

- edit any feature file, change some indentation (to force a gherkin-lint error).
- run {{grunt gherkinklint; echo $}}?
- expectation: exit code should not be zero.
- current: exit code is zero.

Have confirmed that reverting the commit does lead to the expected result.

Haven't checked if there are other tasks affected the same way. Say stylelint, eslint... all them should lead to error exit code if there are errors.

Ciao :-)

PS: I think this explains pretty much why, recently, some gherkin violations have met core and we haven't detected them (in fact that's ultimately the cause I prepared MDLSITE-6103). Since this regression, grunt is not failing any more... hence CiBoT says all ok, so there wasn't any reason to look. Before the regression, grunt was failing and, although it was hard to find the cause (well-hidden in log/xml files in the job) it was enough ro raise alarms and make us look for it.",11,14/4/2020,17/4/2020,3,Bug,Minor,7
MDL-68592,Inline layout is broken for form group containing nested group,"While this is not affecting any interface in core, it is a possible scenario of group use.

Say, if form group contains another group within it, the layout currently looks like:
 !nofix.png|thumbnail! 

The patch is addressing the issue, making the layout look like:
 !afterfix.png|thumbnail! ",8,4/5/2020,27/5/2020,23,Bug,Minor,5
MDL-68789,Behat app scenarios fail on I enter the app step,"On Moodle App 3.8.3 onwards we've changed the login page to improve the UX. Also the page menu button has changed the aria label text.

All the scenarios are failing because of that when running ""next"" version of the app.

This is because two changes:
 # New onboarding pages during first login.
 # Texts changes on url field and connect button.
 # Aria label on page menu button changed.

To solve that, some changes have to be done on the behat LMS part.",13,20/5/2020,29/5/2020,9,Bug,Major,4
MDL-68973,"Bump all versions, requires and dependencies near 3.9 release in master","This task corresponds to point #3 of:

https://docs.moodle.org/dev/Release_process#1_week_prior

And it's achieved in a semi-automated way with the ""versions_check_set.sh"" script available @ https://github.com/moodlehq/moodle-local_ci/blob/master/versions_check_set/versions_check_set.sh 

1) In a git, working, master site with the ci local plugin installed.

2) Define and export all the env variables required by the script.
- $WORKSPACE: Path to the directory where test reults will be sent (/tmp)
- $phpcmd: Path to the PHP CLI executable (/usr/bin/php)
- $gitdir: Directory containing git repo (the dirroot of the git, working site)
- $setversion: 10digits (YYYYMMDD00) to set all versions to. Empty = not set. Since Moodle 2.7 it has been agreed to perform the bump to the planned release version. For easier automated checks later in stable-land.
- $setrequires: 10digits (YYYYMMDD00) to set all requires to. Empty = default to $setversion. Since Moodle 2.7 it has been agreed to perform the requires bump to current master version (usually a RC one).

3) Run it. With errors, they will be reported and fixing will be necessary. (look for ERROR in the $WORKSPACE/versions_check_set.txt file and/or check exit status of the script)

4) Without errors, all the versions, requires and dependencies will be bumped.

5) Commit

6) Note that the main version file is NOT updated at all. One extra commit bumping it may be necessary (to anything >= requires version).

7) Run the checker again to verify that there are no errors and no more changes are performed.

Note the checker is also run periodically by the ci server and also as part of the ""remote_branch_checker"", so normally all the version.php files should be under control.

(This issue will be cloned for each major release).

Ciao :)",13,9/6/2020,12/6/2020,3,Task,Minor,6
MDL-69228,Mobile settings have no defaults,The tool_mobile tool is not correctly applying settings because it is _removing_ settings during install/upgrade rather than simply hiding them.,9,8/7/2020,17/7/2020,9,Bug,Blocker,5